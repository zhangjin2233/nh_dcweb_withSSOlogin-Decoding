webpackJsonp([0],{"1K9o":function(t,e){},"8nsI":function(t,e){},TUXI:function(t,e){},VdIR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={components:{},props:["height","rate"],data:function(){return{table:new dc.Table({hasPage:!1,height:"240px",filterSetting:[{prop:"opTime",show:function(t){return-1==t||0==t?"":formatTime(t)}},{prop:"endTime",show:function(t){return-1==t||0==t?"":formatTime(t)}},{prop:"startTime",show:function(t){return-1==t||0==t?"":formatTime(t)}}]})}},created:function(){var t=this;this.$reqGet(DCURL.url,{flag:DCURL.flag.runStatus}).then(function(e){if(e){t.table.set("tableData",e.CONTENT.tableData),t.table.set("tableHead",e.CONTENT.tableHead);e.CONTENT.tableHead;t.table.colsWidth=[],t.table.colsWidth=[{prop:"total",width:"52px"},{prop:"successNum",width:"60px"},{prop:"failNum",width:"60px"},{prop:"opTime",width:"136px"},{prop:"startTime",width:"136px"},{prop:"endTime",width:"136px"}]}t.$emit("finishReq")}).catch(function(e){t.$emit("finishReq")});var e=parseInt(this.height);this.table.height=e/2+"px"},watch:{},computed:{},methods:{}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"total-table"},[e("dc-table",{staticClass:"dc-table",attrs:{object:this.table}})],1)},staticRenderFns:[]};var r=a("VU/8")(i,n,!1,function(t){a("ZF5Q")},"data-v-5e2d6104",null).exports,o=a("+SrV"),s={components:{},props:["height","rate"],data:function(){return{table:new dc.Table({hasPage:!1,height:"240px",filterSetting:[{prop:"opTime",show:function(t){return-1==t||0==t?"":formatTime(t)}},{prop:"endTime",show:function(t){return-1==t||0==t?"":formatTime(t)}},{prop:"startTime",show:function(t){return-1==t||0==t?"":formatTime(t)}}]})}},created:function(){var t=this;this.$reqGet(DCURL.url,{flag:DCURL.flag.jobStatus}).then(function(e){if(e){t.table.set("tableData",e.CONTENT.tableData),t.table.set("tableHead",e.CONTENT.tableHead);e.CONTENT.tableHead;t.table.colsWidth=[],t.table.colsWidth=[{prop:"priorty",width:"60px"},{prop:"times",width:"70px"},{prop:"status",width:"68px"},{prop:"startTime",width:"136px"},{prop:"endTime",width:"136px"}];var a=[],i=[];for(var n in o.a.statusColor)a.push(o.a.statusColor[n].split("-")[1]),i.push(o.a.statusColor[n].split("-")[0]);t.table.cellStyle=function(t,e){var n=a.indexOf(t[e]);if(-1!==n)return{background:i[n]}}}t.$emit("finishReq")}).catch(function(e){t.$emit("finishReq")});var e=parseInt(this.height);this.table.height=e/2+"px"},watch:{},computed:{},methods:{}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"job-status"},[e("dc-table",{staticClass:"dc-table",attrs:{object:this.table}})],1)},staticRenderFns:[]};var h=a("VU/8")(s,c,!1,function(t){a("j1bw")},"data-v-b80bd376",null).exports,l={components:{},props:["width","rate"],data:function(){return{option:{xAxis:{type:"category"},yAxis:{type:"value",axisLabel:{formatter:"{value}%"},min:0,max:100},legend:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{b0}<br/>{a0}:{c0}%<br/>{a1}:{c1}%<br/>{a2}:{c2}%"}},chartHeight:"270px",interval:null}},created:function(){this.chartHeight=this.width/2*this.rate*.9+"px",this.getData()},destroyed:function(){clearInterval(this.interval),this.interval=null},watch:{},computed:{},methods:{getData:function(){var t=this,e=[],a=[];this.$reqGet(DCURL.url,{flag:DCURL.flag.pie}).then(function(i){if(i){var n=[],r=[],o=[],s={show:!0,formatter:function(t){if(t.value)return t.seriesName+"\n"+t.value+"%"}};i.CONTENT.data.forEach(function(t){for(var a in e.push(t.name),t.data)"cpu"===a?n.push({value:parseInt(t.data[a]),itemStyle:{color:parseInt(t.data[a])>60?["#e5323e"]:["#4cabce"]}}):"hard"===a?o.push({value:parseInt(t.data[a]),itemStyle:{color:parseInt(t.data[a])>60?["#e5323e"]:["#4cabce"]}}):"memory"===a&&r.push({value:parseInt(t.data[a]),itemStyle:{color:parseInt(t.data[a])>60?["#e5323e"]:["#4cabce"]}})}),a=[{name:"CPU",type:"bar",barGap:0,label:s,data:n},{name:"硬盘",type:"bar",barGap:0,label:s,data:o},{name:"内存",type:"bar",barGap:0,label:s,data:r}],t.$nextTick(function(){t.option.xAxis.data=e,t.option.series=a,Echarts.init(document.getElementById("statistics-bar")).setOption(t.option),t.interval||(t.interval=setInterval(function(){t.getData()},1e4))})}t.$emit("finishReq")}).catch(function(e){t.$emit("finishReq")})}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:"width: 100%; height: "+this.chartHeight,attrs:{id:"statistics-bar"}})])},staticRenderFns:[]};var u=a("VU/8")(l,d,!1,function(t){a("vQN4")},"data-v-29457e1b",null).exports,p={components:{},props:["id","length","option","width","rate"],data:function(){return{chartHeight:"270px"}},created:function(){var t=this;this.chartHeight=this.width/2*this.rate+"px",this.$nextTick(function(){Echarts.init(document.getElementById(t.id)).setOption(t.option)})},watch:{},computed:{},methods:{}},f={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:"width: "+100/this.length+"%; height: "+this.chartHeight,attrs:{id:this.id}})},staticRenderFns:[]};var m={components:{gauge:a("VU/8")(p,f,!1,function(t){a("8nsI")},"data-v-7684651c",null).exports},props:["width","rate"],data:function(){return{data:[]}},created:function(){var t=this;this.$reqGet(DCURL.url,{flag:DCURL.flag.pie}).then(function(e){if(e){var a=e.CONTENT.data.map(function(t){return{tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"业务指标",type:"gauge",detail:{formatter:"{value}%"},data:[{value:parseInt(t.rate),name:t.title}]}]}});t.data=a}})},watch:{},computed:{},methods:{}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gauge"},t._l(t.data,function(e,i){return a("gauge",{key:i,staticClass:"gauge-item",attrs:{width:t.width,option:e,id:"gauge"+i,length:t.data.length,rate:t.rate}})}))},staticRenderFns:[]};var b={components:{},props:["width","rate"],data:function(){return{chartHeight:"270px"}},created:function(){var t=this;this.chartHeight=this.width/2*this.rate*.9+"px";for(var e=[],a=0;a<24;a++)e.push(a+":00");var i={title:{text:"运行成功作业数"},tooltip:{trigger:"axis"},legend:{data:["今天","昨天","前天"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"今天",type:"line",data:[]},{name:"昨天",type:"line",data:[]},{name:"前天",type:"line",data:[]}]};this.$reqGet(DCURL.url,{flag:DCURL.flag.chart}).then(function(e){if(e){var a={first:{index:0,data:e.CONTENT.first},second:{index:1,data:e.CONTENT.second},third:{index:2,data:e.CONTENT.third}};for(var n in a)i.series[a[n].index].data=a[n].data.map(function(t){return t.count});Echarts.init(document.getElementById("linesChart")).setOption(i)}t.$emit("finishReq")}).catch(function(e){t.$emit("finishReq")}),this.$nextTick(function(){})},watch:{},computed:{},methods:{}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{style:"width: 100%; height: "+this.chartHeight,attrs:{id:"linesChart"}})])},staticRenderFns:[]};var w={components:{"total-table":r,"job-table":h,"statistics-bar":u,"statistics-gauge":a("VU/8")(m,g,!1,function(t){a("k09x")},"data-v-3e5e4e84",null).exports,"statistics-lines":a("VU/8")(b,v,!1,function(t){a("TUXI")},"data-v-725f82e1",null).exports},content:[[{component:"total-table",title:"总体运行状态",titleAlign:"center"},{component:"job-table",title:"作业运行状态",titleAlign:"center"}],[{component:"statistics-lines",title:"",titleAlign:"center"},{component:"statistics-bar",title:"资源占用状态",titleAlign:"center"}]]},x={components:w.components,props:[],data:function(){return{config:w,table:new dc.Table,content:w.content,height:"400px",width:0,rate:1,laodCount:0}},created:function(){var t=this;this.width=document.documentElement.clientWidth,this.height=this.getContentHeight(),this.rate=document.documentElement.clientHeight/document.documentElement.clientWidth,window.onresize=function(){t.getContentHeight()},this.$store.commit("showLoading")},watch:{laodCount:function(t){4===t&&(this.$store.commit("closeLoading"),this.laodCount=0)}},computed:{},methods:{getContentHeight:function(){return window.innerHeight-189+"px"},finishReq:function(){this.laodCount++}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"statistic"},t._l(t.config.content,function(e,i){return a("el-row",{key:i},t._l(e,function(i,n){return a("el-col",{key:n,style:"background: "+i.background,attrs:{span:24/e.length}},[a("h3",{style:"text-align: "+i.titleAlign},[t._v(t._s(i.title))]),t._v(" "),a(i.component,{tag:"component",attrs:{height:t.height,width:t.width,rate:t.rate},on:{finishReq:t.finishReq}})],1)}))}))},staticRenderFns:[]};var C=a("VU/8")(x,T,!1,function(t){a("1K9o")},"data-v-a55faf86",null);e.default=C.exports},ZF5Q:function(t,e){},j1bw:function(t,e){},k09x:function(t,e){},vQN4:function(t,e){}});