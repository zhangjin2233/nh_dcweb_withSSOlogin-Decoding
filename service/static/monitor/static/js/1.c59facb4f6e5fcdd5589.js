webpackJsonp([1],{J9BJ:function(t,e){},Kkj5:function(t,e){},MiKq:function(t,e){},"Rf3/":function(t,e){},WJMN:function(t,e){},xlZp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("pQWX"),n=o("oqti"),s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("g",[o("foreignObject",{attrs:{x:t.node.x,y:t.node.y,width:t.node.width,height:t.node.height}},[o("img",{staticClass:"pointer",style:t.flow.nodeContainerStyle+";border-color:"+t.flow.vue.focusNodesStyle(t.node.id,"node"),attrs:{src:t.flow.img.pathNode+t.node.imgSrc+t.flow.img.ext,width:t.node.width,height:t.node.height,title:t.flow.vue.nodesTip.CONTENT&&t.flow.vue.nodesTip.CONTENT[t.node.id]?t.flow.vue.htmlToStr(t.flow.vue.nodesTip.CONTENT[t.node.id].msg):t.node.id},on:{error:function(e){t.node.imgSrc=t.flow.img.name.node},mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.flow.vue.choseNode(e,t.node)},mouseup:function(e){e.stopPropagation(),e.preventDefault(),t.flow.vue.moveOver()},contextmenu:function(e){e.stopPropagation(),e.preventDefault(),t.flow.vue.nodeRightClick(e,t.node)}}})]),t._v(" "),o("text",{style:"font-size:"+t.flow.nodeLabelSize+"px;text-anchor: middle",attrs:{x:t.node.x+t.node.width/2,y:t.node.y+t.node.height+t.flow.nodeLabelSize+2}},[t._v(t._s(t.flow.showLabel&&t.node.label||t.node.id))]),t._v(" "),t.flow.vue.showStatus(t.node.id)?o("foreignObject",{attrs:{x:t.node.x+t.node.width+2,y:t.node.y+t.node.height-t.flow.statusImgSize,width:t.flow.statusImgSize,height:t.flow.statusImgSize}},[o("img",{attrs:{src:t.flow.img.pathStatus+t.flow.vue.nodesStatus.CONTENT[t.node.id].status+t.flow.img.extGif,width:t.flow.statusImgSize,height:t.flow.statusImgSize},on:{error:function(e){t.flow.vue.nodesStatus.CONTENT[t.node.id].status=t.flow.img.name.status}}})]):t._e()],1)},staticRenderFns:[]};var l=o("VU/8")({name:"node",props:["propData"],data:function(){return{flow:this.propData.flow,node:this.propData.node}},watch:{propData:function(){this.flow=this.propData.flow,this.node=this.propData.node}},methods:{}},s,!1,function(t){o("J9BJ")},"data-v-c72e099e",null).exports,r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pointer",style:t.flow.nodeContainerStyle+";border-color:"+t.flow.vue.focusNodesStyle(t.node.id,"node")+";"},[o("p",{staticClass:"text-overflow",style:t.flow.textListTitleStyle},[o("img",{directives:[{name:"show",rawName:"v-show",value:t.node.textList.length,expression:"node.textList.length"}],attrs:{title:t.flow.listShowTip,src:t.flow.img.pathAttr+(t.node.listShow?t.flow.img.name.listDown:t.flow.img.name.listUp)+t.flow.img.ext,width:t.flow.titleImgSize.width,heigth:t.flow.titleImgSize.height},on:{mousedown:function(e){e.stopPropagation(),t.flow.changeNodeTextListShow(t.node)}}}),t._v(" "),o("img",{attrs:{src:t.flow.img.pathAttr+t.flow.img.name.dc+t.flow.img.ext,width:t.flow.titleImgSize.width,heigth:t.flow.titleImgSize.height}}),t._v(" "+t._s(t.node.title))]),t._v(" "),t._l(t.node.textList,function(e,i){return o("p",{directives:[{name:"show",rawName:"v-show",value:t.node.listShow,expression:"node.listShow"}],key:i,staticClass:"text-overflow",style:t.flow.textListStyle},[o("img",{attrs:{src:t.flow.img.pathAttr+e.dataType+t.flow.img.ext,width:t.flow.textListImgSize.width,heigth:t.flow.textListImgSize.height},on:{error:function(o){e.dataType=t.flow.img.name.dataType}}}),t._v(" "+t._s(e.label))])})],2)},staticRenderFns:[]};var a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"slide-fade"}},[t.flow.btnGroupMember.show?o("div",{staticClass:"btnGroupMember",style:t.flow.btnGroupMember.style},t._l(t.flow.toolbar,function(e,i){return o("div",{key:i},[o("el-button-group",t._l(e,function(e,n){return o("el-button",{key:n,attrs:{title:e.title,disabled:e.disabled&&e.disabled(t.flow)},on:{click:function(o){t.toolBtnClick(e,i,n)}}},[o("i",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"item.load"}],staticClass:"el-icon-loading"}),t._v(" "),o("i",{class:e.icon||t.flow.btnGroupMember.icon,style:"color:"+e.color,attrs:{size:"mini"}})])}))],1)})):t._e()])},staticRenderFns:[]};var f={name:"flow",props:["object"],data:function(){return{flow:this.object,recordKeyPre:"",layers:"",index:"",svg_div:"",nodes:{},lines:[],groups:[],nodeObj:{},panelObj:new i.a,selectBox:n.a,linesObj:{},focusNodes:[],focusLines:[],floatFlag:{value:!0},e:{},isBtnGroupShow:!1,nodesTip:{},flowLoading:!1,statusContorl:null,nodesStatus:{},panelLayoutBorder:{x:0,y:0},contextMenuShow:!1}},computed:{lineWidth:function(){return this.flow.lineWidth+"px"}},watch:{lineWidth:function(t){switch(parseInt(t)){case this.flow.line.width.thin:this.flow.line.arrow.size=this.flow.line.arrow.sizes.thin;break;case this.flow.line.width.thick:this.flow.line.arrow.size=this.flow.line.arrow.sizes.thick}},object:function(){this.flow=this.object,this.flow.initAll(this)},lines:function(){this.flow.historySave(this)},nodes:function(){this.flow.historySave(this)}},destoryed:function(){this.flow.stopGetStatus(this)},created:function(){var t=this;this.$nextTick(function(){t.flow.initAll(t)})},methods:{showStatus:function(t){return this.nodesStatus.CONTENT&&this.nodesStatus.CONTENT[t]},htmlToStr:function(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText},focusNodesStyle:function(t,e){return this.flow.focusStyle(t,this.focusNodes,e,this.flow.delay)},focusLinesStyle:function(t,e){return this.flow.focusStyle(t,this.focusLines,e,this.flow.delay)},choseNode:function(t,e){this.nodeObj.chose(e,t,this),1!==t.detail?this.flow.nodeDbClick(t,e,this):this.flow.nodeSingleClick(t,e,this)},moveOver:function(){this.nodeObj.moveOver(this)},selectStar:function(t){this.selectBox.selectStar(this,t,this.panelObj,this.$refs.selectBox,this.$refs.svg)},selectOver:function(){this.selectBox.selectOver(this.nodes,this)},selectBoxMoveStart:function(t){setTimeout(this.selectBox.selectBoxMoveStart(t,this),this.flow.delay)},selectBoxMoveOver:function(){this.selectBox.selectBoxMoveOver(this)},selectBoxDbClick:function(t){this.flow.selectBoxDbClick(t,this)},selectBoxRightClick:function(t){this.flow.selectBoxRightClick(t,this)},moveInPanel:function(t){setTimeout(this.nodeObj.moving(t,this),this.flow.delay),setTimeout(this.selectBox.selectBoxMove(t,this),this.flow.delay),setTimeout(this.selectBox.selecting(t,this),this.flow.delay)},panelRightClick:function(t){this.flow.panelRightClick(t,this)},lineFloat:function(t,e){setTimeout(this.linesObj.float(t.target.parentNode,e,this),this.flow.delay)},lineSink:function(t,e){setTimeout(this.linesObj.sink(t.target.parentNode,this),this.flow.delay)},drawLine:function(t){return this.flow.linePath(t,this)},removeLine:function(t){this.flow.canRemoveLine&&this.linesObj.removeLine(t,this)},nodeRightClick:function(t,e){this.flow.nodeRightClick(t,e,this)}},mixins:[{components:{textList:o("VU/8")({name:"textList",props:["propData"],data:function(){return{flow:this.propData.flow,node:this.propData.node}},watch:{propData:function(){this.flow=this.propData.flow,this.node=this.propData.node}}},r,!1,function(t){o("MiKq")},"data-v-1be78064",null).exports,node:l,toolbarBtn:o("VU/8")({name:"toolbarBtn",props:["flow"],data:function(){return{}},methods:{toolBtnClick:function(t,e,o){t.event.click.call(this.flow.vue,this.flow,t,e,o)}}},a,!1,function(t){o("Kkj5")},"data-v-27db0d11",null).exports}}]},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.flowLoading,expression:"flowLoading"}],ref:"graph",staticClass:"graph",on:{contextmenu:function(t){t.preventDefault()}}},[o("toolbarBtn",{attrs:{flow:t.flow}}),t._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.flow.btnGroup.show,expression:"flow.btnGroup.show"}],staticClass:"btnGroup",style:t.flow.btnGroup.style,attrs:{title:t.flow.btnGroup.title},on:{click:function(e){t.flow.btnGroup.event(t.flow)}}},[o("i",{staticClass:"fa fa-bars",attrs:{size:"mini"}})]),t._v(" "),o("div",{staticStyle:{opacity:"0"},attrs:{id:"svg_div"+t.index}},[o("div",{domProps:{innerHTML:t._s(t.svg_div)}})]),t._v(" "),o("div",[o("svg",{ref:"svg",style:"background:"+t.flow.svgBackground,attrs:{width:t.panelObj.panelWidth,height:t.panelObj.panelHeight,viewBox:t.panelObj.viewBoxX+" "+t.panelObj.viewBoxY+" "+t.panelObj.viewBoxWidth+" "+t.panelObj.viewBoxHeight},on:{mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.selectStar(e)},mouseup:function(e){t.selectOver()},mousemove:function(e){t.moveInPanel(e)},contextmenu:function(e){e.preventDefault(),t.panelRightClick(e)}}},[o("defs",[o("marker",{attrs:{id:"arrow"+t.index,markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",fill:t.flow.line.arrow.color,viewBox:t.flow.line.arrow.size,refX:"6",refY:"6",orient:"auto"}},[o("path",{attrs:{d:t.flow.line.arrow.path,"stroke-width":t.flow.line.arrow.strokeWidth}})])]),t._v(" "),o("g",{ref:"lineContainer"},t._l(t.lines,function(e,i){return t.nodes[e[0]].visible&&t.nodes[e[1]].visible?o("g",{key:i,on:{mouseenter:function(o){t.lineFloat(o,e)},mouseout:function(o){t.lineSink(o,e)}}},[o("title",[t._v(t._s(e))]),t._v(" "),o("path",{style:"stroke:"+t.focusLinesStyle(e,"line"),attrs:{d:t.drawLine(e),fill:"none","marker-end":"url(#arrow"+t.index+")","stroke-width":t.lineWidth,"stroke-opacity":t.flow.line.opacity},on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:(e.preventDefault(),e.stopPropagation(),void t.removeLine(i)):null}}})]):t._e()})),t._v(" "),t._l(t.nodes,function(e,i){return e.visible?o("g",{key:i,ref:"node",refInFor:!0},["html"==t.flow.domType?o("foreignObject",{staticStyle:{overflow:"visible"},attrs:{x:e.x,y:e.y,width:e.width,height:e.height,draggable:"false"},on:{mousedown:function(o){o.stopPropagation(),o.preventDefault(),t.choseNode(o,e)},mouseup:function(e){e.stopPropagation(),e.preventDefault(),t.moveOver()},contextmenu:function(o){o.stopPropagation(),o.preventDefault(),t.nodeRightClick(o,e)}}},[o(t.flow.type||"node",{tag:"component",attrs:{propData:{node:e,flow:t.flow}}})],1):"svg"==t.flow.domType?o(t.flow.type,{tag:"component",attrs:{propData:{node:e,flow:t.flow}}}):t._e()],1):t._e()}),t._v(" "),o("rect",{directives:[{name:"show",rawName:"v-show",value:t.selectBox.attr.width,expression:"selectBox.attr.width"}],ref:"selectBox",attrs:{x:t.selectBox.attr.x,y:t.selectBox.attr.y,draggable:"false",width:t.selectBox.attr.width,height:t.selectBox.attr.height,fill:t.selectBox.attr.nodesId.length?t.flow.selectedFill:t.flow.selectingFill,opacity:t.selectBox.attr.nodesId.length?t.flow.selectedOpacity:t.flow.selectingOpacity,stroke:t.flow.selectBoxStroke,"stroke-width":t.flow.selectBoxStrokeWidth},on:{mousedown:[function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:(e.stopPropagation(),e.preventDefault(),void t.selectBoxMoveStart(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:(e.stopPropagation(),e.preventDefault(),void t.selectBoxRightClick(e)):null}],mouseup:function(e){t.selectBoxMoveOver()},dblclick:function(e){t.selectBoxDbClick(e)}}})],2)]),t._v(" "),o("dc-contextmenu",{attrs:{object:t.flow.contextmenu}})],1)},staticRenderFns:[]};var c=o("VU/8")(f,d,!1,function(t){o("WJMN"),o("Rf3/")},"data-v-b154943c",null);e.default=c.exports}});