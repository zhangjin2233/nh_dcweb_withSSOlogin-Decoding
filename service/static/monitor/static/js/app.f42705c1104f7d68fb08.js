webpackJsonp([19],{"+SrV":function(e,t,n){"use strict";var i,a=n("Xxa5"),o=n.n(a),r=n("exGp"),s=n.n(r),l=n("woOf"),c=n.n(l),u=n("//Fk"),d=n.n(u),h=this,f=function(e,t,n){return new d.a(function(i,a){var o={flag:e};o&&(o=c()(o,t)),VUE.$reqGet(DCURL.url,o).then(function(e){e?(n||VUE.$successMessage("操作成功"),i(e)):a()})})},p=function(e,t){var n=e.currentNode;VUE.$prompt("请输入文件夹名字","创建文件夹",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var a=i.value;a&&VUE.$reqGet(DCURL.url,{flag:DCURL.flag.createFolder,label:a,parentId:n.data.id,type:t}).then(function(t){t&&(VUE.$successMessage("创建成功"),e.refresh())})})},m=function(e){var t=e.currentNode;VUE.$confirm("此操作将永久删除该文件夹, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){VUE.$reqGet(DCURL.url,{flag:DCURL.flag.deleteFolder,id:t.data.id}).then(function(t){t&&(VUE.$successMessage("删除成功！"),e.refresh())})})},g=function(e,t){var n=new dc.Tree({url:DCURL.url,key:"id",params:{flag:DCURL.flag.getNode,folderType:e,id:t.currentNode.data.id},height:"220px",lazy:!1,expandAll:!0,initData:function(e){t.setIcon(e)}}),i=new dc.Dialog({title:"移动节点",width:"400px",selectType:[e],component:"dc-tree",data:{object:n},hasBtn:!0,btnGroup:[{text:"确定",type:"primary",click:function(){var e=n.nodeSelection[0];e&&VUE.$reqGet(DCURL.url,{flag:DCURL.flag.moveNode,parentId:e.id,id:t.currentNode.data.id}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),t.refresh())})}},{text:"取消",click:function(){VUE.$closeDialog()}}]});VUE.$openDialog(i)},v=function(e,t,n,i){var a=new dc.Dialog({title:e,width:"600px",component:"changeRadio",hasBtn:!0,btnGroup:[{text:"确定",type:"primary",size:"mini",data:{type:"queue"},click:function(e,t){i(e,t)}},{text:"取消",size:"mini",click:function(){VUE.$closeDialog()}}],data:{row:n,type:t}});VUE.$openDialog(a)},b=(i=s()(o.a.mark(function e(t,n,i){var a,r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:DCURL.url;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=function(e){var a={};return n.length>0&&n.forEach(function(n){if(n.includes("-")){var i=n.split("-");a[i[0]]=t[e][i[1]]}else a[n]=t[e][n]}),i&&(a=c()(a,i)),new d.a(function(e,t){VUE.$reqGet(s,a).then(function(n){n?e():t()})})},r=0;case 3:if(!(r<t.length)){e.next=9;break}return e.next=6,a(r);case 6:r++,e.next=3;break;case 9:return e.abrupt("return",new d.a(function(e,t){e()}));case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}},e,h,[[0,,10,12]])})),function(e,t,n){return i.apply(this,arguments)}),w=function(e,t){VUE.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){VUE.$reqPost("UDF=WebJobMonitorMgrUDF&FUNC=getData",e).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})},y={iconList:["monitor/static/images/eflow_26.png","monitor/static/images/paper_box_empty_16.png","monitor/static/images/dcflow.png"],tabs:[{title:"状态列表",component:"status-table"},{title:"状态流图"}],pdcTab:{title:"PDC要素",component:"pdc-info"},handle:{job:[{label:"查看PDF状态",click:function(e){VUE.$router.push({path:"list",query:{jobId:e.jobId,type:"singleJob",id:e.jobId,from:"Job",hisOpTime:VUE.$store.state.opTime||VUE.$store.state.hisOpTime}})}},{label:"重置错误节点",click:function(e){f(DCURL.flag.jobResetError,{jobId:e.jobId})},multi:function(e){b(e,["jobId"],{flag:DCURL.flag.jobResetError}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})}},{label:"重置所有节点",click:function(e){VUE.$affirm("此操作将会重置该调度的所有节点，是否继续？").then(function(){f(DCURL.flag.jobResetAll,{jobId:e.jobId})})},multi:function(e){VUE.$affirm("此操作将会重置选中调度的所有节点，是否继续？").then(function(){b(e,["jobId"],{flag:DCURL.flag.jobResetAll}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"中断",click:function(e){f(DCURL.flag.jobStop,{jobId:e.jobId})},multi:function(e){VUE.$affirm("此操作将会重置选中调度的所有节点，是否继续？").then(function(){b(e,["jobId"],{flag:DCURL.flag.jobStop}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"启用",click:function(e){VUE.$affirm("此操作将会启用选中的调度，是否继续？").then(function(){f(DCURL.flag.jobStart,{jobId:e.jobId})})},multi:function(e){VUE.$affirm("此操作将会启用选中的调度，是否继续？").then(function(){b(e,["jobId"],{flag:DCURL.flag.jobStart}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"激活",click:function(e){VUE.$affirm("此操作将会改变该调度的状态，是否继续？").then(function(){f(DCURL.flag.jobActive,{jobId:e.jobId}).then(function(){VUE.$emitEvent("refreshTable"),VUE.$emitEvent("refreshTree")})})},multi:function(e){VUE.$affirm("此操作将会改变选中调度的状态，是否继续？").then(function(){b(e,["jobId"],{flag:DCURL.flag.jobActive}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"),VUE.$emitEvent("refreshTree")})})}},{label:"挂起",click:function(e){VUE.$affirm("此操作将会改变该调度的状态，是否继续？").then(function(){f(DCURL.flag.jobSuspend,{jobId:e.jobId}).then(function(){VUE.$emitEvent("refreshTable"),VUE.$emitEvent("refreshTree")})})},multi:function(e){VUE.$affirm("此操作将会改变选中调度的状态，是否继续？").then(function(){b(e,["jobId"],{flag:DCURL.flag.jobSuspend}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"),VUE.$emitEvent("refreshTree")})})}}],pdf:[{label:"查看PDC状态",click:function(e){VUE.$router.push({path:"list",query:{jobId:e.jobId,type:"singlePDF",id:e.pdfId,hisOpTime:VUE.$store.state.opTime||VUE.$store.state.hisOpTime,from:VUE.$route.query.type,single:"Job"!==VUE.$route.query.from}})}},{label:"重置错误节点",click:function(e){f(DCURL.flag.resetPDFError,{jobId:e.jobId,pdfName:e.pdfName})},multi:function(e){b(e,["jobId","pdfName"],{flag:DCURL.flag.resetPDFError}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})}},{label:"重置所有节点",click:function(e){VUE.$affirm("此操作将会重置该调度的所有节点，是否继续？").then(function(){f(DCURL.flag.resetPDFAll,{jobId:e.jobId,pdfName:e.pdfName})})},multi:function(e){VUE.$affirm("此操作将会重置选中调度的所有节点，是否继续？").then(function(){b(e,["jobId","pdfName"],{flag:DCURL.flag.resetPDFAll}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"指定代理机",click:function(e){v("指定代理机","agent",e,function(t,n){""!==n.value?VUE.$reqGet("UDF=WebJobMgrUDF&FUNC=changePDFAgent",{jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId,pdfName:e.pdfName,agentName:n.value}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable"))}):VUE.$closeDialog()})},multi:function(e){v("指定代理机","agent",e[0],function(t,n){""!==n.value?b(e,["jobId","pdfName"],{agentName:n.value},"UDF=WebJobMgrUDF&FUNC=changePDFAgent").then(function(){VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable")}):VUE.$closeDialog()})}},{label:"重跑PDF",click:function(e,t){w({flag:"根据PDF构建历史分支",data:[{jobName:e.jobName,pdfName:e.pdfName}],hisOpTime:"singleJob"===VUE.$route.query.type?VUE.$store.state.opTime:e.hisOpTime},"此操作将构建历史分支，并重跑该PDF, 是否继续?")},multi:function(e,t){var n=e.map(function(e){return{jobName:e.jobName,pdfName:e.pdfName}});w({flag:"根据PDF构建历史分支",data:n,hisOpTime:VUE.$store.state.opTime},"此操作将对所选的节点构建历史分支，并重跑PDF, 是否继续?")}}],pdc:[{label:"查看",click:function(e){VUE.indexTabs.from="table",y.pdcTab.data={name:e.Name},VUE.indexTabs.addTab(y.pdcTab)}},{label:"移除调度点",click:function(e){VUE.$affirm("此操作将移除选中的PDC，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId,pdcName:e.Name,flag:"删除调度点"}).then(function(e){e&&(VUE.$successMessage("删除成功"),VUE.$emitEvent("refreshTable"))})})},multi:function(e){VUE.$affirm("此操作将删除选中的PDC，是否继续？").then(function(){b(e,["jobId","pdcName-Name"],{flag:"删除调度点"}).then(function(){VUE.$successMessage("删除成功"),VUE.$emitEvent("refreshTable")})})}},{label:"激活",click:function(e){VUE.$affirm("此操作将会改变该调度的状态，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:e.Name,flag:"激活挂起调度点",isactive:!0,jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})},multi:function(e){VUE.$affirm("此操作将会改变选中调度的状态，是否继续？").then(function(){b(e,["jobId","pdcName-Name"],{flag:"激活挂起调度点",isactive:!0}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"挂起",click:function(e){VUE.$affirm("此操作将会改变该调度的状态，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:e.Name,flag:"激活挂起调度点",isactive:!1,jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})},multi:function(e){VUE.$affirm("此操作将会改变选中调度的状态，是否继续？").then(function(){b(e,["jobId","pdcName-Name"],{flag:"激活挂起调度点",isactive:!1}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"重置运行状态",click:function(e){VUE.$affirm("此操作将会重置运行状态，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:e.Name,flag:"重置调度点",jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})},multi:function(e){VUE.$affirm("此操作将会重置运行状态，是否继续？").then(function(){b(e,["jobId","pdcName-Name"],{flag:"重置调度点"}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"重置影响节点",click:function(e){VUE.$affirm("此操作将会重置影响节点，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:e.Name,flag:"重置影响节点",jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})},multi:function(e){VUE.$affirm("此操作将会重置影响，是否继续？").then(function(){b(e,["jobId","pdcName-Name"],{flag:"重置影响节点"}).then(function(){VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable")})})}},{label:"重跑影响节点(跨Job)",click:function(e){VUE.$reqGet(DCURL,{flag:"获取影响节点Job",jobId:e.jobId,pdcName:e.Name},{},!0).then(function(t){var n=t.CONTENT.data;VUE.$openDialog(new dc.Dialog({title:"重跑影响节点(跨Job)",width:"460px",component:"resetNode",hasBtn:!0,data:{jobs:n.map(function(e){return{label:e.jobName,value:e.jobName,id:e.jobId}})},btnGroup:[{text:"确定",type:"primary",size:"mini",click:function(t,n){var i=n.table.tableData;VUE.$reqPost(DCURL.url,{flag:"重跑影响节点跨Job",pdcName:e.Name,data:i}).then(function(e){e&&(VUE.$closeDialog(),e.CONTENT.msg&&VUE.$alert(e.CONTENT.msg,"信息",{confirmButtonText:"确定",callback:function(e){}}))})}},{text:"取消",size:"mini",click:function(){VUE.$closeDialog()}}]}))})}},{label:"切换调度队列",click:function(e){v("切换调度队列","queue",e,function(t,n){""!==n.value?VUE.$reqGet(DCURL.url,{jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId,pdcName:e.Name,groupPath:n.data[n.value].groupPath,queueName:n.data[n.value].queueName,flag:"切换调度点队列"}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable"))}):VUE.$closeDialog()})},multi:function(e){v("切换调度队列","queue",e[0],function(t,n){if(""!==n.value){var i=[];e.forEach(function(e){i.push(e.Name)}),VUE.$reqGet(DCURL.url,{jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e[0].jobId,pdcName:i,groupPath:n.data[n.value].groupPath,queueName:n.data[n.value].queueName,flag:"切换调度点队列"}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable"))})}else VUE.$closeDialog()})}},{label:"指定代理机",click:function(e){v("指定代理机","agent",e,function(t,n){""!==n.value?VUE.$reqGet("UDF=WebJobMgrUDF&FUNC=changePDCAgent",{jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId,pdcName:e.Name,agentName:n.value}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable"))}):VUE.$closeDialog()})},multi:function(e){v("指定代理机","agent",e[0],function(t,n){""!==n.value?b(e,["jobId","pdcName-Name"],{agentName:n.value},"UDF=WebJobMgrUDF&FUNC=changePDCAgent").then(function(){VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable")}):VUE.$closeDialog()})}},{label:"设置优先级",click:function(e){VUE.$prompt("设置优先级（1-100）","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var n=t.value;n&&VUE.$reqGet(DCURL.url,{jobId:VUE.$route.query.jobId?VUE.$route.query.jobId:e.jobId,pdcName:e.Name,priority:parseInt(n),flag:"切换调度点优先级"}).then(function(e){e&&(VUE.$successMessage("设置成功"),VUE.$emitEvent("refreshTable"))})})},multi:function(e){VUE.$prompt("设置优先级（1-100）","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var n=t.value;n&&b(e,["jobId","pdcName-Name"],{priority:parseInt(n),flag:"切换调度点优先级"}).then(function(){VUE.$successMessage("设置成功"),VUE.$emitEvent("refreshTable")})})}},{label:"查看历史记录",click:function(e){VUE.$openDialog(new dc.Dialog({top:"40px",width:"1000px",component:"historyTable",data:{url:"UDF=WebJobMgrUDF&FUNC=getPDCRunHistories",params:{jobId:e.jobId,pdcName:e.Name}}}))}},{label:"重跑节点(根据单个节点)",click:function(e,t){w({flag:"根据PDC构建历史分支",data:[{jobId:e.jobId,name:e.Name}],type:"SINGLE",hisOpTime:"singlePDF"===VUE.$route.query.type?VUE.$store.state.opTime:e.OpTime},"此操作将根据单个节点构建历史分支，并重跑该节点, 是否继续?")},multi:function(e,t){var n=e.map(function(e){return{jobId:e.jobId,name:e.Name}});w({flag:"根据PDC构建历史分支",data:n,type:"SINGLE",hisOpTime:"singlePDF"===VUE.$route.query.type?VUE.$store.state.opTime:row.OpTime},"此操作所选的节点将根据单个节点构建历史分支，并重跑该节点, 是否继续?")}},{label:"重跑节点(根据影响节点)",click:function(e,t){w({flag:"根据PDC构建历史分支",data:[{jobId:e.jobId,name:e.Name}],type:"SOURCE",hisOpTime:"singlePDF"===VUE.$route.query.type?VUE.$store.state.opTime:e.OpTime},"此操作将根据影响节点构建历史分支，并重跑该节点, 是否继续?")},multi:function(e,t){var n=e.map(function(e){return{jobId:e.jobId,name:e.Name}});w({flag:"根据PDC构建历史分支",data:n,type:"TARGET",hisOpTime:"singlePDF"===VUE.$route.query.type?VUE.$store.state.opTime:row.OpTime},"此操作所选的节点将根据影响节点构建历史分支，并重跑该节点, 是否继续?")}},{label:"重跑节点(根据依赖节点)",click:function(e,t){w({flag:"根据PDC构建历史分支",data:[{jobId:e.jobId,name:e.Name}],type:"TARGET",hisOpTime:"singlePDF"===VUE.$route.query.type?VUE.$store.state.opTime:e.OpTime},"此操作将根据依赖节点构建历史分支，并重跑该节点, 是否继续?")},multi:function(e,t){var n=e.map(function(e){return{jobId:e.jobId,name:e.Name}});w({flag:"根据PDC构建历史分支",data:n,type:"SOURCE",hisOpTime:"singlePDF"===VUE.$route.query.type?VUE.$store.state.opTime:row.OpTime},"此操作所选的节点将根据依赖节点构建历史分支，并重跑该节点, 是否继续?")}}]},statusColor:{"Checking Condition":"#ff66a3-暂待处理","Ignore Fail":"#ffa64d-忽略错误",Pooling:"#b3c6ff-排队中","Run Failed":"#ff3333-运行失败","Run OK":"#00cc00-运行成功",Running:"#ffff1a-正在运行",Suspend:"#66c2ff-挂起",Terminated:"#ff80ff-强行终止",Total:"#ccc-全部",Waiting:"#999-等待中"},treeMenus:{job:[{text:"创建文件夹",icon:"fa fa-plus",iconColor:"green",click:function(e){p(e,"PDFFolder")}},{text:"查看JOB信息",icon:"fa fa-eye",iconColor:"blue",click:function(e){var t=e.currentNode;VUE.$reqGet("UDF=WebJobMgrUDF&FUNC=getJob",{jobId:t.data.link}).then(function(e){e&&VUE.$openDialog(new dc.Dialog({title:"查看Job",width:"800px",top:"20px",component:"jobForm",data:{data:e.CONTENT}}))})}},{text:"重置错误节点",icon:"fa fa-reply",iconColor:"blue",click:function(e){f(DCURL.flag.jobResetError,{jobId:e.currentNode.data.link}).then(function(){e.contextmenu.hideMenu()})}},{text:"重置所有节点",icon:"fa fa-reply-all",iconColor:"blue",click:function(e){f(DCURL.flag.jobResetAll,{jobId:e.currentNode.data.link})}},{text:"中断",icon:"fa fa-stop",iconColor:"red",click:function(e){f(DCURL.flag.jobStop,{jobId:e.currentNode.data.link})}},{text:"启用",icon:"fa fa-play",iconColor:"green",click:function(e){f(DCURL.flag.jobStart,{jobId:e.currentNode.data.link})}},{text:"激活",icon:"fa fa-play-circle",iconColor:"green",show:function(e){return!e.currentNode.data.active},click:function(e){f(DCURL.flag.jobActive,{jobId:e.currentNode.data.link}).then(function(){e.refresh(),e.contextmenu.hideMenu()})}},{text:"挂起",icon:"fa fa-pause-circle",iconColor:"red",show:function(e){return e.currentNode.data.active},click:function(e){f("调度挂起",{jobId:e.currentNode.data.link}).then(function(){e.refresh(),e.contextmenu.hideMenu()})}},{text:"移动到文件夹",icon:"fa fa-folder-open-o",iconColor:"blue",click:function(e){g("JobFolder",e)}}],pdf:[{text:"移动到文件夹",icon:"fa fa-folder-open-o",iconColor:"blue",click:function(e){g("PDFFolder",e)}}],pdffolder:[{text:"创建文件夹",icon:"fa fa-plus",iconColor:"green",click:function(e){p(e,"PDFFolder")}},{text:"删除文件夹",icon:"fa fa-close",iconColor:"red",click:function(e){m(e)}},{text:"重命名",icon:"fa fa-edit",iconColor:"blue",click:function(e){var t=e.currentNode.data;VUE.$prompt("请输入文件夹名字","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;VUE.$reqGet(DCURL.url,{flag:"修改文件夹名称",id:t.id,label:n}).then(function(e){e&&(VUE.$closeDialog(),t.label=n)})}).catch(function(){})}}],jobfolder:[{text:"创建文件夹",icon:"fa fa-plus",iconColor:"green",click:function(e){p(e,"JobFolder")}},{text:"删除文件夹",icon:"fa fa-close",iconColor:"red",click:function(e){m(e)}},{text:"重命名",icon:"fa fa-edit",iconColor:"blue",click:function(e){var t=e.currentNode.data;VUE.$prompt("请输入文件夹名字","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;VUE.$reqGet(DCURL.url,{flag:"修改文件夹名称",id:t.id,label:n}).then(function(e){e&&(VUE.$closeDialog(),t.label=n)})}).catch(function(){})}}],"作业监控":[{text:"刷新",icon:"fa fa-refresh",iconColor:"green",click:function(e){e.refresh(),e.hideMenu()}},{text:"根据名称顺序排序",icon:"fa fa-sort-alpha-asc",iconColor:"green",click:function(e){e.refresh({orderKey:0}),e.hideMenu()}},{text:"根据名称倒序排序",icon:"fa fa-sort-alpha-desc",iconColor:"blue",click:function(e){e.refresh({orderKey:1}),e.hideMenu()}},{text:"重点任务",icon:"fa fa-star",iconColor:"red",click:function(e){VUE.$router.push({path:"/list",query:{type:"importance"}}),e.hideMenu()}},{text:"创建文件夹",icon:"fa fa-plus",iconColor:"green",click:function(e){p(e,"JobFolder")}}]},searshConfig:{job:{structure:[{name:"jobName",label:"名称",type:"string"},{name:"Status",label:"状态",type:"singleEnum",option:[{label:"所有",value:""},{label:"激活",value:!0},{label:"挂起",value:!1}]},{name:"hisOpTime",label:"数据时间",type:"datetime"}],data:{jobName:"",OpTime:"",hisOpTime:"",Status:""}},pdf:{structure:[{name:"pdfName",label:"名称",type:"string",change:function(e,t){e.refresh()}},{name:"status",label:"状态",type:"singleEnum",option:[{label:"所有",value:""},{label:"排队中",value:"排队中"},{label:"暂待处理",value:"暂待处理"},{label:"正在运行",value:"正在运行"},{label:"挂起",value:"挂起"},{label:"运行成功",value:"运行成功"},{label:"运行失败",value:"运行失败"},{label:"忽略错误",value:"忽略错误"},{label:"强行终止",value:"强行终止"},{label:"等待中",value:"等待中"}]},{name:"hisOpTime",label:"数据时间",type:"datetime"}],data:{pdfName:"",status:""}},pdc:{structure:[{name:"Name",label:"名称",type:"string"},{name:"Status",label:"状态",type:"singleEnum",option:[{label:"所有",value:""},{label:"排队中",value:"排队中"},{label:"暂待处理",value:"暂待处理"},{label:"正在运行",value:"正在运行"},{label:"挂起",value:"挂起"},{label:"运行成功",value:"运行成功"},{label:"运行失败",value:"运行失败"},{label:"忽略错误",value:"忽略错误"},{label:"强行终止",value:"强行终止"},{label:"等待中",value:"等待中"}]},{name:"cdcName",label:"作业类型",type:"singleEnum",option:[]},{name:"hisOpTime",label:"数据时间",type:"datetime"}],data:{jobName:"",Name:"",queue:"",Status:"","Start Time":"","End Time":"",Agent:""}},singlePDF:{structure:[{name:"Name",label:"名称",type:"string"},{name:"Status",label:"状态",type:"singleEnum",option:[{label:"所有",value:""},{label:"排队中",value:"排队中"},{label:"暂待处理",value:"暂待处理"},{label:"正在运行",value:"正在运行"},{label:"挂起",value:"挂起"},{label:"运行成功",value:"运行成功"},{label:"运行失败",value:"运行失败"},{label:"忽略错误",value:"忽略错误"},{label:"强行终止",value:"强行终止"},{label:"等待中",value:"等待中"}]},{name:"cdcName",label:"作业类型",type:"singleEnum",option:[]},{name:"hisOpTime",label:"数据时间",type:"timepickerselect",option:[],elementType:"timepickerselect",change:function(e){e.refresh()}}],data:{jobName:"",Name:"",queue:"",Status:"","Start Time":"","End Time":"",Agent:""}},singleJob:{structure:[{name:"pdfName",label:"名称",type:"string",change:function(e,t){e.refresh()}},{name:"status",label:"状态",type:"singleEnum",option:[{label:"所有",value:""},{label:"排队中",value:"排队中"},{label:"暂待处理",value:"暂待处理"},{label:"正在运行",value:"正在运行"},{label:"挂起",value:"挂起"},{label:"运行成功",value:"运行成功"},{label:"运行失败",value:"运行失败"},{label:"忽略错误",value:"忽略错误"},{label:"强行终止",value:"强行终止"},{label:"等待中",value:"等待中"}]},{name:"hisOpTime",label:"数据时间",type:"timepickerselect",option:[],elementType:"timepickerselect",change:function(e){e.refresh()}}],data:{pdfName:"",status:""}}},colsWidth:{status:"84px",Status:"70px",AppOptime:"134px","Checking Condition":"94px","Ignore Fail":"94px",OpTime:"134px",Pooling:"82px","Run Failed":"70px","Run OK":"94px",Running:"94px",Suspend:"70px",Terminated:"94px",Total:"",Waiting:"82px",jobName:"114px",pdfName:"114px",Agent:"114px","End Time":"134px",Msg:"70px",Name:"114px",Priority:"94px","Start Time":"134px",costTime:"",queue:"",resourcePool:"150px"}};for(var N in y.searshConfig){y.searshConfig[N].structure.forEach(function(e){e.change=function(e,t){e.refresh()}})}y.changeItem=v,t.a=y},"+j5p":function(e,t,n){"use strict";t.a=function(e,t){t.appendChild(e)}},"+vo4":function(e,t,n){"use strict";function i(e,t){return t.splice(e--,1),e}function a(e,t){return e==t}var o=function e(t,n,o){for(var r,s=[],l=0;l<o.length;l++)if(a(o[l][0],n)){if(a(o[l][1],t))return!0;r=o[l],s.push(r),l=i(l,o)}if(0!=s.length)for(var c=0;c<s.length;c++)if(e(t,n=s[c][1],o))return!0;return!1},r=n("9eRc");var s=function(e,t){for(var n=!1,i=0;i<t.length;i++)if(t[i][0]==e[0]&&t[i][1]==e[1]){n=!0;break}return n},l={NULL:-1,LEFT:1,RIGHT:0};function c(e,t,n,i){if(!s([e.id,t.id],n)){n.push([e.id,t.id]);var a=n.slice(0);!function(e){for(var t=e.length-1;t>=0;t--)e[t][0]==e[t][1]&&e.splice(t,1)}(a),o(e.id,t.id,a)?n.pop():Object(r.a)(n,i)}}t.a={moveX:function(e,t,n){var i=n.flow.moveSpace;switch(t){case l.RIGHT:e.x-=i;break;case l.LEFT:e.x+=i}},contactNode:function(e,t,n,i){var a=e,o=t.node;t.flag===l.RIGHT?c(a,o,n,i):c(o,a,n,i)}}},0:function(e,t,n){n("j1ja"),e.exports=n("NHnr")},"1sUA":function(e,t,n){"use strict";t.a=function(e,t){for(var n={member:[],index:-1},i=0;i<t.length;i++)if(-1!=t[i].indexOf(e)){n.index=i,n.member=t[i].slice(0);break}return n}},"5FHf":function(e,t){},"5W1q":function(e,t){},"7Dyr":function(e,t){},"9eRc":function(e,t,n){"use strict";var i=n("mvHQ"),a=n.n(i);function o(e,t,n){for(var i=0;i<t;i++)-1!=n.indexOf(e[i][0])&&-1==n.indexOf(e[i][1])?e.push([n[0],e[i][1]]):-1==n.indexOf(e[i][0])&&-1!=n.indexOf(e[i][1])&&e.push([e[i][0],n[0]])}t.a=function(e,t){var n=function(e,t,n){var i=e.length;if(void 0===n)for(var a=0;a<t.length;a++)o(e,i,t[a]);else o(e,i,t[n]);return e.length-i}(e,t);!function(e,t){var n=e.slice(0),i={},o=[];t=t||n.length;for(var r=n.length-t;r<n.length;r++)i[a()(n[r])]||(i[a()(n[r])]=!0,o.push(n[r]));e.splice.apply(e,[n.length-t,n.length].concat(o))}(e,n+=function(e,t,n){for(var i=e.length,a=0;a<t.length;a++)for(var o=i-1;o>=i-n;o--)-1!=t[a].indexOf(e[o][0])&&-1==t[a].indexOf(e[o][1])?e.push([t[a][0],e[o][1]]):-1==t[a].indexOf(e[o][0])&&-1!=t[a].indexOf(e[o][1])&&e.push([e[o][0],t[a][0]]);return e.length-i}(e,t,n))}},A7XR:function(e,t){},Bvl3:function(e,t){},D9Ar:function(e,t,n){"use strict";var i=n("9eRc"),a=n("1sUA"),o=n("gmQG");t.a=function(e,t,n,r,s,l,c){var u={};u[e.flow.req.intoView.data.intoGroup]=[t],u[e.flow.req.intoView.data.viewName]=r,u[e.flow.req.intoView.data.flowName]=e.flow.flowName,e.flowLoading=!0,e.$reqGet(e.flow.req.intoView.url,u).then(function(r){if(r){!function(e,t){for(var n=t.length-1;n>=0;n--)t[n]&&-1!=t[n].indexOf(e)&&Object(o.a)(t,n)}(n,l);var u=Object(a.a)(n,c);!function(e,t,n){t[n].push(e)}(t,c,u.index),Object(i.a)(l,c,u.index),s[t].visible=!1,e.flow.saveFlow(e)}}).catch(function(t){e.flowLoading=!1})}},ECkp:function(e,t){},"Emh/":function(e,t,n){"use strict";function i(e,t){e[t].visible=!e[t].visible}t.a=function(e,t){for(var n=0;n<t.length;n++)i(e,t[n])}},FFYU:function(e,t){},G8Yg:function(e,t){},GERO:function(e,t){},"Gl+R":function(e,t){},GlsT:function(e,t){},Hpyp:function(e,t,n){"use strict";var i=n("gmQG");function a(e,t){for(var n=e[0],i=e[1],a=-1,o=-1,r=0;r<t.length&&(-1!=t[r].indexOf(n)&&(a=r),-1!=t[r].indexOf(i)&&(o=r),-1==a||-1==o);r++);return{start:a,target:o}}function o(e,t,n,i){for(var a=t[0],o=t[1],r=i.start,s=i.target,l=!0,c=!0,u=0;u<e.length&&(e[u][1]==o&&e[u][0]!=a&&-1!=r&&n[r].indexOf(e[u][0])>0&&(l=!1),e[u][0]==a&&e[u][1]!=o&&-1!=s&&n[s].indexOf(e[u][1])>0&&(c=!1),l||c);u++);return{start:l,target:c}}function r(e,t,n,i,a,o,r){l(e,t),function(e,t,n,i,a,o){for(var r=e.length-1;r>=0;r--)e[r]&&n.indexOf(e[r][a])>0&&e[r][o]==i&&s(r,e,t)}(e,n,i,a,o,r)}function s(e,t,n){var i=a(t[e],n),r=i.start,s=i.target;r==s?l(t,e):-1!=r&&-1!=s?function(e,t,n){var i=t[e][0],r=t[e][1],s=a(t[e],n),u=s.start,h=s.target,f=o(t,t[e],n,s),p=f.start,m=f.target;p&&m?function(e,t,n,i,a){for(var o=e.length-1;o>=0;o--)!e[o]||e[o][0]!=t&&e[o][0]!=n||e[o][1]!=i&&e[o][1]!=a||l(e,o)}(t,i,n[u][0],r,n[h][0]):!p&&m?d(t,i,r,n[h][0]):p&&!m?c(t,i,r,n[u][0]):l(t,e)}(e,t,n):-1!=r?function(e,t,n){var i=t[e][0],r=t[e][1],s=a(t[e],n),u=s.start;o(t,t[e],n,s).start?c(t,i,r,n[u][0]):l(t,e)}(e,t,n):function(e,t,n){var i=t[e][0],r=t[e][1],s=a(t[e],n),c=s.target;o(t,t[e],n,s).target?d(t,i,r,n[c][0]):l(t,e)}(e,t,n)}function l(e,t){Object(i.a)(e,t)}function c(e,t,n,i){u(e,t,i,0,n,1)}function u(e,t,n,i,a,o){for(var r=e.length-1;r>=0;r--)!e[r]||e[r][i]!=t&&e[r][i]!=n||e[r][o]!=a||l(e,r)}function d(e,t,n,i){u(e,n,i,1,t,0)}t.a=function(e,t,n,i){var o=n[e][0],c=n[e][1],u=a(n[e],i);t[o].viewNodeFlag&&t[c].viewNodeFlag?function(e,t,n,i){for(var a=i.start,o=i.target,r=t.length-1;r>=0;r--)t[r]&&-1!=n[a].indexOf(t[r][0])&&-1!=n[o].indexOf(t[r][1])&&l(t,r)}(0,n,i,u):t[o].viewNodeFlag&&!t[c].viewNodeFlag?function(e,t,n){var i=a(t[e],n).start,o=t[e][1];r(t,e,n,n[i],o,0,1)}(e,n,i):!t[o].viewNodeFlag&&t[c].viewNodeFlag?function(e,t,n){var i=a(t[e],n).target,o=t[e][0];r(t,e,n,n[i],o,1,0)}(e,n,i):s(e,n,i)}},IDZW:function(e,t){},LDvL:function(e,t,n){"use strict";t.a=function(e,t,n){var i=t.viewBoxX,a=t.viewBoxY,o=t.ratioX(),r=t.ratioY(),s=n.$refs.graph,l=s.getBoundingClientRect();return{x:(e.clientX+s.scrollLeft-l.left)*o+i,y:(e.clientY+s.scrollTop-l.top)*r+a}}},LDyy:function(e,t){},Luci:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={props:["isDialog"],data:function(){return{loginForm:{name:"",password:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},title:pageConfig.loginTitle}},computed:{isLogin:function(){return this.$store.state.isLogin}},created:function(){this.$nextTick(function(){})},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var n="action=security.login&NAME="+t.loginForm.name+"&PASSWORD="+t.loginForm.password;t.$reqGet(n).then(function(e){e.ERR_MSG?t.$alert(e.ERR_MSG,"登录信息",{confirmButtonText:"确定"}):(localStorage.setItem("user",t.loginForm.name),"/login"!==t.$route.path?("get"===t.$store.state.reqMethodToLogin&&(t.$store.commit("loginToggle",!0,""),location.reload()),t.$store.commit("loginToggle",!0,"")):t.$router.push("/"))}).catch(function(e){t.$alert("用户名或密码错误","登录信息",{confirmButtonText:"确定"})})})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLogin&&e.isDialog?e._e():n("div",{class:{mask:e.isDialog}},[n("el-container",[n("el-main",[n("el-form",{ref:"loginForm",staticClass:"demo-loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"100px"}},[n("h1",[e._v(e._s(e.title))]),e._v(" "),n("h3",[e._v("用户登录")]),e._v(" "),n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name","string"==typeof t?t.trim():t)},expression:"loginForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password","auto-complete":"new-password"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"==typeof t?t.trim():t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("登录")])],1)],1)],1),e._v(" "),n("div",{staticClass:"background-container"})],1)])},staticRenderFns:[]};var o=n("VU/8")(i,a,!1,function(e){n("SpI0")},"data-v-18fd591c",null);t.default=o.exports},MQE0:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("j1ja");var i=n("7+uW"),a={name:"App",data:function(){return{}},methods:{},created:function(){var e=this;window.resize,this.$nextTick(function(){e.$store.commit("updateBodySize")})},watch:{$route:function(){VUE.$emitEvent("flowRunToggle",!1),VUE.$cancelEvent("flowRunToggle"),VUE.$cancelEvent("refreshFlow")}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view"),this._v(" "),t("dc-module")],1)},staticRenderFns:[]};var r=n("VU/8")(a,o,!1,function(e){n("WzY7")},null,null).exports,s=n("/ocq"),l={data:function(){return{table:new dc.Table,layout:new dc.Layout}},created:function(){this.layout.components={l11:{component:"el-button",props:{type:"primary"},html:"test",style:{color:"green"}},l12:{component:"el-button",props:{type:"primary"},html:"test",style:{color:"green"}}},this.layout.contents={all:{style:{border:"1px solid #000"}},l12:{style:{border:"none"}}},this.table.set("hasBtn",!0).set("btnGroup",[{text:"fff"},{text:"ddd"}]).add("btnGroup",{text:"bbb"},0).delete("btnGroup",function(e,t){if("ddd"===e.text)return!0}).update("btnGroup",function(e,t){if("fff"===e.text)return{text:"nnn"}}),this.table.get("btnGroup"),this.$nextTick(function(){})},methods:{}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._v("\n    11111\n   "),t("dc-table",{attrs:{object:this.table}}),this._v(" "),t("dc-layout",{attrs:{object:this.layout}})],1)},staticRenderFns:[]};n("VU/8")(l,c,!1,function(e){n("svcw")},"data-v-4b144b37",null).exports;var u=n("pFYg"),d=n.n(u),h=window.pageConfig,f={title:h.tabTitle,icon:h.tabIcon,backgroundColor:h.backgroundColor,loginTitle:h.titleTitle,logo:{src:h.logoIcon,width:h.iconWidth,height:h.iconHeight,title:h.logoText,color:h.textColor,fontSize:h.textFontSize,fontFamily:h.textFontFamily,borderColor:"#ccc",margin:h.iconTop+" "+h.iconRight+" 0 "+h.iconLeft},menu:{color:"#000",fontSize:"18px",activeColor:"#ffb366",span:"18px",data:[{text:"数据统计",router:"statistics"},{text:"调度状态",router:"list"}]}},p=function(e,t,n){var i=document.createElement(e);if(n&&"object"===(void 0===n?"undefined":d()(n)))for(var a in n)i.setAtrribute?i.setAtrribute(a,n[a]):i[a]=n[a];t.append(i)},m=document.getElementsByTagName("head")[0];p("title",m,{innerText:f.title}),p("link",m,{href:f.icon,rel:"shortcut icon"});var g=f,v={components:{Login:n("Luci").default},props:[],data:function(){return{logo:g.logo,menu:g.menu,currentIndex:0,hoverIndex:-1,now:new Date}},created:function(){var e=this;window.onunload=function(){sessionStorage.setItem("currentIndex",e.currentIndex),localStorage.setItem("is\b\bLogin",e.$store.state.isLogin)};var t="true"===localStorage.getItem("is\b\bLogin");this.$store.commit("loginToggle",t),setInterval(function(){e.now=new Date},1e3),sessionStorage.getItem("currentIndex")&&(this.currentIndex=sessionStorage.getItem("currentIndex"))},watch:{},computed:{background:function(){return"background: linear-gradient("+g.backgroundColor.join(",")+")"},time:function(){var e=this.now.getFullYear(),t=this.now.getMonth(),n=this.now.getDate(),i=this.now.getHours(),a=this.now.getMinutes(),o=this.now.getSeconds(),r=this.now.getDay();return e+"年"+(t+1)+"月"+n+"日 "+i+":"+(a>9?a:"0"+a)+":"+(o>9?o:"0"+o)+" "+this.getDay(r)}},methods:{toRoute:function(e,t){this.currentIndex=t,this.$router.push(e.router)},getDay:function(e){switch(e){case 1:return"星期一";case 2:return"星期二";case 3:return"星期三";case 4:return"星期四";case 5:return"星期五";case 6:return"星期六";case 7:return"星期日"}},changePassword:function(){this.$openDialog({title:"修改密码",width:"420px",component:"change-password"})},logout:function(){this.$router.push("/login")}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("header",{style:"border-color: "+e.logo.borderColor+";"+e.background},[n("div",{staticClass:"logo-icon"},[e.logo.src?n("img",{style:"width:"+e.logo.width+";height:"+e.logo.height+"; margin: "+e.logo.margin,attrs:{src:e.logo.src,alt:""}}):e._e()]),e._v(" "),n("div",{staticClass:"logo-info"},[n("span",{style:"color: "+e.logo.color+"; font-size: "+e.logo.fontSize+"; font-family: "+e.logo.fontFamily+";"},[e._v(e._s(e.logo.title))]),e._v(" "),n("ul",{staticClass:"menu"},e._l(e.menu.data,function(t,i){return n("li",{key:i,style:i!=e.menu.data.length-1?"margin-right:"+e.menu.span:""},[n("span",{style:"color:"+(i==e.currentIndex||i==e.hoverIndex?e.menu.activeColor:e.menu.color)+";border-bottom-color:"+(i==e.currentIndex?e.menu.activeColor:"rgba(0,0,0,0)"),on:{click:function(n){e.toRoute(t,i)},mouseover:function(t){e.hoverIndex=i},mouseout:function(t){e.hoverIndex=-1}}},[e._v(e._s(t.text))])])}))]),e._v(" "),n("div",{staticClass:"right-tips"},[e._v(e._s(e.time))]),e._v(" "),n("div",{staticClass:"login-out"},[n("span",{on:{click:e.logout}},[n("img",{attrs:{src:"monitor/static/images/exit.png"}}),e._v(" "),n("span",[e._v("退出登陆")])])])]),e._v(" "),n("router-view",{staticClass:"main-content"}),e._v(" "),n("Login",{attrs:{isDialog:!0}})],1)},staticRenderFns:[]};var w=n("VU/8")(v,b,!1,function(e){n("FFYU")},"data-v-83cdbd90",null).exports;i.default.use(s.a);var y=new s.a({routes:[{name:"index",path:"/",redirect:"statistics",component:w,children:[{name:"statistics",path:"statistics",component:function(){return n.e(0).then(n.bind(null,"VdIR"))}},{name:"list",path:"list",component:function(){return n.e(9).then(n.bind(null,"yOkc"))}},{name:"system",path:"system",component:function(){return n.e(13).then(n.bind(null,"ljS7"))}}]},{name:"login",path:"/login",component:function(){return new Promise(function(e){e()}).then(n.bind(null,"Luci"))}}]}),N=n("zL8q"),D=n.n(N),T=(n("tvR6"),n("NYxO"));i.default.use(T.a);var x=new T.a.Store({state:{tableWidth:"100%",bodyHeight:"",bodyWidth:"",isLogin:!1,reqMethodToLogin:"",loading:null,opTime:"",hisOpTime:""},mutations:{updateTableWidth:function(e,t){e.tableWidth=t},updateBodySize:function(e){var t=document.documentElement.clientHeight;e.bodyHeight=t;var n=document.documentElement.clientWidth;e.bodyWidth=n},loginToggle:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";e.isLogin=t,e.reqMethodToLogin=n},showLoading:function(e){e.loading=N.Loading.service({fullscreen:!0})},closeLoading:function(e){e.loading.close()},setOpTime:function(e,t){e.opTime=t},setHisOpTime:function(e,t){e.hisOpTime=t}}}),E=n("dXij"),k=n.n(E),C=n("//Fk"),F=n.n(C),S=n("woOf"),_=n.n(S),U=n("Zrlr"),O=n.n(U),I=n("wxAW"),$=n.n(I),L={btnGroup:[{title:"刷新",icon:""}],btnMargin:0,btnGroupMargin:10,paginationMargin:20,btnSize:"mini",currentSize:15,pageSizes:[15,30,60,100],hasSearch:!1,hasPage:!0,hasBottomBtn:!0,hasColSelect:!1,colSelectWidth:40,border:!0,bottomBtnAlign:"right",paginationAlign:"center",sortable:!1,height:"auto",size:"small",width:"100%",searchWidth:"240px",hasSelect:!1,hiddenCols:[],align:"left"},j=function(){function e(t){if(O()(this,e),this.btnGroup=[],this.btnMargin=L.btnMargin,this.btnGroupMargin=L.btnGroupMargin,this.paginationMargin=20,this.btnSize=L.btnSize,this.pageSizes=L.pageSizes,this.total=1,this.currentSize=L.currentSize,this.currentPage=1,this.tableData=[],this.tableHead=[],this.hasBtn=!0,this.hasSearch=L.hasSearch,this.hasPage=L.hasPage,this.hasBottomBtn=L.hasBottomBtn,this.hasColSelect=L.hasColSelect,this.colSelectWidth=L.colSelectWidth,this.border=L.border,this.editable=!1,this.bottomBtnAlign=L.bottomBtnAlign,this.paginationAlign=L.paginationAlign,this.sortable=L.sortable,this.request={url:"",parmas:{},info:null},this.height=L.height,this.size=L.size,this.needRequest=!1,this.width=L.width,this.searchWidth=L.searchWidth,this.appendBottom=null,this.appendTop=null,this.selectValue="",this.selectOptions=[],this.selection=[],this.hasSelect=L.hasSelect,this.hiddenCols=L.hiddenCols,this.isHiddenCol=!0,this.colsColor=[],this.cellImages=[],this.colsWidth=[],this.interval=null,this.cellAppend=[],this.hasLoading=!1,this.align=L.align,this.filterSetting=[],this.currentRow=null,this.keyword="",this.maxHeight=L.maxHeight,this.searchPlaceholder="请输入内容",this.appendComponent="",this.customCells=[],this.selectionInit={key:"guid",value:[]},this.dateInput={value:"",placeholder:"请选择日期",format:"yyyy-MM-dd"},this.cellStyle=null,this.hasDate=!1,this.fixedLeft=0,this.fixedRight=0,this.isDefaultSort=!0,this.sortArr=[],t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)void 0!==this[n]&&(this[n]=t[n]);this.request.url&&(this.needRequest=!0)}return $()(e,[{key:"selectChange",value:function(e){}},{key:"selectionChange",value:function(e){}},{key:"rowClick",value:function(e,t,n,i){}},{key:"cellDbclick",value:function(e,t,n,i){}},{key:"sizeChange",value:function(e){}},{key:"pageChange",value:function(e){}},{key:"rowDbClick",value:function(e,t,n,i){}},{key:"sortChange",value:function(e,t,n){}},{key:"rowContextmenu",value:function(){}},{key:"initData",value:function(e){}},{key:"search",value:function(){}},{key:"dateChange",value:function(){}},{key:"refresh",value:function(){}},{key:"clearInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return this.interval&&clearInterval(this.interval),this.interval=null,this})},{key:"startInterval",value:function(e){var t=this;if(this.needRequest)return this.interval?(clearInterval(this.interval),this.interval=setInterval(function(){t.refresh()},e)):this.interval=setInterval(function(){t.refresh()},e),this}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}},{key:"add",value:function(e,t,n){var i=this[e];return i instanceof Array&&(void 0===n?i.push(t):i.splice(n,0,t)),this}},{key:"delete",value:function(e,t){var n=this[e];return this[e]="function"==typeof t?n.filter(function(e,n){return!t(e,n)}):[],this}},{key:"update",value:function(e,t){var n=this[e];return"function"==typeof t&&(this[e]=n.map(function(e,n){return t(e,n)?t(e,n):e})),this}},{key:"reset",value:function(e){var t=_()(new dc.Table,e);for(var n in t)this[n]=t[n];return this}},{key:"setTableData",value:function(e,t){return this.tableData=e,t&&(this.tableHead=t),this}}]),e}(),R=function(){function e(){O()(this,e),this.list=[]}return $()(e,[{key:"addDialog",value:function(e){this.list.push(e)}},{key:"removeDialog",value:function(e){if(e){var t=this.list.indexOf(e);-1!==e&&this.list.splice(t,1)}else this.list.splice(this.list.length-1,1)}}]),e}(),P=function(){function e(t){if(O()(this,e),this.show=!0,this.width="30%",this.fullscreen=!1,this.top="15vh",this.modal=!0,this.showClose=!0,this.center=!1,this.component="",this.appendTop="",this.appendBottom="",this.data={},this.title="",this.btnAlign="right",this.hasBtn=!1,this.btnGroup=[{text:"确定",type:"primary",size:"small",click:function(e,t){}},{text:"取消",type:"default",size:"small",click:function(e,t){e.show=!1}}],t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)this[n]=t[n]}return $()(e,[{key:"close",value:function(){}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}},{key:"add",value:function(e,t,n){var i=this[e];return i instanceof Array&&(void 0===n?i.push(t):i.splice(n,0,t)),this}},{key:"delete",value:function(e,t){var n=this[e];return this[e]="function"==typeof t?n.filter(function(e,n){return!t(e,n)}):[],this}},{key:"update",value:function(e,t){var n=this[e];return"function"==typeof t&&(this[e]=n.map(function(e,n){return t(e,n)?t(e,n):e})),this}},{key:"reset",value:function(e){var t=_()(new dc.Dialog,e);for(var n in t)this[n]=t[n];return this}}]),e}(),V=function(){function e(t){if(O()(this,e),this.name="tabs",this.type="card",this.tabPosition="top",this.stretch=!1,this.height="auto",this.currentTab="",this.tabs=[],this.fullscreen=!0,this.isFullscreen=!1,this.width="100%",i.default.prototype.$dcTabs?i.default.prototype.$dcTabs.push(this):i.default.prototype.$dcTabs=[this],t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)this[n]=t[n];else"string"==typeof t&&(this.name=t);this.tabs.length>0&&(this.currentTab=this.tabs[0].id)}return $()(e,[{key:"tabClick",value:function(e,t){}},{key:"tabChange",value:function(e,t){}},{key:"tabRemove",value:function(e){}},{key:"setType",value:function(e){return this.type=e,this}},{key:"setTabPosition",value:function(e){return this.tabPosition=e,this}},{key:"setStretch",value:function(e){return this.stretch=e,this}},{key:"setCurrentTab",value:function(e){return this.currentTab=e,this}},{key:"addTab",value:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)e[t].id=(new Date).getTime()+""+t,e[t].closable=!0,this.tabs.push(e[t]),t===e.length-1&&(this.currentTab=e[t].id);else e&&"object"===(void 0===e?"undefined":d()(e))&&(e.id=(new Date).getTime()+""+this.tabs.length,e.closable=!0,this.tabs.push(e),this.currentTab=e.id);return this}},{key:"closeTab",value:function(e){var t=this.tabs,n=t.findIndex(function(t){return t.title===e});return n===t.length-1&&t.length-1!=0?this.currentTab=t[n-1].id:this.currentTab=t[t.length-1].id?t[t.length-1].id:"",t.splice(n,1),this}},{key:"focusTab",value:function(e){var t=this.tabs,n=t.findIndex(function(t){return t.title===e});return this.currentTab=t[n].id,this}},{key:"setHeight",value:function(e){return this.height=e,this}},{key:"setWidth",value:function(e){return this.width=e,this}},{key:"updateTitle",value:function(e,t){var n=this.tabs,i=n.findIndex(function(t){return t.title===e});return-1!==i&&(n[i].title=t),this}},{key:"updateTabData",value:function(e,t){var n=this.tabs,i=n.findIndex(function(t){return t.title===e});return-1!==i&&(n[i].data=t),this}}]),e}(),M={style:{"min-width":"160px",height:"auto",left:0,top:0},itemHoverStyle:{},itemStyle:{}},q=function(){function e(t){O()(this,e),this.style=M.style,this.itemHoverStyle=M.itemHoverStyle,this.itemStyle=M.itemStyle,this.menu=[],this.show=!1,this.currentItem={}}return $()(e,[{key:"createMenu",value:function(e){if("object"===(void 0===e?"undefined":d()(e)))for(var t in e)this[t]="style"!==t?e[t]:_()(this[t],e[t]);return this}},{key:"setPosition",value:function(e,t){return this.style.left=e+"px",this.style.top=t+"px",this}},{key:"setPositionByEvent",value:function(e){return this.style.left=e.clientX-6+"px",this.style.top=e.clientY-6+"px",this}},{key:"setStyle",value:function(e){return this.style=_()(this.style,e),this}},{key:"setItemStyle",value:function(e,t){return"hover"===t?this.itemHoverStyle=e:this.itemStyle=e,this}},{key:"showMenu",value:function(e,t){return e instanceof Array?(this.style.left=e[0]-6+"px",this.style.top=e[1]-6+"px"):e instanceof Event&&(this.style.left=e.clientX-6+"px",this.style.top=e.clientY-6+"px"),this.show=!0,this.menu=t,this}},{key:"setWidth",value:function(e){return this.style["min-width"]=e,this}},{key:"setHeight",value:function(e){return this.style.height=e,this}},{key:"updateItem",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var a=this.menu,o=function(t){var i=a.findIndex(function(e){return e.text===n[t]});t!==n.length-1?a=a[i].children:a[i]=_()(a[i],e)},r=0;r<n.length;r++)o(r);return this}},{key:"hideMenu",value:function(){return this.show=!1,this}}]),e}(),A={origin:location.origin+"/ebook/dataProcess",name:"attach",limit:10,multiple:!0,action:"DCView.callUploadFunc",width:"500px",accept:[],btnAlign:"right",top:"15vh",title:"导入文件"},G=(n("RYcG"),function(){function e(){O()(this,e),this.show=!1,this.origin=A.origin,this.name=A.name,this.type="file",this.limit=A.limit,this.multiple=A.multiple,this.action=A.action,this.width=A.width,this.accept=A.accept,this.btnAlign=A.btnAlign,this.top=A.top,this.title=A.title,this.url="",this.params={},this.body={action:this.action},this.form=null,this.submitForm={}}return $()(e,[{key:"open",value:function(e){var t=this;if(this.form=null,this.submitForm={},e&&"object"===(void 0===e?"undefined":d()(e)))for(var n in e)this[n]=e[n];(this.show=!0,this.url)&&this.url.split("&").forEach(function(e){var n=e.split("=");t.body[n[0]]=n[1]});return this.body=_()(this.body,this.params),this}},{key:"reset",value:function(e){var t=_()(new dc.ImportFile,e);for(var n in t)this[n]=t[n];return this}},{key:"close",value:function(){return this.show=!1,this}},{key:"handleSuccess",value:function(e){}},{key:"handleError",value:function(e){}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}}]),e}()),B=n("lHA8"),H=n.n(B),z=n("c/Tr"),W=n.n(z),J=n("Gu7T"),Y=n.n(J),K={emptyText:"暂无数据",key:"link",lazy:!0,indent:16,expandAll:!1,highlightCurrent:!0,hasCheckbox:!0,checkStrictly:!1,fontSize:12,props:{label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},accordion:!1,loadType:[],selectLeafOnly:!0},X=function(){function e(t){if(O()(this,e),this.emptyText=K.emptyText,this.key=K.key,this.lazy=K.lazy,this.indent=K.indent,this.expandAll=K.expandAll,this.highlightCurrent=K.highlightCurrent,this.defaultExpandedKeys=[],this.hasCheckbox=K.hasCheckbox,this.checkStrictly=K.checkStrictly,this.selectType=[],this.fontSize=K.fontSize,this.props=K.props,this.hasContextmenu=!0,this.accordion=K.accordion,this.url="",this.params={},this.singleSelect=!0,this.nodeSelection=null,this.loadType=K.loadType,this.selectKey="id",this.selectLeafOnly=K.selectLeafOnly,this.data=[],this.selection=[],this.imgKey=K.imgKey,this.imgEnum=K.imgEnum,this.iconEnum=K.iconEnum,this.height="",this.vue=null,this.currentNode=null,this.contextmenu=new dc.Contextmenu,this.clickNodeExpand=!1,this.selectNodes=[],t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)this[n]=t[n]}return $()(e,[{key:"nodeClick",value:function(e,t){}},{key:"loadNode",value:function(e,t){}},{key:"nodeContextmenu",value:function(e,t,n){}},{key:"initData",value:function(e){}},{key:"setNodeIcon",value:function(e){var t={};if(this.imgEnum){for(var n in this.imgEnum)t[n.toLowerCase()]=this.imgEnum[n];for(var i=0;i<e.length;i++){var a=e[i][this.imgKey].toLowerCase();e[i].img=t[a],e[i].children&&e[i].children.length>0&&this.setNodeIcon(e[i].children)}}if(this.iconEnum){for(var o in this.iconEnum)t[o.toLowerCase()]=this.imgEnum[o];for(var r=0;r<e.length;r++){var s=e[r][this.imgKey].toLowerCase();e[r].icon=t[s],e[r].children&&e[r].children.length>0&&this.setNodeIcon(e[r].children)}}return this}},{key:"getNode",value:function(e){return this.vue.$refs.tree.getNode(e)}},{key:"setCurrentKey",value:function(e,t){var n=this;t&&(this.selectNodes=[]);var i=[];!function t(a,o){a.link===e?(-1==n.selectNodes.indexOf(e)&&n.selectNodes.push(e),o&&(o.include=!0)):a.children.length>0&&a.children.forEach(function(e,n){o?(o.parent.push(a.link),t(e,o)):(i[n]={include:!1,parent:[]},t(e,i[n]))})}(this.data[0]),i.forEach(function(e){var t;e.include&&(t=n.defaultExpandedKeys).push.apply(t,Y()(e.parent))}),this.defaultExpandedKeys=W()(new H.a(this.defaultExpandedKeys))}},{key:"refresh",value:function(){}},{key:"hideMenu",value:function(){return this.contextmenu.hideMenu(),this}},{key:"reset",value:function(e){var t=_()(new dc.Tree,e);for(var n in t)this[n]=t[n];return this}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}},{key:"setData",value:function(e){return this.data=e,this}}]),e}(),Q=function(){function e(t){if(O()(this,e),this.menu=[],this.color="#000",this.fontSize="16px",this.backgroundColor="#ccc",this.height="40px",this.menuWidth=120,this.indent=20,this.marginRight=12,this.align="left",this.key="index",this.hoverColor="#409eff",this.trigger="hover",this.activeItemKey="",this.activeColor="#409eff",this.hightlineActive=!1,t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)this[n]=t[n]}return $()(e,[{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}},{key:"add",value:function(e,t,n){var i=this[e];return i instanceof Array&&(void 0===n?i.push(t):i.splice(n,0,t)),this}},{key:"delete",value:function(e,t){var n=this[e];return this[e]="function"==typeof t?n.filter(function(e,n){return!t(e,n)}):[],this}},{key:"update",value:function(e,t){var n=this[e];return"function"==typeof t&&(this[e]=n.map(function(e,n){return t(e,n)?t(e,n):e})),this}},{key:"reset",value:function(e){var t=_()(new dc.Nav,e);for(var n in t)this[n]=t[n];return this}}]),e}(),Z={left:"200px",top:"100px",width:"400px",height:"300px",backgroundColor:"#000",headerBackgroundColor:"#b3b3ff",color:"#fff",minimization:!1,maximization:!0,zIndex:1e3,fontSize:"16px"},ee=function(){function e(t){if(O()(this,e),this.id="frame1",this.show=!0,this.title="",this.left=Z.left,this.top=Z.top,this.width=Z.width,this.height=Z.height,this.backgroundColor=Z.backgroundColor,this.headerBackgroundColor=Z.headerBackgroundColor,this.color=Z.color,this.html="",this.minimization=Z.minimization,this.maximization=Z.maximization,this.zIndex=Z.zIndex,this.data={},this.fontSize=Z.fontSize,this.component="",t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)this[n]=t[n]}return $()(e,[{key:"colse",value:function(){}},{key:"reset",value:function(e){var t=_()(new dc.Frame,e);for(var n in t)this[n]=t[n];return this}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}}]),e}(),te=function(){function e(){O()(this,e),this.list=[],this.positionInfo={leftTop:{left:"10px",top:"10px"},rightTop:{right:"10px",top:"10px"},leftBottom:{left:"10px",bottom:"10px"},rightBottom:{right:"10px",bottom:"10px"}},this.position="leftBottom"}return $()(e,[{key:"openFrame",value:function(e){e instanceof dc.Frame&&(e.id=(new Date).getTime()+this.list.length+"",this.list.push(e))}},{key:"closeFrame",value:function(e){if(e){var t=this.list.findIndex(function(t){return t.id===e});this.list.splice(t,1)}else this.list.splice(-1,1)}},{key:"setMiniPosition",value:function(e){this.position=e}}]),e}(),ne=function(){function e(t){if(O()(this,e),this.visiable=!1,this.trigger="hover",this.title="",this.content="",this.width=180,this.placement="right",this.disabled=!1,this.offset=0,this.delay=0,this.component="",this.data={},t&&"object"===(void 0===t?"undefined":d()(t)))for(var n in t)this[n]=t[n]}return $()(e,[{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"reset",value:function(e){var t=_()(new dc.Popover,e);for(var n in t)this[n]=t[n];return this}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}}]),e}(),ie=n("YVNP"),ae={btns:[],hiddenRows:["num"],bottomBtnStyle:"",style:"margin: 10px;",inline:!1,labelWidth:"100px",labelPosition:"right",size:"small",autoComplete:"on",spellcheck:!1,readOnly:!1,extBtnIcon:"el-icon-more",textArea:{rows:"{ minRows: 1, maxRows: 10}",resize:"none"},tag:{type:"warning",closeTransition:!1,appendWord:" + New Tag"},inputStyle:"",dataType:{bool:["bool","boolean","switch"],checkboxGroup:["checkboxgroup","checkbox"],radio:["radio"],select:["singleenum","multiselect","multienum"],time:["time"],date:["date","datetime","datetimerange","daterange"],button:["button","btn"],tag:["tags","tag"],input:["","input","string","text","textarea","number","float","password","double","int","integer","long","search","extinput"],component:["dataset","timepickerselect"]}},oe={vue:{},data:{},structure:[],loading:!1,ref:"form"},re=function(){function e(t){for(var n in O()(this,e),oe)this[n]=oe[n];for(var i in ae)this[i]=ae[i];if(t)for(var a in t)this[a]=t[a]}return $()(e,[{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.data=e,this}},{key:"setStructure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.structure=e,this}},{key:"setForm",value:function(e,t){return e&&this.setData(e),t&&this.setStructure(t),this}},{key:"setItemStructure",value:function(e,t,n){switch(void 0===e?"undefined":d()(e)){case"string":e=this.structure.findIndex(function(t){return t.name==e});case"number":n?this.structure[e][t]=n:this.structure[e]=t}return this}},{key:"setItemData",value:function(e,t){switch(void 0===e?"undefined":d()(e)){case"number":e=this.structure[e].name;case"string":this.data[e]=t}return this}},{key:"setLoading",value:function(){this.loading=!0}},{key:"cancelLoading",value:function(){this.loading=!1}},{key:"setBtns",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(e){case"add":this.btns.splice(n,0,t);break;case"cover":Array.isArray(t)?this.btns=t:this.btns.splice(n,1,t);break;case"remove":this.btns.splice(n,1);break;case"clear":this.btn=[]}return this}},{key:"setDataType",value:function(e){return this.dataType=Object(ie.a)(e,this.dataType),this}},{key:"setComponentType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(e){case"add":this.dataType.component.splice(n,0,t);break;case"cover":Array.isArray(t)?this.dataType.component=t:this.dataType.component.splice(n,1,t);break;case"remove":this.dataType.component.splice(n,1);break;case"clear":this.dataType.component=[]}return this}},{key:"reset",value:function(){return this.vue.$refs[this.ref].resetFields(),this}},{key:"itemRules",value:function(e){var t=[];return void 0!==e.canBeEmpty&&!e.canBeEmpty&&t.push({required:!0,message:"必填字段，请输入",trigger:"change"}),e.minLength&&t.push({min:e.minLength,message:"长度不能少于 "+e.minLength+" 个字符",trigger:"change"}),e.maxLength&&t.push({min:e.maxLength,message:"长度不能多于 "+e.minLength+" 个字符",trigger:"change"}),t}},{key:"btnEvent",value:function(e){e.click&&e.click(this,e)}},{key:"extBtnEvent",value:function(e){e.extClick&&e.extClick(this,e)}},{key:"tagClose",value:function(e,t){this.data[t.name].splice(e,1)}},{key:"showTag",value:function(e,t){return e}},{key:"tagAppend",value:function(e){var t=this.tag.input;t&&this.data[e.name].push(t),this.tag.input="",this.tag.inputShow=!1}},{key:"showTagInput",value:function(e){var t=this;this.tag.inputShow=!0,this.vue.$nextTick(function(n){t.vue.$refs[t.tag.ref+e.name][0].$refs.input.focus()})}},{key:"inputType",value:function(e,t){void 0===e.type&&(e.type="");var n=this.dataType[t].includes(e.type.toLowerCase());if(n)switch(t){case"button":this.initBtnData(e);break;case"tag":this.initTagData(e);break;case"select":this.initSelectData(e);break;case"time":this.initTimeData(e);break;case"date":this.initDateData(e);break;case"input":this.initInputData(e);break;case"component":this.initComponentData(e)}return n}},{key:"initBtnData",value:function(e){}},{key:"initTagData",value:function(e){void 0===e.readOnlyIndex&&(e.readOnlyIndex=-1)}},{key:"initSelectData",value:function(e){e.type.toLowerCase().includes("multi")&&(e.multiple=!0)}},{key:"initTimeData",value:function(e){e.placeholder||(e.placeholder="请选择时间"),e.timeRange||(e.timeRange=["00:00","23:59","00:15"]),e.pickerOptions={start:e.timeRange[0],end:e.timeRange[1],step:e.timeRange[2]}}},{key:"initDateData",value:function(e){e.type.toLowerCase().includes("range")?(e.startPlaceholder||(e.startPlaceholder="开始时间"),e.endPlaceholder||(e.endPlaceholder="结束时间"),e.rangeSeparator||(e.rangeSeparator="至"),e.elementType||(e.elementType="datetimerange")):(e.placeholder||(e.placeholder="请选择时间"),e.elementType||(e.elementType="datetime")),e.type.toLowerCase().includes("time")?(e.valueFormat||(e.valueFormat="yyyy-MM-dd HH:mm"),e.labelFormat||(e.labelFormat="yyyy-MM-dd HH:mm")):(e.valueFormat||(e.valueFormat="yyyy-MM-dd"),e.labelFormat||(e.labelFormat="yyyy-MM-dd"))}},{key:"initInputData",value:function(e){switch(e.type.toLowerCase()){case"password":e.elementType||(e.elementType="password");break;case"text":case"textarea":e.elementType||(e.elementType="textarea");break;case"number":case"int":case"integer":case"long":case"float":case"double":e.elementType||(e.elementType="number");break;case"search":e.elementType||(e.elementType="text"),e.extBtn=!0,e.extBtnIcon="el-icon-search";break;case"extinput":e.elementType||(e.elementType="text"),e.extBtn=!0;break;default:e.elementType||(e.elementType="text")}}},{key:"initComponentData",value:function(e){switch(e.type.toLowerCase()){case"dataset":e.elementType||(e.elementType="dc-dataSet"),e.object=new dc.Table;break;case"attachobject":e.elementType||(e.elementType="dc-attach")}}},{key:"inputChange",value:function(e){switch(e.elementType){case"number":switch(e.type.toLowerCase()){case"int":case"integer":case"long":this.data[e.name]=parseInt(this.data[e.name]);break;case"float":case"double":this.data[e.name]=parseFloat(this.data[e.name]);break;default:this.data[e.name]=Number(this.data[e.name])}}e.change&&e.change(this,e)}},{key:"optionHtml",value:function(e){return'\n      <span style="float: left">'+e.value+'</span>\n      <span style="float: left; color: #8492a6; font-size: 13px">&nbsp;&minus;&nbsp;'+e.label+"</span>\n    "}},{key:"set",value:function(e){for(var t in e)this[t]=e[t];return this}},{key:"nextTick",value:function(){}}]),e}(),se=n("Zx67"),le=n.n(se),ce=n("zwoO"),ue=n.n(ce),de=n("Pf15"),he=n.n(de),fe=n("C4MV"),pe=n.n(fe),me=n("mvHQ"),ge=n.n(me),ve=n("9eRc"),be=n("LDvL"),we=n("+j5p"),ye=n("D9Ar"),Ne=n("Emh/"),De=n("dj/5"),Te=n("tzUH"),xe=n("+vo4"),Ee=n("1sUA"),ke={PRE:"pre",NEXT:"next",ALL:"all"};function Ce(e,t,n,i,a,o,r){var s=[];!function(e,t,n,i,a,o,r){for(var s=t.length-1;s>=0;s--)e[t[s][r]].visible&&t[s][o]==n&&(i.push(t[s][r]),a.push(t[s]),t.splice(s,1))}(e,t,n,s,a,o,r),s.length&&(i.push(s),function(e,t,n,i,a,o,r){for(var s=0;s<n.length;s++)Ce(e,t,n[s],i,a,o,r)}(e,t,s,i,a,o,r))}var Fe=function(e,t,n,i){var a=[],o=[],r=t.slice(0);switch(i){case ke.PRE:Ce(e,r,n,a,o,1,0);break;case ke.NEXT:Ce(e,r,n,a,o,0,1);break;case ke.ALL:Ce(e,r,n,a,o,1,0),a.push(n),Ce(e,r,n,a,o,0,1)}return{nodes:[].concat.apply([],a),lines:o}},Se=-1,_e=1,Ue=0,Oe={attr:{x0:0,y0:0,x:0,y:0,id:"",label:"",width:1,height:1,visible:!0,moveFlag:{value:!1},dragFlag:{value:!1},viewNodeFlag:!1,type:"",textList:[],listShow:!0},setAttr:function(e,t){this[e]=t},setAttrs:function(e){this.attr=Object(ie.a)(e,this.attr)},nodeFlag:function(e,t){return void 0!==t&&(e.value=t),e.value},computeXY:function(e,t){var n=Object(be.a)(e,t.panelObj,t);this.attr.x=n.x-this.attr.width/2,this.attr.y=n.y-this.attr.height/2},uniqueId:function(){this.attr.id=(new Date).getTime()+Math.random().toString()},appearSvg:function(e,t){this.computeXY(e,t),this.uniqueId()},moveStart:function(){this.nodeFlag(this.attr.moveFlag,!0)},zoom:function(e,t){var n=Object(Ee.a)(t.id,e.groups);Object(Ne.a)(e.nodes,n.member),e.panelObj.autoLayout(e,e.nodes,e.lines)},objMove:function(e,t){var n=Object(be.a)(e,t.panelObj,t);this.attr.x=n.x-this.attr.width/2,this.attr.y=n.y-this.attr.height/2,Object(Te.a)(n,t)},isContact:function(e){var t=Se;for(var n in e)if(e[n].visible&&this.attr.id!=n&&this.attr.y+this.attr.height>=e[n].y&&this.attr.y<=e[n].y+e[n].height){if(this.attr.x+this.attr.width>=e[n].x&&this.attr.x+this.attr.width/2<=e[n].x+e[n].width/2){t=Ue;break}if(this.attr.x<=e[n].x+e[n].width&&this.attr.x+this.attr.width/2>=e[n].x+e[n].width/2){t=_e;break}}return{flag:t,node:e[n]}},intoNode:function(e){if(this.attr.viewNodeFlag)e.flow.recordFlowLayer(e,this.attr.id),e.flow.initFlow(e);else{var t={name:"cdcDetail",title:this.attr.id,adcTag:this.attr.adcLabel,adcName:this.attr.adcName};e.$addTab(t)}},getSkinship:function(e,t){e.focusNodes.push(Fe(e.nodes,e.lines,this.attr.id,t).nodes),e.focusLines.push(Fe(e.nodes,e.lines,this.attr.id,t).lines),e.floatFlag.value=e.flow.line.floatFlag.shut},chose:function(e,t,n){this.attr=e,n.focusNodes.splice(0,n.focusNodes.length,e.id),n.focusLines.splice(0,n.focusLines.length);for(var i=t.target;!n.$refs.node.includes(i);)i=i.parentNode;Object(we.a)(i,n.$refs.svg)},remove:function(e){Object(De.a)(e,this.attr)},moving:function(e,t){this.nodeFlag(this.attr.moveFlag)&&this.objMove(e,t)},moveOver:function(e){if(this.nodeFlag(this.attr.moveFlag)){this.nodeFlag(this.attr.moveFlag,!1);var t=this.isContact(e.nodes);t.flag>Se&&(xe.a.moveX(this.attr,t.flag,e),this.attr.viewNodeFlag||t.node.viewNodeFlag?this.attr.viewNodeFlag?this.attr.viewNodeFlag&&t.node.viewNodeFlag:e.flow.canNodeIntoView&&Object(ye.a)(e,this.attr.id,t.node.id,t.node.label,e.nodes,e.lines,e.groups):e.flow.isContactAttach&&xe.a.contactNode(this.attr,t,e.lines,e.groups))}},dragStart:function(){this.nodeFlag(this.attr.dragFlag,!0)},triggerMoveOver:function(e){this.nodeFlag(this.attr.moveFlag,!0),this.moveOver(e)},dragOver:function(e,t){this.nodeFlag(this.attr.dragFlag)&&(this.nodeFlag(this.attr.dragFlag,!1),this.appearSvg(e,t),t.$set(t.nodes,this.attr.id,this.attr),this.triggerMoveOver(t))}},Ie=Oe,$e=n("oqti"),Le=n("pQWX"),je=n("Hpyp");var Re={removeLine:function(e,t){Object(je.a)(e,t.nodes,t.lines,t.groups)},float:function(e,t,n){n.floatFlag.value&&(Object(we.a)(e,n.$refs.svg),n.focusLines.push(t))},sink:function(e,t){t.floatFlag.value&&(Object(we.a)(e,t.$refs.lineContainer),t.focusLines.splice(0,t.focusLines.length))},changeWidth:function(e){switch(e.flow.lineWidth){case e.flow.line.width.thick:e.flow.lineWidth=e.flow.line.width.thin;break;case e.flow.line.width.thin:e.flow.lineWidth=e.flow.line.width.thick}return e.flow.lineWidth}};var Pe=function(e,t,n){var i=n.flow.line.turn.length,a=n.flow.lineWidth+n.flow.line.arrow.margin,o=e.x+e.width+2,r=e.y+e.height/2,s=t.x-a,l=t.y+t.height/2,c=o+i,u=s-i;if(u<c&&s>o)u=c=(c+u)/2;else if(t.x<e.x&&e!=t)return"M "+o+","+r+" L "+c+","+r+" C "+(c+10)+","+l+" "+((u=(s=t.x+t.width)+a)+10)+","+l+" "+(s+a)+","+l;return e===t?"M "+o+","+r+" L "+(o+a)+","+r+" C "+(o+a+10)+","+r+" "+(o+a+10)+","+(r-10)+" "+(o+a)+","+(r-10):"M "+o+","+r+" L "+c+","+r+" Q "+(c+u)/2+","+r+" "+(c+u)/2+","+(r+l)/2+" T "+u+","+l+" L "+s+","+l};var Ve=function(e,t){var n={};"singlePDF"===e.$route.query.type?(n[t.req.getStatus.data.flowName]=e.$route.query.jobId,n.pdfId=e.$route.query.id,n.hisOpTime=VUE.$store.state.opTime||VUE.$store.state.hisOpTime||void 0):"singleJob"===e.$route.query.type?(n[t.req.getStatus.data.flowName]=e.$route.query.jobId,n.hisOpTime=VUE.$store.state.opTime||VUE.$store.state.hisOpTime||void 0):"importance"===e.$route.query.type&&(n.jobId=t.jobId,n.pdfId=t.flowName),e.$reqGet(t.req.getStatus.url,n).then(function(t){if(t){var n=t.CONTENT.nodes;!function(e){for(var t in e)e[t].status=e[t].status.replace(/\s+/g,"")}(n),e.$set(e.nodesStatus,"CONTENT",n)}})};var Me=function(e,t){var n={};n[t.req.getNodesTip.data.flowName]=t.flowName,e.$reqGet(t.req.getNodesTip.url,n).then(function(t){if(t){var n=t.CONTENT.nodes;e.$set(e.nodesTip,"CONTENT",n)}})},qe={domType:"html",type:"",dcType:"",flowRun:!1,showStatus:!1,showNodesTip:!1,canRemoveLine:!1,isContactAttach:!1,canNodeIntoView:!1,toolbar:[[{icon:"fa fa-refresh",title:"刷新",color:"green",event:{click:function(){this.flow.refreshFlow(this)}}},{icon:"fa fa-reply",title:"撤销",color:"blue",disabled:function(e){return 0==e.recordIndex},event:{click:function(){this.flow.historyUndo(this)}}},{icon:"fa fa-share",title:"重做",color:"blue",disabled:function(e){return e.recordIndex==e.recordLength},event:{click:function(){this.flow.historyRedo(this)}}},{icon:"fa fa-align-left",title:"自动布局",event:{click:function(){this.panelObj.autoLayout(this,this.nodes,this.lines)}}},{title:"切换线的粗细",icon:"fa fa-plug",event:{click:function(){this.linesObj.changeWidth(this)}}},{title:"放大",icon:"fa fa-search-plus",color:"blue",event:{click:function(){this.panelObj.zoomIn(this)}}},{title:"缩小",color:"blue",icon:"fa fa-search-minus",event:{click:function(){this.panelObj.zoomOut(this)}}}]],btnGroup:{show:!0,icon:"fa fa-bars",title:"工具栏显示",style:"position:absolute; left: 1px",event:function(e){e.btnGroupMember.show=!e.btnGroupMember.show}},btnGroupMember:{show:!0,icon:"fa fa-stop",style:"position:absolute; left: 43px"},img:{pathNode:"monitor/static/images/custom_icon/",pathStatus:"monitor/static/images/status/",pathAttr:"monitor/static/images/attr/",name:{dc:"dc",node:"NODE",listUp:"listUp",listDown:"listDown",dataType:"staticValue",status:"Waiting"},ext:".png",extGif:".gif"},nodeContainerStyle:"border:solid 1px; border-radius:5px;",textListTitleStyle:"padding:0px; margin:0px 0px 5px 0px; height:20px; font-size:16px;font-family:Microsoft YaHei; font-weight:bold;",textListStyle:"padding:0px; margin:1px; height:20px; font-size:14px; ",titleImgSize:{width:16,height:16},textListImgSize:{width:14,height:14},titleLineHeight:45,textListLineHeight:21,listShowTip:"切换列表展示",statusImgSize:15,nodeLabelSize:12,layout:{delta:10,fixed:{x:80,y:100,marginRight:350,marginBottom:300},rankdir:"LR",ratioHeight:45,widthBorder:80,wide:2.5,narrow:2},panelBorder:{top:0,bottom:0,left:0,right:0},scrollMove:{x:0,y:0},moveSpace:200,delay:500,intervalTime:3e3,emptyFlowTip:"暂无数据",svgBackground:"",nodeType:"type",nodeFlag:"node",ViewFlag:"view",size:{view:{width:75,height:50},node:{width:32,height:32}},node:{x0:100,y0:100,color:{focus:"#1e50a2",blur:"transparent"}},line:{opacity:.5,width:{thin:2,thick:6},color:{focus:"#ff461f",blur:"#698aab"},arrow:{color:"#666",strokeWidth:"0",path:"M2,2 L12,6 L2,10 L2,2",widthRatio:2,sizes:{thin:"0 0 32 32",thick:"0 0 54 54"},margin:4},turn:{length:50,start:50,target:50},floatFlag:{open:!0,shut:!1}},selectingFill:"#88ada6",selectedFill:"#88ada6",selectedOpacity:.2,selectingOpacity:.2,selectBoxStroke:"#c0ebd7",selectBoxStrokeWidth:1};qe.lineWidth=qe.line.width.thin,qe.line.arrow.size=qe.line.arrow.sizes.thin;var Ae=qe,Ge={vue:{},flowName:"",pId:"",index:"",operateRecord:"flowRecord",layerPre:"flowLayer",recordLength:0,recordIndex:0,statusContorl:null,contextmenu:new q},Be=function(){function e(t){for(var n in O()(this,e),Ge)this[n]=Ge[n];for(var i in Ae)this[i]="object"===d()(Ae[i])&&null!=Ae[i]?Object(ie.a)(Ae[i],this[i]):Ae[i];if(t)for(var a in t)this[a]="object"===d()(t[a])&&null!=t[a]?Object(ie.a)(t[a],this[a]):t[a]}return $()(e,[{key:"initAll",value:function(e){this.initData(e),this.recordFlowLayer(e),this.initFlow(e)}},{key:"initData",value:function(e){this.index=(new Date).getTime()+Math.random().toString().replace(".",""),e.index=this.index,this.vue=e,e.recordKeyPre=this.operateRecord+this.index,e.layers=this.layerPre+this.index,this.lineWidth=this.line.width.thin,this.nodeAttr={width:this.size.node.width,height:this.size.node.height,type:this.nodeFlag,x:this.node.x0,y:this.node.y0},this.nodeObj=Object(ie.a)(Ie),this.nodeObj.setAttrs(this.nodeAttr),e.nodeObj=Object(ie.a)(this.nodeObj),e.selectBox=Object(ie.a)($e.a),e.panelObj=new Le.a({layout:this.layout}),e.linesObj=Object(ie.a)(Re)}},{key:"recordFlowLayer",value:function(e,t){var n=window.sessionStorage,i=t?JSON.parse(n.getItem(e.layers)):[];t||(t=""),i.push(t),n.setItem(e.layers,ge()(i))}},{key:"modifyFlowLayer",value:function(e){var t=window.sessionStorage,n=JSON.parse(t.getItem(e.layers));n.pop(),t.setItem(e.layers,ge()(n))}},{key:"focusStyle",value:function(e,t,n){return-1!=ge()(t).indexOf(ge()(e))?this[n].color.focus:this[n].color.blur}},{key:"initFlow",value:function(e){var t=JSON.parse(window.sessionStorage.getItem(e.layers)).slice(-1).pop();t?this.getView(t,e):this.getFlow(e)}},{key:"refreshFlow",value:function(e){return this.initFlow(e),this}},{key:"getFlow",value:function(e){var t=this;e.flowLoading=!0;var n={};n[this.req.getFlow.data.flowName]=this.flowName,e.$reqGet(this.req.getFlow.url,n).then(function(n){n&&t.getFlowFinished(e,n),e.flowLoading=!1})}},{key:"getView",value:function(e,t){var n=this;t.flowLoading=!0;var i={};i[this.req.getView.data.flowName]=this.flowName,i[this.req.getView.data.viewName]=e,t.$reqGet(this.req.getView.url,i).then(function(e){e&&n.getFlowFinished(t,e),t.flowLoading=!1})}},{key:"getFlowFinished",value:function(e,t){this.saveFlowData(e,t),this.formatFlowData(e,t.CONTENT),this.initPanel(e),this.historyReset(e),this.flowRun&&this.startGetStatus()}},{key:"saveFlowData",value:function(e,t){var n=JSON.parse(window.sessionStorage.getItem(e.layers)).slice(-1).pop();window.sessionStorage.setItem((n?"view":"flow")+e.index,ge()(t))}},{key:"formatFlowData",value:function(e,t){e.groups=Object(ie.a)(t.groups||[]),e.nodes=Object(ie.a)(t.nodes),this.addAssistAttr(e,e.nodes),this.correctAssistAttr(e),e.lines=Object(ie.a)(t.links),Object(ve.a)(e.lines,e.groups)}},{key:"addAssistAttr",value:function(e,t){for(var n in t)t[n]=Object(ie.a)(this.nodeObj.attr,t[n],this.nodeAttrs),"textList"==this.type&&(t[n].height=this.titleLineHeight+this.textListLineHeight*(t[n].listShow?t[n].textList.length:0)),t[n].hasOwnProperty(this.nodeType)?t[n][this.nodeType]==this.nodeFlag?t[n].viewNodeFlag=!1:(t[n].viewNodeFlag=!0,t[n].width=this.size.view.width,t[n].height=this.size.view.height):t[n].viewNodeFlag=!1}},{key:"correctAssistAttr",value:function(e){for(var t=e.groups.length-1;t>=0;t--){e.nodes[e.groups[t][0]].viewNodeFlag=!0,e.nodes[e.groups[t][0]].width=this.size.view.width,e.nodes[e.groups[t][0]].height=this.size.view.height;for(var n=e.groups[t].length-1;n>=1;n--)e.nodes[e.groups[t][n]].visible=!e.nodes[e.groups[t][0]].visible}}},{key:"initPanel",value:function(e){e.panelObj.initSize(e)}},{key:"linePath",value:function(e,t){return Pe(t.nodes[e[0]],t.nodes[e[1]],t)}},{key:"clearFocus",value:function(e){e.focusLines.splice(0,e.focusLines.length),e.focusNodes.splice(0,e.focusNodes.length),e.floatFlag.value=this.line.floatFlag.open}},{key:"historyReset",value:function(e){var t=this;setTimeout(function(){for(var n=window.sessionStorage,i=n.length-1;i>=0;i--){var a=n.key(i);a.substr(0,e.recordKeyPre.length)==e.recordKeyPre&&n.removeItem(a)}var o={nodes:e.nodes,lines:e.lines};t.recordLength=0,t.recordIndex=0,n.setItem(e.recordKeyPre+t.recordIndex,ge()(o))},0)}},{key:"historyUndo",value:function(e){var t=window.sessionStorage;this.recordIndex--;var n=JSON.parse(t.getItem(e.recordKeyPre+this.recordIndex));e.lines=n.lines,e.nodes=n.nodes}},{key:"historyRedo",value:function(e){var t=window.sessionStorage;this.recordIndex++;var n=JSON.parse(t.getItem(e.recordKeyPre+this.recordIndex));e.lines=n.lines,e.nodes=n.nodes}},{key:"historySave",value:function(e){var t=window.sessionStorage,n={nodes:e.nodes,lines:e.lines},i=t.getItem(e.recordKeyPre+this.recordIndex);i&&i==ge()(n)||(this.recordIndex++,t.setItem(e.recordKeyPre+this.recordIndex,ge()(n)),this.recordLength=this.recordIndex)}},{key:"startGetStatus",value:function(){var e=this;this.statusContorl||(this.getStatus(this.vue,this),this.statusContorl=setInterval(function(){e.getStatus(e.vue,e)},this.intervalTime))}},{key:"getStatus",value:function(e,t){this.showStatus&&"{}"!=ge()(e.nodes)&&Ve(e,t),this.showNodesTip&&"{}"!=ge()(e.nodes)&&Me(e,t)}},{key:"stopGetStatus",value:function(){clearInterval(this.statusContorl),this.statusContorl=null}},{key:"clearStatus",value:function(){this.stopGetStatus(),Vue.nodesStatus={}}},{key:"addNode",value:function(e){for(var t in this.addAssistAttr(this.vue,e.nodes),e.nodes)this.vue.nodes[t]=e.nodes[t]}},{key:"nodeDbClick",value:function(e,t,n){console.log("nodeDbClick")}},{key:"nodeSingleClick",value:function(e,t,n){n.nodeObj.moveStart()}},{key:"nodeRightClick",value:function(e,t,n){n.moveOver(),console.log("nodeRightClick")}},{key:"selectBoxRightClick",value:function(e,t){console.log("selectBoxRightClick")}},{key:"getGroup",value:function(e,t){return Object(Ee.a)(e,t)}},{key:"panelRightClick",value:function(e,t){this.clearFocus(t),t.selectBox.selectBoxHidden()}},{key:"selectBoxDbClick",value:function(e,t){console.log("selectBoxDbClick")}},{key:"set",value:function(e){for(var t in e)this[t]=e[t];return this}},{key:"setToolbar",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(e){case"add":Array.isArray(t)?this.toolbar.splice(n,0,t):this.toolbar[n].splice(i,0,t);break;case"cover":Array.isArray(t)?this.toolbar.splice(n,1,t):this.toolbar[n].splice(i,1,t);break;case"remove":this.toolbar[n].splice(i,1)}return this}}]),e}();function He(e,t){var n=[];for(var i in t)t[i][e.nodeType]==e.nodeFlag&&n.push(t[i].id);return n}function ze(e,t,n){for(var i=[],a=0;a<n.length;a++)t[n[a][0]]&&t[n[a][1]]&&t[n[a][0]][e.nodeType]==e.nodeFlag&&t[n[a][1]][e.nodeType]==e.nodeFlag&&i.push(n[a]);return i}function We(e,t){var n=JSON.parse(window.sessionStorage.getItem("flow"+e.index)),i=JSON.parse(window.sessionStorage.getItem("view"+e.index)),a=n.CONTENT.nodes,o=n.CONTENT.links,r=i.CONTENT.nodes,s=i.CONTENT.links,l={nodes:function(e,t,n){for(var i in t)-1!=ge()(e).indexOf(t[i])&&pe()(e,i,{enumerable:!1});return e=Object(ie.a)(n,e)}(a,r,e.nodes),lines:function(e,t,n){for(var i=0;i<t.length;i++){var a=e.indexOf(t[i]);-1!=a&&e.splice(a,1)}return e=Object(ie.a)(n,e)}(o,s,e.lines)},c={};c[e.flow.req.saveFlow.data.flowName]=e.flow.flowName,c.nodes=He(e.flow,l.nodes),c.links=ze(e.flow,l.nodes,l.lines),e.$reqPost(e.flow.req.saveFlow.url,c).then(function(t){t&&e.flow.historyReset(e),t&&e.$successMessage("保存成功"),e.flowLoading=!1}).catch(function(t){e.flowLoading=!1,e.$successMessage("网络请求出错")})}var Je={nodeAttrs:["id","label","type","imgSrc","adcLabel","adcName"],nodeFlag:"pdc",domType:"svg",type:"node",canRemoveLine:!0,isContactAttach:!0,canNodeIntoView:!0,node:{x0:100,y0:100,color:{focus:"#ff8c31",blur:"transparent"}}},Ye=function(e){function t(e){O()(this,t);var n=ue()(this,(t.__proto__||le()(t)).call(this));for(var i in Je)n[i]=Je[i];if(e)for(var a in e)n[a]="object"===d()(e[a])&&null!=e[a]?Object(ie.a)(e[a],n[a]):e[a];return n}return he()(t,e),$()(t,[{key:"searchNode",value:function(e,t){if(t.nodes[e]&&t.nodes[e].visible){t.focusNodes=[e];var n=t.$refs.graph.getBoundingClientRect();t.$refs.graph.scrollLeft=t.nodes[e].x-n.width/2,t.$refs.graph.scrollTop=t.nodes[e].y-n.height/2}else t.$notify({message:"不存在该节点"})}},{key:"startJob",value:function(e){var t={};t[this.req.jobStart.data.flowName]=this.flowName,t[this.req.jobStart.data.time]=e.jobTime,e.flowLoading=!0,e.$reqGet(this.req.jobStart.url,t).then(function(t){e.flowLoading=!1}).catch(function(t){e.flowLoading=!1})}},{key:"stopJob",value:function(e){var t={};t[this.req.jobStop.data.flowName]=this.flowName,e.flowLoading=!0,e.$reqGet(this.req.jobStop.url,t).then(function(t){e.flowLoading=!1}).catch(function(t){e.flowLoading=!1})}},{key:"resetJob",value:function(e){var t={};t[this.req.jobReset.data.flowName]=this.flowName,e.flowLoading=!0,e.$reqGet(this.req.jobReset.url,t).then(function(t){e.flowLoading=!1}).catch(function(t){e.flowLoading=!1})}},{key:"resetErrorJob",value:function(e){var t={};t[this.req.jobResetError.data.flowName]=this.flowName,e.flowLoading=!0,e.$reqGet(this.req.jobResetError.url,t).then(function(t){e.flowLoading=!1}).catch(function(t){e.flowLoading=!1})}},{key:"filterFlowData",value:function(e,t,n,i){return{nodes:function(e,t){var n={};for(var i in t)t[i][e.nodeType]==e.nodeFlag&&(n[i]=t[i]);return n}(this,e),links:ze(this,e,t),groups:n}}},{key:"saveFlow",value:function(e){var t=JSON.parse(window.sessionStorage.getItem(e.layers)).slice(-1).pop();t?We(e):function(e){var t={nodes:Object(ie.a)(e.nodes),lines:Object(ie.a)(e.lines)},n={};n[e.flow.req.saveFlow.data.flowName]=e.flow.flowName,n.nodes=He(e.flow,t.nodes),n.links=ze(e.flow,t.nodes,t.lines),e.flowLoading=!0,e.$reqPost(e.flow.req.saveFlow.url,n).then(function(t){t&&e.flow.historyReset(e),e.flowLoading=!1,t&&e.$successMessage("保存成功")}).catch(function(t){e.flowLoading=!1,e.$successMessage("网络请求出错")})}(e)}}]),t}(Be),Ke=[{icon:"fa fa-save",color:"blue",title:"保存",event:{click:function(){this.flow.saveFlow(this)}}},{icon:"fa fa-plus",color:"green",title:"新增节点",event:{click:function(){var e=this,t={},n={id:this.flow.nodeTree.pId?this.flow.pId:this.flow.flowName},i=new dc.Tree({height:"300px",lazy:!1,hasCheckbox:!1,hasContextmenu:!1,nodeClick:function(n,i,a){t=i.type.toLowerCase()==e.flow.dcType?i:{}}});this.$reqGet(this.flow.nodeTree.url,n).then(function(n){n&&(i.setNodeIcon(n.CONTENT.treeList),i.setData(n.CONTENT.treeList),e.$openDialog(new dc.Dialog({component:"dc-tree",data:{object:i},hasBtn:!0,btnGroup:[{text:"确定",type:"primary",size:"small",click:function(n,i){if("{}"!=ge()(t)){e.flowLoading=!0;var a={};a[e.flow.getDC.data.node]=t.id,e.$reqGet(e.flow.getDC.url,a).then(function(t){e.flowLoading=!1,t&&e.flow.addNode(t.CONTENT)}).catch(function(t){e.flowLoading=!1})}n.show=!1}}]})))})}}},{title:"切换列表展示",icon:"fa fa-list-ul",color:"green",event:{click:function(){this.flow.changeAllTextListShow(this)}}}],Xe={nodeAttrs:["id","textList","title"],type:"textList",domType:"html",nodeContainerStyle:"background:#a4e2c6; padding:10px; border:solid 1px; border-radius:5px;",canRemoveLine:!0,isContactAttach:!0,size:{node:{width:200}},moveSpace:250},Qe=function(e){function t(e){O()(this,t);var n=ue()(this,(t.__proto__||le()(t)).call(this));for(var i in Xe)n[i]=Xe[i];if(n.setToolbar("add",Ke[2],0,3).setToolbar("add",Ke[1],0,1).setToolbar("add",Ke[0]),e)for(var a in e)n[a]="object"===d()(e[a])&&null!=e[a]?objClone(e[a],n[a]):e[a];return n}return he()(t,e),$()(t,[{key:"changeNodeTextListShow",value:function(e){e.listShow=!e.listShow,e.height=this.titleLineHeight+this.textListLineHeight*(e.listShow?e.textList.length:0)}},{key:"changeAllTextListShow",value:function(e){for(var t in e.nodes)this.changeNodeTextListShow(e.nodes[t])}},{key:"saveFlow",value:function(e){e.flowLoading=!0;var t={};t.nodes=e.nodes,t.links=e.lines,t[this.req.saveFlow.data.flowName]=e.flow.flowName,e.$reqPost(this.req.saveFlow.url,t).then(function(t){e.flowLoading=!1,t&&e.$successMessage("保存成功")}).catch(function(t){e.flowLoading=!1,res&&e.$successMessage("网络请求错误")})}},{key:"nodeRightClick",value:function(e,t,n){n.moveOver();var i=n.lines.findIndex(function(e){return ge()(e)==ge()([t.id,t.id])}),a=[{text:"查看表单",icon:"fa fa-eye",iconColor:"green",click:function(){n.flow.nodeDbClick(e,t,n),n.flow.contextmenu.hideMenu()}},{text:"删除",icon:"fa fa-remove",iconColor:"red",click:function(){n.nodeObj.remove(n),n.flow.contextmenu.hideMenu()}},{text:i>-1?"取消自环":"自环",icon:"fa fa-circle-o",iconColor:i>-1?"red":"green",click:function(){i>-1?n.lines.splice(i,1):n.lines.push([t.id,t.id]),n.flow.contextmenu.hideMenu()}}];this.contextmenu.showMenu(e,a)}}]),t}(Be);function Ze(e,t,n){switch(d()(e[t])){case"number":e[t]=n;break;case"string":e[t]+=n}}Array.prototype.newTableRow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={},i=e.length?function(e,t,n){var i=n.map(function(e){return e[t]}),a=0;switch(void 0===e?"undefined":d()(e)){case"number":a=function(e,t){var n=Math.max.apply(Math,Y()(e));return n<t&&(n=t),n}(i,e);break;case"string":a=function(e,t){var n=e.map(function(e){return t!=e.substr(0,t.length)||isNaN(Number(e.substr(t.length)))?"":e.substr(t.length)});return Math.max.apply(Math,Y()(n))}(i,e)}return a+1}(this[0].value,this[0].name,e):1;for(this.forEach(function(e){n[e.name]=void 0==e.value?"":e.value});t--;)Ze(n,this[t].name,i);return n};var et={vue:{},toolbar:[{title:"新增“与”逻辑",label:"and",name:"and",disabled:function(e){return e.currentNodeIndex<0||"and"!==e.currentNode.flag&&"or"!==e.currentNode.flag&&!!e.currentNode.flag},click:function(e,t){e.addLeaf(t)}},{title:"新增“或”逻辑",label:"or",name:"or",disabled:function(e){return e.currentNodeIndex<0||"and"!==e.currentNode.flag&&"or"!==e.currentNode.flag&&!!e.currentNode.flag},click:function(e,t){e.addLeaf(t)}},{title:"新增规则",name:"rule",style:"color: blue",icon:"fa fa-filter",disabled:function(e){return e.currentNodeIndex<0||"and"!==e.currentNode.flag&&"or"!==e.currentNode.flag&&!!e.currentNode.flag},click:function(e,t){e.addLeaf(t)}},{title:"删除",name:"remove",style:"color: red",icon:"el-icon-close",disabled:function(e){return"{}"==ge()(e.currentNode)},click:function(e,t){e.removeLeaf()}},{title:"清空所有",name:"clear",style:"color: red",icon:"fa fa-trash",disabled:function(e){return!e.treeData.length},click:function(e,t){e.clearTree()}}],currentNode:{},where:"",attr:{option:[{label:"描述",value:"desc"},{label:"系统固定环境(单击可编辑)",value:"env"},{label:"变量名",value:"name"},{label:"值",value:"value"}],placeholder:"请选择"},treeData:[],node:{name:"",value:"",flag:"",children:[]},expandKeys:[],fatherNode:{},currentNodeIndex:0,emptyText:"",accordion:!1,hightLightCurrent:!0,type1:{placeholder:"请选择",option:[{label:"and",value:"and"},{label:"or",value:"or"}]},type2:{placeholder:"请选择",option:[{label:"like",value:"like"},{label:"=",value:"equal"},{label:"<>",value:"notEqual"}]},test1:{a:"a",b:"b"}},tt=function(){function e(t){for(var n in O()(this,e),et)this[n]=et[n];if(t)for(var i in t)this[i]=t[i]}return $()(e,[{key:"initAll",value:function(e){this.vue=e,this.treeData=e.propData.data||[],this.treeData.length&&(this.currentNodeIndex=-1)}},{key:"addLeaf",value:function(e){var t=this,n=this.currentNode,i={name:"",value:"",flag:"",label:"",children:[],id:(new Date).getTime()};switch(e.name){case"and":case"or":i.flag=e.name,i.label=this.type1.option.find(function(e){return i.flag==e.value}).label;break;case"rule":i.name="desc",i.value="%%",i.flag="like",this.getNodeLabel(i)}n.children?(n.children.push(i),this.expandKeys.push(i.id)):this.treeData.push(i),setTimeout(function(){t.vue.$refs.filterTree.setCurrentKey(i.id),t.currentNode=t.vue.$refs.filterTree.getCurrentNode()},0)}},{key:"removeLeaf",value:function(){this.vue.$refs.filterTree.remove(this.currentNode),this.currentNode={},this.currentNodeIndex=-1}},{key:"clearTree",value:function(){this.treeData=[],this.currentNode={},this.currentNodeIndex=-1}},{key:"handleNodeClick",value:function(e){this.currentNode=e,this.currentNodeIndex=0}},{key:"showType",value:function(e,t){return-1!=this[e].option.findIndex(function(e){return e.label==t||e.value==t})}},{key:"getNodeLabel",value:function(e){switch(e.flag){case"like":e.label="p"+e.name+" "+e.flag+" "+e.value+" escape '\\'";break;case"equal":e.label="p"+e.name+" = '"+e.value+"'";break;case"notEqual":e.label="p"+e.name+" <> '"+e.value+"'"}}},{key:"setAttrVal",value:function(e,t){this[e]=t}},{key:"setAttrs",value:function(e){for(var t in e)this[t]=e[t]}}]),e}(),nt=n("hI2U"),it={UDF:"WebPDCMgrUDF",FUNC:"uploadAttachment"},at={name:"attach",props:["propData"],data:function(){var e=this;return{form:{},item:[],object:{},emptyText:"空文件",btns:[{text:"上传",type:"primary",disabled:function(e,t,n){return t.readOnly||n.readOnly},event:function(t,n){e.$importFile.open({multiple:!1,title:"上传附件",width:"400px",params:it,handleSuccess:function(e){n.data[t.name]=e[0].res.CONTENT.value,this.close()}})}},{text:"下载",type:"success",disabled:function(t,n,i){return!t||t==e.emptyText||n.readOnly||i.readOnly},event:function(t,n){e.$exportFile("UDF=WebPDCMgrUDF&FUNC=downloadAttachment",{guid:e.$route.query.guid,attrName:t.name})}},{text:"删除",type:"danger",disabled:function(t,n,i){return!t||t==e.emptyText||n.readOnly||i.readOnly},event:function(e,t){t.data[e.name]=""}}]}},watch:{propData:function(){this.initData()}},created:function(){this.initData()},methods:{initData:function(){this.form=this.propData.form,this.item=this.propData.item},btnEvent:function(e){e.call(this,this.item,this.form)}}},ot={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{attrs:{title:""}},[e._v(e._s(e.form.data[e.item.name]||e.emptyText))]),e._v(" "),n("div",{staticClass:"right"},e._l(e.btns,function(t,i){return n("el-button",{key:i,attrs:{disabled:t.disabled&&t.disabled(e.form.data[e.item.name],e.item,e.form),title:t.title,type:t.type,size:e.item.size||e.form.size},on:{click:function(n){e.btnEvent(t.event)}}},[n("i",{class:t.icon,style:t.color}),e._v(e._s(t.text)+"\n    ")])}))])},staticRenderFns:[]};var rt=n("VU/8")(at,ot,!1,function(e){n("i7FL")},"data-v-0120d5a6",null).exports,st={components:{},props:[],data:function(){var e=this;return{form:{name:"",password:"",newPassword:"",rePassword:""},rules:{checkPassword:[{validator:function(t,n,i){""===n?i(new Error("请再次输入密码")):n!==e.form.password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur",required:!0}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}}},created:function(){},watch:{},computed:{},methods:{}},lt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"用户名",required:"",prop:"name"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",required:"",prop:"password"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"新密码",required:"",prop:"newPassword"}},[n("el-input",{attrs:{size:"mini",type:"password"},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[n("el-input",{attrs:{size:"mini",type:"password"},model:{value:e.form.rePassword,callback:function(t){e.$set(e.form,"rePassword",t)},expression:"form.rePassword"}})],1)],1),e._v(" "),n("p",{staticClass:"btn-group"},[n("el-button",{attrs:{type:"primary"}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:e.$closeDialog}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var ct=n("VU/8")(st,lt,!1,function(e){n("7Dyr")},"data-v-0d5ff7c0",null).exports,ut=n("fZjL"),dt=n.n(ut),ht=n("+SrV"),ft={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:e.handleCommand}},[n("el-button",{attrs:{title:"多选操作",size:"mini",disabled:e.selection.length<1}},[n("img",{attrs:{src:monitor/"static/images/phone_operator_24.png",alt:""}})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.handleItems,function(t,i){return"切换调度队列"===t.label&&"singlePDF"!==e.$route.query.type||!t.multi?e._e():n("el-dropdown-item",{key:i,attrs:{command:i}},[e._v(e._s(t.label))])}))],1)],1)},staticRenderFns:[]};var pt={components:{"handle-mutli":n("VU/8")({components:{},props:["handleList","selection","table"],data:function(){return{}},created:function(){},watch:{},computed:{handleItems:function(){var e=[];switch(this.$route.query.type.toLowerCase()){case"job":e=this.handleList.job.slice(1);break;case"pdf":e=this.handleList.pdf.slice(1);break;case"singlejob":e=this.handleList.pdf;break;case"pdc":case"singlepdf":e=this.handleList.pdc}return e}},methods:{handleCommand:function(e){this.handleItems[e].multi(this.selection,this.table)}}},ft,!1,function(e){n("fG4C")},"data-v-784677d9",null).exports},props:[],data:function(){var e=this,t=this.$route.query.type;return{handleList:ht.a.handle,table:new dc.Table({fixedLeft:2,sortable:!0,width:"100%",hasColSelect:!0,colSelectWidth:"36px",cellAppend:[{prop:"handle",condition:!0,component:"handle-btn"},{prop:"Msg",condition:!0,component:"log-cell"}],search:function(t,n){e.getTableData(e.flag,n,e.idParams)},sizeChange:function(t,n){e.getTableData(e.flag,n,e.idParams)},pageChange:function(t,n){e.getTableData(e.flag,n,e.idParams)},cellDbclick:function(e,n,i,a){if("Job"===t){var o=n.property;if(dt()(ht.a.statusColor).includes(o)&&e[o]>0){var r=ht.a.statusColor[o].split("-")[1];VUE.$router.push({path:"/list",query:{type:"PDC",keywords:ge()({Status:"全部"!==r?r:"",jobName:e.jobName})}})}}else if("PDF"===t||"singleJob"===t){"status"===n.property&&VUE.$reqGet(DCURL.url,{flag:"获取PDF状态信息",jobName:e.jobName,pdfName:e.pdfName}).then(function(e){e&&e.CONTENT.msg&&VUE.$alert(e.CONTENT.msg,"提示",{cancelButtonText:"取消",type:"info"})})}},filterSetting:[{prop:"OpTime",show:function(e){return-1==e?"":formatTime(e)}},{prop:"End Time",show:function(e){return-1==e?"":formatTime(e)}},{prop:"AppOptime",show:function(e){return-1==e?"":formatTime(e)}},{prop:"Start Time",show:function(e){return-1==e?"":formatTime(e)}},{prop:"Status",show:function(e){return!0===e?"激活":!1===e?"挂起":e}}]}),form:new dc.Form({inline:!0,size:"mini",labelWidth:"auto",labelPosition:"center",nextTick:function(){e.setTableHeight()}}),flag:"",idParams:null,keywords:null,showSearch:!0,loading:!1}},created:function(){var e=this;this.$route.query.type;this.initData(this.$route),this.form.set(ht.a.searshConfig[this.formParams]),this.$addListener("refreshTable",function(){e.refresh()}),this.$nextTick(function(){e.form.refresh=e.refresh}),window.onresize=function(){e.setTableHeight(e.showSearch)},this.table.cellStyle=function(e,t,n){if(ht.a.statusColor.hasOwnProperty(t)){var i=VUE.$route.query.type;for(var a in ht.a.statusColor)if(a===t&&n[a]>0){var o={background:ht.a.statusColor[a].split("-")[0]};return"Job"===i&&(o.cursor="pointer"),o}}if("status"===t.toLowerCase()){if("boolean"!=typeof e){var r={cursor:"pointer"};for(var s in ht.a.statusColor)if(e===ht.a.statusColor[s].split("-")[1])return r.background=ht.a.statusColor[s].split("-")[0],r;return r}return e?{color:"green"}:{color:"red"}}},this.table.formData=this.form.data,this.pdfGetCDC()},destroyed:function(){window.onresize=null,this.$cancelEvent("refreshTable")},watch:{$route:function(e,t){var n=this;t.query.hisOpTime||(this.keywords=null,this.form.data={},this.table.currentPage=1,this.$emitEvent("resetHisTime"),e.query.keywords&&(this.keywords=JSON.parse(e.query.keywords)),this.initData(e),this.table.selection=[],this.$nextTick(function(){n.setTableHeight(n.showSearch),e.query.keywords&&(n.form.data.Status=JSON.parse(e.query.keywords).Status)}),this.$store.commit("setHisOpTime",""),this.pdfGetCDC())},width:function(e){this.table.width=e},formParams:function(e){for(var t in ht.a.searshConfig[e].data)ht.a.searshConfig[e].data[t]="";this.form.set(ht.a.searshConfig[e])},searchParams:{deep:!0,handler:function(e,t){this.keywords=e,this.table.currentPage=1}},showSearch:function(e){var t=this;this.$nextTick(function(){t.setTableHeight(e)})}},computed:{width:function(){return this.$store.state.tableWidth},formParams:function(){switch(this.$route.query.type){case"PDF":return"pdf";case"singleJob":return"singleJob";case"Job":return"job";case"PDC":return"pdc";case"singlePDF":return"singlePDF";default:return""}},searchParams:function(){return this.form.data}},methods:{getTableData:function(e,t,n){var i=this,a=void 0;if(this.keywords){for(var o in a={},this.keywords)if(""===this.keywords[o]||null===this.keywords[o]||this.keywords[o]instanceof Array||(a[o]=this.keywords[o]),this.keywords[o]instanceof Array){a[o]=[];for(var r=0;r<this.keywords[o].length;r++)a[o][r]=formatTime(this.keywords[o][r]+":00")}"{}"==ge()(a)&&(a=null)}var s={flag:e,pageNo:t.currentPage,pageSize:t.currentSize,keyword:a||""};if("singlePDF"!==this.$route.query.type&&"singleJob"!==this.$route.query.type||(s.hisOpTime=this.$store.state.opTime),s.keyword&&s.keyword.hisOpTime&&(s.hisOpTime=formatTime(s.keyword.hisOpTime+":00"),this.$store.commit("setHisOpTime",s.hisOpTime),a.hisOpTime=void 0),this.$route.query.hisOpTime){s.hisOpTime=this.$route.query.hisOpTime;var l=_()({},this.$route.query);delete l.hisOpTime,this.$router.push({query:l})}n&&(s=_()(s,n)),this.loading=!0,this.$reqGet(DCURL.url,s).then(function(e){if(e){i.$route.query.type;i.table.setTableData(e.CONTENT.tableData,e.CONTENT.tableHead);var t=i.table.tableHead;i.table.total=e.CONTENT.total,(e.CONTENT.appOpTime||s.hisOpTime)&&(i.$emitEvent("setHisTime",e.CONTENT.appOpTime||s.hisOpTime&&formatTime(s.hisOpTime)),i.$route.query.type.includes("single")||(i.form.data.hisOpTime=s.hisOpTime&&formatTime(s.hisOpTime)||"")),i.table.colsWidth=[],i.table.sortArr=[],t.forEach(function(e){var t=ht.a.colsWidth;t[e.name]&&i.table.colsWidth.push({prop:e.name,width:t[e.name]}),"handle"!==e.name&&"Status"!==e.name&&i.table.sortArr.push(e.name)}),t.unshift({name:"handle",label:"操作",type:"string"}),i.table.colsWidth.push({prop:"handle",width:"46px"})}i.$nextTick(function(){i.loading=!1})}).catch(function(e){i.$nextTick(function(){i.loading=!1})})},initData:function(e){switch(e.query.type){case"Job":this.flag=DCURL.flag.allJobs,this.idParams=null;break;case"PDF":this.flag=DCURL.flag.allPDF,this.idParams=null;break;case"singleJob":this.flag=DCURL.flag.singleJob,this.idParams={jobId:e.query.jobId};break;case"singlePDF":this.flag=DCURL.flag.singlePDF,this.idParams={jobId:e.query.jobId,pdfId:e.query.id};break;case"PDC":this.flag=DCURL.flag.allPDC}this.flag&&this.getTableData(this.flag,this.table,this.idParams)},refresh:function(){this.initData(this.$route)},setTableHeight:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.documentElement.clientHeight,n=this.$refs.form.$el.offsetHeight;this.table.height=e?t-158-n+"px":t-176+"px"},resetSearch:function(){if(this.keywords){for(var e in this.keywords)this.keywords[e]="";this.$emitEvent("resetHisTime"),this.refresh()}},pdfGetCDC:function(){var e=this,t=this.$route.query.type;"singlePDF"!==t&&"PDC"!==t||this.$reqGet(DCURL.url,{flag:"获取所属CDC",pdfId:"singlePDF"===t?this.$route.query.id:""}).then(function(t){if(t){var n=t.CONTENT.datas.map(function(e){return{value:e.cdcName,label:e.label}}),i=e.form.structure.findIndex(function(e){return"cdcName"===e.name});i>-1&&(e.form.structure[i].option=n)}})}}},mt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"status-list"},[n("div",{staticClass:"btns"},[n("el-button",{staticClass:"fa fa-refresh",attrs:{title:"刷新",size:"mini"},on:{click:e.refresh}}),e._v(" "),n("el-button",{staticClass:"fa fa-undo",attrs:{title:"重置搜索",size:"mini"},on:{click:e.resetSearch}}),e._v(" "),e.showSearch?n("el-button",{staticClass:"fa fa-eye-slash",attrs:{title:"隐藏搜索栏",size:"mini"},on:{click:function(t){e.showSearch=!1}}}):n("el-button",{staticClass:"fa fa-eye",attrs:{title:"显示搜索栏",size:"mini"},on:{click:function(t){e.showSearch=!0}}}),e._v(" "),n("handle-mutli",{staticClass:"handle-mutli",attrs:{handleList:e.handleList,selection:e.table.selection,table:e.table}})],1),e._v(" "),n("dc-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"form",attrs:{object:e.form}}),e._v(" "),n("dc-table",{class:{"only-table":!e.showSearch},attrs:{object:e.table}})],1)},staticRenderFns:[]};var gt=n("VU/8")(pt,mt,!1,function(e){n("aix4")},"data-v-0680c61e",null).exports,vt={components:{},props:["data"],data:function(){return{}},created:function(){},watch:{},computed:{handleItems:function(){var e="";switch(this.$route.query.type.toLowerCase()){case"job":e="job";break;case"pdf":case"singlejob":e="pdf";break;case"pdc":case"singlepdf":e="pdc"}return ht.a.handle[e]?ht.a.handle[e]:[]},placement:function(){return"singlePDF"===this.$route.query.type||"PDC"===this.$route.query.type?"right":"bottom"}},methods:{handleCommand:function(e){this.handleItems[e].click(this.data.row,this.data.table)}}},bt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn"},[n("el-dropdown",{attrs:{placement:e.placement,trigger:"click"},on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[n("img",{staticClass:"handle",attrs:{src:"monitor/static/images/phone_operator_24.png",alt:""}})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.handleItems,function(t,i){return n("el-dropdown-item",{key:i,attrs:{command:i}},[e._v(e._s(t.label))])}))],1)],1)},staticRenderFns:[]};var wt=n("VU/8")(vt,bt,!1,function(e){n("jnUH")},"data-v-7d3a8546",null).exports,yt={components:{},props:["data"],data:function(){return{}},created:function(){},watch:{},computed:{},methods:{getLog:function(){var e=this;this.data.row[this.data.name];this.$reqGet(DCURL.url,{flag:DCURL.flag.pdfLog,jobId:this.$route.query.jobId?this.$route.query.jobId:this.data.row.jobId,pdcName:this.data.row.Name||this.data.row.name}).then(function(t){if(t){var n=new dc.Dialog({title:"执行详情",component:"log-content",width:"60%",top:"6vh",data:{tabs:t.CONTENT,name:e.data.row.Name}});e.$openDialog(n)}})}}},Nt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",{attrs:{title:"查看执行详情"},on:{click:this.getLog}},[this._v(this._s(this.data.row.Msg&&(this.data.row.Msg.length>6?this.data.row.Msg.slice(0,3)+"...":this.data.row.Msg)))])])},staticRenderFns:[]};var Dt=n("VU/8")(yt,Nt,!1,function(e){n("YnN1")},"data-v-600b23a4",null).exports,Tt={components:{},props:["propData"],data:function(){return{tabs:[]}},created:function(){this.tabs=this.propData.tabs.tabs},watch:{},computed:{bodyHeight:function(){return this.$store.state.bodyHeight}},methods:{format:function(e){return e?e.replace(/\n/g,"<br>"):""},saveLog:function(){var e="";this.tabs.length>0&&this.tabs.forEach(function(t,n){e+=t.title+":\n"+t.value+"\n"});var t=new Blob([e]),n=window.URL||window.webkitURL||window,i=n.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=this.propData.name+".txt",a.click(),n.revokeObjectURL(i)}}},xt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"border-card"}},e._l(e.tabs,function(t,i){return n("el-tab-pane",{key:i,attrs:{label:t.title}},[n("div",{staticClass:"log-body",style:"height: "+.55*e.bodyHeight+"px",domProps:{innerHTML:e._s(e.format(t.value))}})])})),e._v(" "),n("div",{staticClass:"btns"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.saveLog}},[e._v("保存日志")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:e.$closeDialog}},[e._v("关闭")])],1)],1)},staticRenderFns:[]};var Et=n("VU/8")(Tt,xt,!1,function(e){n("MQE0")},"data-v-5c63405a",null).exports,kt="all";var Ct=function(e,t,n,i){var a=t.id.lastIndexOf("<"),o="job"===i?t.id.slice(0,a):t.id,r="job"===i?t.id.slice(a+1,-1):"MainJob",s=e.$parent.jobId?e.$parent.jobId:VUE.$route.query.jobId;return[{text:"视图展开",icon:"fa fa-expand",show:function(){return t.viewNodeFlag},iconColor:"blue",click:function(){e.nodeObj.zoom(e,t),e.flow.contextmenu.hideMenu()}},{text:"查看表单",icon:"fa fa-eye",iconColor:"green",show:function(){return"MainJob"===r},click:function(){e.flow.nodeDbClick(n,t,e),e.flow.contextmenu.hideMenu()}},{text:"查看作业日志",icon:"fa fa-file-text-o",iconColor:"blue",show:function(){return"MainJob"===r},click:function(){VUE.$reqGet(DCURL.url,{flag:DCURL.flag.pdfLog,jobId:s,pdcName:o}).then(function(e){if(e){var t=new dc.Dialog({title:"执行详情",component:"log-content",width:"60%",top:"6vh",data:{tabs:e.CONTENT,name:o}});VUE.$openDialog(t)}})}},{text:"激活",icon:"fa fa-play-circle",iconColor:"green",show:function(){return"MainJob"===r},click:function(){VUE.$affirm("此操作将会改变该调度的状态，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:o,flag:"激活挂起调度点",isactive:!0,jobId:s}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})}},{text:"挂起",icon:"fa fa-pause-circle",iconColor:"red",show:function(){return"MainJob"===r},click:function(){VUE.$affirm("此操作将会改变该调度的状态，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:o,flag:"激活挂起调度点",isactive:!1,jobId:s}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})}},{text:"重置运行状态",icon:"fa fa-mail-reply-all",iconColor:"#ffb84d",show:function(){return"MainJob"===r},click:function(e){VUE.$affirm("此操作将会重置运行状态，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:o,flag:"重置调度点",jobId:s}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})}},{text:"重置影响节点",icon:"fa fa-mail-reply",iconColor:"#ffb84d",show:function(){return"MainJob"===r},click:function(e){VUE.$affirm("此操作将会重置影响节点，是否继续？").then(function(){VUE.$reqGet(DCURL.url,{pdcName:o,flag:"重置影响节点",jobId:s}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$emitEvent("refreshTable"))})})}},{text:"忽略错误",icon:"fa fa-exclamation-circle",iconColor:"orange",show:function(){return"MainJob"===r},click:function(e){VUE.$prompt("请输入忽略的信息","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;VUE.$reqGet({url:"action=DCView.callJavaFunc2&Class=com.leavay.dc.runtime.JobMgr&FUNC=ignorePDCFailedByPDCJobName",params:{jobId:s,pdcJobName:t.id.includes("<MainJob>")?t.id:o+"<MainJob>",sIgnoreMsg:n}}).then(function(e){e&&VUE.$successMessage("操作成功！")})})}},{text:"切换调度队列",icon:"fa fa-exchange",iconColor:"blue",show:function(){return"MainJob"===r},click:function(e){e={jobId:s},ht.a.changeItem("切换调度队列","queue",e,function(e,t){""!==t.value?VUE.$reqGet(DCURL.url,{jobId:s,pdcName:o,groupPath:t.data[t.value].groupPath,queueName:t.data[t.value].queueName,flag:"切换调度点队列"}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable"))}):VUE.$closeDialog()})}},{text:"指定代理机",icon:"fa fa-hand-pointer-o",iconColor:"blue",show:function(){return"MainJob"===r},click:function(e){ht.a.changeItem("指定代理机","agent",e,function(e,t){""!==t.value?VUE.$reqGet("UDF=WebJobMgrUDF&FUNC=changePDCAgent",{jobId:s,pdcName:o,agentName:t.value}).then(function(e){e&&(VUE.$successMessage("操作成功"),VUE.$closeDialog(),VUE.$emitEvent("refreshTable"))}):VUE.$closeDialog()})}},{text:"设置优先级",iconColor:"blue",icon:"fa fa-pencil-square-o",show:function(){return"MainJob"===r},click:function(e){VUE.$prompt("设置优先级（1-100）","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var t=e.value;t&&VUE.$reqGet(DCURL.url,{jobId:s,pdcName:o,priority:parseInt(t),flag:"切换调度点优先级"}).then(function(e){e&&(VUE.$successMessage("设置成功"),VUE.$emitEvent("refreshTable"))})})}},{text:"显示亲缘节点",icon:"fa fa-share-alt",iconColor:"#ff461f",click:function(){e.nodeObj.getSkinship(e,kt),e.flow.contextmenu.hideMenu()}}]};var Ft={job:{req:{getStatus:{url:"UDF=WebJobMgrUDF&FUNC=getPDCStates",data:{flowName:"jobId"}},getNodesTip:{url:"UDF=WebPDFMgrUDF&FUNC=getPDCMsg",data:{flowName:"jobId"}},getFlow:{url:"UDF=WebJobMgrUDF&FUNC=getJobFlow",data:{flowName:"jobId"}},getView:{url:"UDF=WebPDFMgrUDF&FUNC=getView",data:{flowName:"id",viewName:"viewId"}},jobStart:{url:"UDF=WebJobMgrUDF&FUNC=startJob",data:{flowName:"jobId",time:"dateTime"}},jobStop:{url:"UDF=WebJobMgrUDF&FUNC=stopJob",data:{flowName:"jobId"}},jobReset:{url:"UDF=WebJobMgrUDF&FUNC=resetAllPDC",data:{flowName:"jobId"}},jobResetError:{url:"UDF=WebJobMgrUDF&FUNC=resetPDFAllErrors",data:{flowName:"jobId"}}},nodeAttrs:["id","label","type","imgSrc","adcLabel","adcName"],nodeFlag:"pdc",flowRun:!0,showStatus:!0,canRemoveLine:!1,isContactAttach:!1,toolbar:[[{icon:"fa fa-refresh",color:"green",title:"刷新",event:{click:function(){this.flow.refreshFlow(this)}}},{icon:"fa fa-play",color:"green",title:"启动",event:{click:function(){var e=this;this.$reqGet("UDF=WebJobMgrUDF&FUNC=getOptime",{jobId:this.flow.flowName}).then(function(e){e&&(t.data.value=e.CONTENT.dateTime)});var t=new dc.Form({labelWidth:"80px",bottomBtnStyle:"float:right",structure:[{label:"调度时间",name:"value",type:"dateTime"}],data:{value:""},btns:[{label:"确定",type:"primary",click:function(t,n,i){e.jobTime=t.data.value,e.flow.startJob(e),e.$closeDialog()}}]});this.$openDialog(new dc.Dialog({title:"启动调度",component:"dc-form",width:"400px",data:{object:t}}))}}},{icon:"fa fa-pause",color:"red",title:"中断",event:{click:function(){this.flow.stopJob(this)}}},{icon:"fa fa-paint-brush",color:"orange",title:"重置错误节点",event:{click:function(){this.flow.resetErrorJob(this)}}},{icon:"fa fa-warning",color:"orange",title:"重置",event:{click:function(){this.flow.resetJob(this)}}},{icon:"fa fa-mail-reply-all",color:"blue",title:"返回上一层",disabled:function(e){return e.vue.layers&&!JSON.parse(window.sessionStorage.getItem(e.vue.layers)).slice(-1).pop()},event:{click:function(){this.flow.modifyFlowLayer(this),this.flow.initFlow(this)}}},{icon:"fa fa-search",color:"blue",title:"搜索",disabled:function(e){return"{}"==ge()(e.vue.nodes)},event:{click:function(){var e=this,t=new dc.Form({labelWidth:"80px",bottomBtnStyle:"float:right",structure:[{label:"节点的id",name:"node"}],data:{node:""},btns:[{label:"确定",type:"primary",click:function(t,n,i){e.flow.searchNode(t.data.node,e),e.$closeDialog()}}]});this.$openDialog(new dc.Dialog({title:"搜索节点",component:"dc-form",data:{object:t}}))}}},{icon:"fa fa-align-left",title:"自动布局",event:{click:function(){this.panelObj.autoLayout(this,this.nodes,this.lines)}}},{title:"切换线的粗细",icon:"fa fa-plug",event:{click:function(){this.linesObj.changeWidth(this)}}},{title:"放大",icon:"fa fa-search-plus",color:"green",event:{click:function(){this.panelObj.zoomIn(this)}}},{title:"缩小",icon:"fa fa-search-minus",color:"green",event:{click:function(){this.panelObj.zoomOut(this)}}},{title:"切换显示标签",icon:"fa fa-exchange",color:"blue",event:{click:function(){this.flow.showLabel=!this.flow.showLabel}}}]],nodeDbClick:function(e,t,n){t.viewNodeFlag?n.nodeObj.intoNode(n):(VUE.indexTabs.from="flow",VUE.indexTabs.addTab({title:"PDC要素",component:"pdc-info",data:{name:t.id}}))},nodeRightClick:function(e,t,n){n.moveOver(),n.flow.contextmenu.showMenu(e,Ct(n,t,e,"job"))}},pdf:{req:{getStatus:{url:"UDF=WebPDFMgrUDF&FUNC=getPDCStates",data:{flowName:"jobId"}},getJobList:{url:"UDF=WebJobMgrUDF&FUNC=listJobByPDF",data:{flowName:"pdfId",pdfName:"id"}},getFlow:{url:"UDF=WebPDFMgrUDF&FUNC=getPDF",data:{flowName:"pdfId"}},getView:{url:"UDF=WebPDFMgrUDF&FUNC=getView",data:{flowName:"id",viewName:"viewId"}},saveFlow:{url:"UDF=WebPDFMgrUDF&FUNC=updatePDF",data:{flowName:"pdfId"}},createView:{url:"UDF=WebPDFMgrUDF&FUNC=addNewView",data:{intoGroup:"intoGroup",viewLabel:"viewLabel",flowName:"pdfId",layer:"parentViewId"}},intoView:{url:"UDF=WebPDFMgrUDF&FUNC=movePDCToView",data:{intoGroup:"intoGroup",viewName:"viewLabel",flowName:"pdfId"}},removeView:{url:"UDF=WebPDFMgrUDF&FUNC=deleteView",data:{viewName:"viewLabel",flowName:"pdfId"}},getPDCTree:{url:"UDF=WebStoryTreeMgrUDF&FUNC=listPDCinPDF"},getPDC:{url:"UDF=WebPDFMgrUDF&FUNC=getImportPDCList",data:{dcName:"cdcId"}},addNode:{url:{pdc:"UDF=WebPDFMgrUDF&FUNC=importPDCIntoPDF",mirror:"UDF=WebPDFMgrUDF&FUNC=importPDCBomIntoPDF",reference:"UDF=WebPDFMgrUDF&FUNC=importReferencePDCIntoPDF"},data:{flowName:"pdfId",dcNames:"pdcNames"}}},nodeAttrs:["id","label","type","imgSrc","adcLabel","adcName"],nodeFlag:"pdc",canRemoveLine:!0,isContactAttach:!0,canNodeIntoView:!0,flowRun:!0,showStatus:!0,toolbar:[[{icon:"fa fa-refresh",color:"green",title:"刷新",event:{click:function(){this.flow.refreshFlow(this)}}},{icon:"fa fa-mail-reply-all",color:"blue",title:"返回上一层",disabled:function(e){return e.vue.layers&&!JSON.parse(window.sessionStorage.getItem(e.vue.layers)).slice(-1).pop()},event:{click:function(){this.flow.modifyFlowLayer(this),this.flow.initFlow(this)}}},{icon:"fa fa-search",color:"blue",title:"搜索",disabled:function(e){return"{}"==ge()(e.vue.nodes)},event:{click:function(){var e=this,t=new dc.Form({labelWidth:"80px",bottomBtnStyle:"float:right",structure:[{label:"节点的id",name:"node"}],data:{node:""},btns:[{label:"确定",type:"primary",click:function(t,n,i){e.flow.searchNode(t.data.node,e),e.$closeDialog()}}]});this.$openDialog(new dc.Dialog({title:"搜索节点",component:"dc-form",data:{object:t}}))}}},{icon:"fa fa-align-left",title:"自动布局",event:{click:function(){this.panelObj.autoLayout(this,this.nodes,this.lines)}}},{title:"切换线的粗细",icon:"fa fa-plug",event:{click:function(){this.linesObj.changeWidth(this)}}},{title:"放大",icon:"fa fa-search-plus",color:"green",event:{click:function(){this.panelObj.zoomIn(this)}}},{title:"缩小",icon:"fa fa-search-minus",color:"green",event:{click:function(){this.panelObj.zoomOut(this)}}},{title:"切换显示标签",icon:"fa fa-exchange",color:"blue",event:{click:function(){this.flow.showLabel=!this.flow.showLabel}}}]],nodeDbClick:function(e,t,n){t.viewNodeFlag?n.nodeObj.intoNode(n):"importance"!==VUE.$route.query.type?(VUE.indexTabs.from="flow",VUE.indexTabs.addTab({title:"PDC要素",component:"pdc-info",data:{name:t.id}})):VUE.importantTabs.addTab({title:"PDC要素",component:"pdc-info",data:{name:t.id}})},nodeRightClick:function(e,t,n){n.moveOver(),n.flow.contextmenu.showMenu(e,Ct(n,t,e,"pdf"))}},importance:{req:{getStatus:{url:"UDF=WebPDFMgrUDF&FUNC=getPDCStates",data:{flowName:"pdfId"}},getJobList:{url:"UDF=WebJobMgrUDF&FUNC=listJobByPDF",data:{flowName:"pdfId",pdfName:"id"}},getFlow:{url:"UDF=WebPDFMgrUDF&FUNC=getPDF",data:{flowName:"pdfId"}},getView:{url:"UDF=WebPDFMgrUDF&FUNC=getView",data:{flowName:"id",viewName:"viewId"}},saveFlow:{url:"UDF=WebPDFMgrUDF&FUNC=updatePDF",data:{flowName:"pdfId"}},createView:{url:"UDF=WebPDFMgrUDF&FUNC=addNewView",data:{intoGroup:"intoGroup",viewLabel:"viewLabel",flowName:"pdfId",layer:"parentViewId"}},intoView:{url:"UDF=WebPDFMgrUDF&FUNC=movePDCToView",data:{intoGroup:"intoGroup",viewName:"viewLabel",flowName:"pdfId"}},removeView:{url:"UDF=WebPDFMgrUDF&FUNC=deleteView",data:{viewName:"viewLabel",flowName:"pdfId"}},getPDCTree:{url:"UDF=WebStoryTreeMgrUDF&FUNC=listPDCinPDF"},getPDC:{url:"UDF=WebPDFMgrUDF&FUNC=getImportPDCList",data:{dcName:"cdcId"}},addNode:{url:{pdc:"UDF=WebPDFMgrUDF&FUNC=importPDCIntoPDF",mirror:"UDF=WebPDFMgrUDF&FUNC=importPDCBomIntoPDF",reference:"UDF=WebPDFMgrUDF&FUNC=importReferencePDCIntoPDF"},data:{flowName:"pdfId",dcNames:"pdcNames"}}},nodeAttrs:["id","label","type","imgSrc","adcLabel","adcName"],nodeFlag:"pdc",canRemoveLine:!0,isContactAttach:!0,canNodeIntoView:!0,flowRun:!1,showStatus:!1,toolbar:[[{icon:"el-icon-refresh",color:"orange",title:'刷新"任务全景图"',event:{click:function(){VUE.$confirm('此操作将刷新"任务全景图", 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){VUE.$reqGet(DCURL.url,{flag:"更新可访问PDF"})})}}},{icon:"fa fa-refresh",color:"green",title:"刷新",event:{click:function(){this.flow.refreshFlow(this)}}},{icon:"fa fa-search",color:"blue",title:"搜索",disabled:function(e){return"{}"==ge()(e.vue.nodes)},event:{click:function(){var e=this,t=new dc.Form({labelWidth:"80px",bottomBtnStyle:"float:right",structure:[{label:"节点的id",name:"node"}],data:{node:""},btns:[{label:"确定",type:"primary",click:function(t,n,i){e.flow.searchNode(t.data.node,e),e.$closeDialog()}}]});this.$openDialog(new dc.Dialog({title:"搜索节点",component:"dc-form",data:{object:t}}))}}},{icon:"fa fa-align-left",title:"自动布局",event:{click:function(){this.panelObj.autoLayout(this,this.nodes,this.lines)}}},{title:"切换线的粗细",icon:"fa fa-plug",event:{click:function(){this.linesObj.changeWidth(this)}}},{title:"放大",icon:"fa fa-search-plus",color:"green",event:{click:function(){this.panelObj.zoomIn(this)}}},{title:"缩小",icon:"fa fa-search-minus",color:"green",event:{click:function(){this.panelObj.zoomOut(this)}}},{title:"切换显示标签",icon:"fa fa-exchange",color:"blue",event:{click:function(){this.flow.showLabel=!this.flow.showLabel}}}]],nodeDbClick:function(e,t,n){},nodeRightClick:function(e,t,n){n.moveOver();var i=[{text:"打开PDF流图",icon:"fa fa-file-text",iconColor:"blue",click:function(){VUE.$reqGet(DCURL.url,{flag:"获取PDF的Jobs",id:t.id}).then(function(e){e&&e.CONTENT.data.length>0?VUE.importantTabs.addTab({title:t.label+"("+e.CONTENT.data[0].jobName+")",component:"status-flow",data:{node:t,jobList:e.CONTENT.data,title:t.label}}):e&&VUE.$message("没有对应的job")}),n.flow.contextmenu.hideMenu()}}];n.flow.contextmenu.showMenu(e,i)}}},St={components:{},props:[],data:function(){var e=ht.a.statusColor,t=[];for(var n in e){var i=n.split(" ")[0]+(n.split(" ")[1]?n.split(" ")[1]:"");"全部"!==e[n].split("-")[1]&&"等待中"!==e[n].split("-")[1]&&t.push({key:i,label:e[n].split("-")[1]})}return{iconArr:t}},created:function(){},watch:{},computed:{},methods:{}},_t={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"status-icons"},e._l(e.iconArr,function(t){return n("span",{key:t.name},[n("img",{attrs:{src:"monitor/static/images/status/"+t.key+".gif",alt:""}}),e._v(" "),n("span",{staticClass:"text"},[e._v(e._s(t.label))])])}))},staticRenderFns:[]};var Ut={components:{"status-icon":n("VU/8")(St,_t,!1,function(e){n("5FHf")},"data-v-6cbfe8c0",null).exports},props:["propData"],data:function(){var e=this,t=void 0,n=this.$route.query.type;switch(n){case"singlePDF":t="pdf";break;case"singleJob":t="job";break;case"importance":t=this.propData?"pdf":"importance"}var i=_()(Ft[t],{showLabel:!0,flowName:this.propData?this.propData.node.id:this.$route.query.id,showStatus:!0,getFlow:function(t){var i=this;t.flowLoading=!0;var a={};"singleJob"===n?(a.jobId=e.$route.query.jobId,a.flag=DCURL.flag.getJobFlow):"singlePDF"===n?(a.pdfId=e.$route.query.id,a.flag=DCURL.flag.getPDFFlow):"importance"===n&&(a.flag="重点任务",e.propData&&(a.pdfId=e.propData.node.id,a.flag=DCURL.flag.getPDFFlow)),t.$reqGet(DCURL.url,a).then(function(e){e&&i.getFlowFinished(t,e),t.flowLoading=!1})},jobReset:function(){VUE.$reqGet(DCURL.url,{flag:DCURL.flag.jobResetAll,jobId:VUE.$route.query.id})}});return this.propData&&(i.showStatus=!0,t="importance"),{flow:new dc.NodeFlow(i),height:"100%",jobId:""}},created:function(){var e=this;if(this.propData&&(this.jobId=this.propData.jobList[0].jobId,this.flow.jobId=this.jobId),this.$nextTick(function(){e.$nextTick(function(){e.$store.commit("updateTableWidth")}),e.height=document.documentElement.clientHeight-80+"px"}),this.propData&&this.propData.jobList.length>1){var t=this;this.flow.toolbar[0].push({title:"切换Job",icon:"fa fa-exchange",color:"blue",event:{click:function(){VUE.$openDialog({title:"切换job",component:"selectJob",width:"280px",data:{vue:t,jobList:t.propData.jobList}})}}})}this.$addListener("flowRunToggle",function(t){t?e.flow.statusContorl||e.flow.startGetStatus():e.flow.statusContorl&&e.flow.stopGetStatus()}),this.$addListener("refreshFlow",function(){e.flow&&e.flow.refreshFlow(e)})},destroyed:function(){this.$cancelEvent("refreshFlow"),this.$cancelEvent("flowRunToggle")},watch:{jobId:function(e,t){if(t){this.flow.jobId=this.jobId;var n=this.propData.jobList.findIndex(function(e){return e.jobId===t}),i=this.propData.title+"("+this.propData.jobList[n].jobName+")";n=this.propData.jobList.findIndex(function(t){return t.jobId===e});this.propData.title,this.propData.jobList[n].jobName;VUE.importantTabs.updateTitle(i,e)}},$route:function(){this.flow.stopGetStatus()}},computed:{type:function(){return this.$route.query.type},width:function(){return this.$store.state.tableWidth}},methods:{}},Ot={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flow-container",style:"width: "+e.width+"; height: "+e.height},["singleJob"===e.type||"singlePDF"===e.type||"importance"===e.type?n("dc-flow",{attrs:{object:e.flow}}):e._e(),e._v(" "),e.flow.flowRun?n("status-icon"):e._e()],1)},staticRenderFns:[]};var It=n("VU/8")(Ut,Ot,!1,function(e){n("GERO")},"data-v-12c624a9",null).exports,$t={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.data,function(t,i){return"queue"===e.propData.type?n("div",{key:i},[n("el-radio",{attrs:{label:i},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[e._v(e._s(t.groupPath?t.groupPath+"/"+t.queueName:t.queueName))])],1):e._e()}),e._v(" "),"agent"===e.propData.type?n("div",[n("el-radio",{attrs:{label:void 0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("span",{staticClass:"agent-name",staticStyle:{color:"red"}},[e._v("取消代理机（将不指定代理机）")])])],1):e._e(),e._v(" "),e._l(e.data,function(t,i){return"agent"===e.propData.type?n("div",{key:i},[n("el-radio",{attrs:{label:t.name},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("span",{staticClass:"agent-name"},[e._v("代理："+e._s(t.name))]),e._v(" "),n("span",{staticClass:"agent-load"},[e._v("负载："+e._s(t.load))]),e._v(" "),n("span",{staticClass:"agent-status"},[e._v("状态："+e._s(t.status?"启用":"禁用"))]),e._v(" "),n("span",[e._v("内存："+e._s(t.memory))])])],1):e._e()})],2)},staticRenderFns:[]};var Lt=n("VU/8")({components:{},props:["propData"],data:function(){return{data:[],value:""}},created:function(){var e=this,t=void 0,n=void 0,i=this.propData.type;switch(i){case"queue":t="UDF=WebJobMgrUDF&FUNC=listAllChildQueue",n={jobId:this.$route.query.jobId?this.$route.query.jobId:this.propData.row.jobId};break;case"agent":t="UDF=WebAgentMgrUDF&FUNC=listAgentMsg",this.value=this.propData.row?this.propData.row.Agent:"",n={}}this.$reqGet(t,n).then(function(t){if(t)if("queue"===i)e.data=t.CONTENT.queues;else if("agent"===i){var n=t.CONTENT.tableData;e.data=n}})},watch:{},computed:{},methods:{}},$t,!1,function(e){n("LDyy")},"data-v-14e4edaa",null).exports,jt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabs,function(t){return n("el-tab-pane",{key:t.id,staticClass:"tab-item",attrs:{label:t.label,name:t.id}},[n(t.type,{tag:"component",style:"height: "+e.height+"px;width: "+e.width+"px",attrs:{propData:{item:t,data:e.data}}})],1)}))],1)},staticRenderFns:[]};var Rt=n("VU/8")({components:{},props:["propData"],data:function(){return{tabs:[],activeName:"",data:{}}},created:function(){var e=this;this.$reqGet("UDF=WebPDCMgrUDF&FUNC=showPDC",{guid:this.propData.name}).then(function(t){if(t){e.data=t.CONTENT;var n=t.CONTENT.treeList;e.tabs=n.reduce(function(e,t){if(t.children.length>0){for(var n=0;n<t.children.length;n++)e.push(t.children[n]);return e}return"entityDefinition"!==t.type&&e.push(t),e},[]),e.activeName=e.tabs[0].id}})},watch:{},computed:{height:function(){return this.$store.state.bodyHeight-130},width:function(){return this.$store.state.bodyWidth-200}},methods:{}},jt,!1,function(e){n("tD9v")},"data-v-58c9a09a",null).exports,Pt={components:{},props:["propData"],data:function(){return{data:[]}},created:function(){var e=this,t=this.propData.item.structure,n=this.propData.data.data.featureType;this.data=t.map(function(t){return t.value=n[t.name]?n[t.name]:t.value,"DataSet"===t.type&&(e.$set(t,"show",!1),t.table=new dc.Table({hasPage:!1,tableHead:t.tableHead,tableData:t.value,height:"200px"})),"String"===t.type&&(t.type="textarea"),t})},watch:{},computed:{},methods:{}},Vt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",e._l(e.data,function(t){return n("li",{key:t.name},[n("span",{staticClass:"item-label"},[e._v("\n                "+e._s(t.label)+"\n                "),n("sup",[t.toolTips?n("el-tooltip",{attrs:{placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.toolTips))]),e._v(" "),n("i",{staticClass:"el-icon-question"})]):e._e()],1)]),e._v(" "),"DataSet"===t.type?n("div",{staticClass:"item-content"},[n("el-button",{staticClass:"dataset-btn",attrs:{size:"mini"},on:{click:function(e){t.show=!t.show}}},[e._v("\n                    数据集内容"),t.show?e._e():n("i",{staticClass:"el-icon-caret-top"}),e._v(" "),t.show?n("i",{staticClass:"el-icon-caret-bottom"}):e._e()]),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"}},[t.show?n("div",{staticClass:"dataset-table"},[n("dc-table",{staticClass:"table",attrs:{object:t.table}})],1):e._e()])],1):"SingleEnum"===t.type?n("span",{staticClass:"el-input el-input--mini el-input__inner"},[e._v(e._s(t.option[t.option.findIndex(function(e){return e.value==t.value})].label))]):"Boolean"===t.type?n("span",{staticClass:"el-input el-input--mini el-input__inner"},[e._v(e._s(t.value?"是":"否"))]):n("span",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"item.value"}],staticClass:"text-input el-input el-input--mini el-input__inner"},[e._v(e._s(t.value)+"\n            ")])])}))])},staticRenderFns:[]};var Mt=n("VU/8")(Pt,Vt,!1,function(e){n("XZad")},"data-v-3f3346f4",null).exports,qt={components:{},props:["propData"],data:function(){return{data:{},structure:{},form:null,table:null,advForm:null}},created:function(){this.data=this.propData.data.data[this.propData.item.id],this.structure=this.propData.item.tableEntityStructrue,this.form=new dc.Form({data:this.data.head,structure:this.structure.head,inline:!0,size:"mini",labelWidth:"auto",readOnly:!0}),this.table=new dc.Table({hasPage:!1,tableData:this.data.tableData,tableHead:this.structure.tableHead,height:this.tableHeight}),this.advForm=new dc.Form({size:"mini",data:this.data.advSetting,structure:this.structure.advSetting})},watch:{},computed:{tableHeight:function(){return this.$store.state.bodyHeight-276+"px"}},methods:{}},At={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e._v("\n        启用实体定义： \n        "),n("el-switch",{attrs:{disabled:!0},model:{value:e.data.exist,callback:function(t){e.$set(e.data,"exist",t)},expression:"data.exist"}})],1),e._v(" "),e.form?n("dc-form",{attrs:{object:e.form}}):e._e(),e._v(" "),n("el-tabs",[n("el-tab-pane",{attrs:{label:"表结构"}},[e.table?n("dc-table",{attrs:{object:e.table}}):e._e()],1),e._v(" "),n("el-tab-pane",{attrs:{label:"高级设置"}},[e.advForm?n("dc-form",{attrs:{object:e.advForm}}):e._e()],1)],1)],1)},staticRenderFns:[]};var Gt=n("VU/8")(qt,At,!1,function(e){n("G8Yg")},"data-v-c77dda5a",null).exports,Bt={components:{},props:["propData"],data:function(){return{form:null}},created:function(){var e=this.propData.data.data[this.propData.item.id],t=this.propData.item.structure;this.form=new dc.Form({size:"mini",data:e,structure:t})},watch:{},computed:{},methods:{}},Ht={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.form?t("dc-form",{attrs:{object:this.form}}):this._e()],1)},staticRenderFns:[]};var zt=n("VU/8")(Bt,Ht,!1,function(e){n("x/KU")},"data-v-7e73ab7a",null).exports,Wt={components:{},props:["propData"],data:function(){return{hisOpTime:"",pickerOptions:{shortcuts:[{text:"2018-10-17 13:30:00",onClick:function(){}}]},show:!1}},created:function(){var e=this;this.getOptions(),this.$addListener("resetHisTime",function(){e.$store.commit("setOpTime",""),e.hisOpTime=""}),this.$addListener("setHisTime",function(t){e.$store.commit("setOpTime",1e3*parseInt(formatTime(t)/1e3)),e.hisOpTime=t})},destroyed:function(){this.$cancelEvent("resetHisTime"),this.$cancelEvent("setHisTime")},watch:{$route:function(e){this.hisOpTime="",this.$store.commit("setOpTime",""),"singlePDF"!==e.query.type&&"singleJob"!==e.query.type||this.getOptions()}},computed:{},methods:{getOptions:function(){var e=this;this.$reqGet(DCURL.url,{flag:"获取Job历史执行数据时间",jobId:this.$route.query.jobId}).then(function(t){if(t){var n=t.CONTENT.hisOpTime;n&&n.length>0&&(n=n.map(function(e){return{text:e.label,onClick:function(t){t.$emit("pick",new Date(e.value))}}})),e.pickerOptions.shortcuts=n}})},timeChange:function(e){e?this.$store.commit("setOpTime",1e3*parseInt(formatTime(e)/1e3)):this.$store.commit("setOpTime",""),this.$emitEvent("refreshTable")}}},Jt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-date-picker",{attrs:{size:"mini",type:"datetime",placeholder:"选择日期时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},on:{change:e.timeChange},model:{value:e.hisOpTime,callback:function(t){e.hisOpTime=t},expression:"hisOpTime"}})],1)},staticRenderFns:[]};var Yt=n("VU/8")(Wt,Jt,!1,function(e){n("GlsT")},"data-v-b03052ce",null).exports,Kt={"Checking Condition":"#FFC0CB",Pooling:"#0000CD",Running:"#FFFF00",Suspend:"#87CEFA",Total:"#bacac6","Run Failed":"#FF0000","Ignore Fail":"#FFA500",Terminated:"#FF00FF","Run OK":"#32CD32",Waiting:"#f3f9f1","启动条件":"#FFC0CB","正在排队":"#0000CD","正在运行":"#FFFF00","挂起":"#87CEFA","运行失败":"#FF0000","忽略错误":"#FFA500","强制终止":"#FF00FF","运行成功":"#32CD32","等待中":"#f3f9f1"},Xt=function(e,t,n){return e>0&&Kt.hasOwnProperty(t)?{background:Kt[t]}:Kt.hasOwnProperty(n[t])&&n[t]?{background:Kt[n[t]]}:void 0},Qt=[{title:"信息",attr:"msg"},{title:"错误堆栈",attr:"Error_Detail"},{title:"Trace日志",attr:"Trace"}],Zt={name:"historyTable",props:["propData"],data:function(){var e=this;return{loading:!1,table:new dc.Table({align:"center",height:"320px",hasPage:!0,hasSearch:!1,hasBtn:!0,btnGroup:[{icon:"fa fa-refresh",color:"green",title:"刷新",click:function(t,n,i){e.initData()}}],sizeChange:function(t){e.initData()},pageChange:function(t){e.initData()},rowDbClick:function(t,n){e.getLog(n)}})}},created:function(){var e=this;this.$nextTick(function(){e.initData()})},methods:{initData:function(){var e=this;this.loading=!0;var t={pageNo:this.table.currentPage,pageSize:this.table.currentSize};_()(t,this.propData.params),this.$reqGet(this.propData.url,t).then(function(t){e.loading=!1,t?(e.table.setTableData(t.CONTENT.tableData,t.CONTENT.tableHead),e.table.cellStyle=Xt):e.$closeDialog()}).catch(function(t){e.$closeDialog()})},getLogRes:function(e){var t=Qt.filter(function(t){return!!e[t.attr]});return t.length||t.push(Qt[0]),t.map(function(t){return{CONTENT:{title:t.title,value:e[t.attr]}}})},getLog:function(e){var t=this,n=[{text:"取消",type:"primary",size:"small",click:function(e){e.show=!1}}];Qt.slice(1).forEach(function(i){e[i.attr]&&n.unshift({text:"下载"+i.title,size:"small",click:function(){t.$downLoadFile(e[i.attr],i.title+".log")}})}),this.$openDialog(new dc.Dialog({top:"40px",width:"700px",component:"tabsForm",data:{res:this.getLogRes(e)},hasBtn:!0,btnGroup:n}))}}},en={render:function(){var e=this.$createElement;return(this._self._c||e)("dc-table",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],attrs:{object:this.table}})},staticRenderFns:[]};var tn=n("VU/8")(Zt,en,!1,function(e){n("RpMH")},"data-v-cf3a1f18",null).exports,nn=n("bOdI"),an=n.n(nn),on={name:"timeRule",data:function(){return{btnConfig:[{title:'新增"与"逻辑',class:"",color:"#000",label:"and",methods:this.addAnd},{title:'新增"或"逻辑',class:"",color:"#000",label:"or",methods:this.addOr},{title:"过滤规则",class:"fa fa-filter",color:"blue",label:"",methods:this.addFilter},{title:"时间点规则",class:"fa fa-history",color:"#000",label:"",methods:this.addTime},{title:"循环间隔规则",class:"fa fa-circle-o-notch",color:"green",label:"",methods:this.addCycle},{title:"秒级规则",class:"fa fa-clock-o",color:"blue",label:"",methods:this.addSecond},{title:"用户自定义规则",class:"fa fa-file-text-o",color:"#000",label:"",methods:this.addDefine},{title:"删除",class:"fa fa-remove",color:"red",label:"",methods:this.removeNode}],currentNode:{},date:"",time:"",ruleTree:[],expandedKeys:[],currentNodeParent:{},currentNodeIndex:0,timeList:[]}},props:["data","timeRule"],created:function(){var e=this;this.$nextTick(function(){var t=0;e.timeRule&&e.timeRule.flag&&(!function n(i){e.expandedKeys.push(t),i.id=t,t++,i.children&&i.children.length>0&&i.children.forEach(function(e){n(e)})}(e.timeRule),e.ruleTree.push(e.timeRule),e.currentNode=e.timeRule,setTimeout(function(){e.$refs.ruleTree.setCurrentKey(0)},40))})},methods:{btnClick:function(e){},setDisabled:function(e){var t=this.currentNode.flag;return!!t&&("Or"!==t&&"And"!==t&&"删除"!==e.title)},handleNodeClick:function(e){this.currentNode=e},addAnd:function(){var e={value:"and",flag:"And",ignoreDate:!1,id:(new Date).getTime(),children:[]};this.addNode(e)},addOr:function(){var e={value:"or",flag:"Or",id:(new Date).getTime(),children:[]};this.addNode(e)},addFilter:function(){var e={value:"",flag:"Rule",ruleMap:{Year:"",Month:"",Day:"",Hour:"",DayOfWeek:"",Min:""},id:(new Date).getTime(),children:[],icon:"fa fa-filter"};this.addNode(e)},addTime:function(){var e={timeOperator:2,ignoreDate:!1,date:this.getTimeString("date"),time:this.getTimeString("time"),flag:"Rule_Time_Point",id:(new Date).getTime(),children:[],icon:"fa fa-history"};this.addNode(e)},addCycle:function(){var e={intervalMins:1,ignoreDate:!1,date:this.getTimeString("date"),time:this.getTimeString("time"),flag:"Rule_Cycle",id:(new Date).getTime(),children:[],icon:"fa fa-circle-o-notch"};this.addNode(e)},addSecond:function(){var e={intervalSecs:30,ignoreDate:!1,date:this.getTimeString("date","second"),time:this.getTimeString("time","second"),flag:"Rule_Second_Cycle",id:(new Date).getTime(),children:[],icon:"fa fa-clock-o"};this.addNode(e)},addDefine:function(){var e,t=(e={flag:"Rule_User_Define",id:(new Date).getTime(),children:[]},an()(e,"id",(new Date).getTime()),an()(e,"icon","fa fa-file-text-o"),an()(e,"defineText",""),e);this.addNode(t)},removeNode:function(){this.currentNode===this.ruleTree[0]?(this.ruleTree=[],this.currentNode={}):(this.setParentNode(this.ruleTree[0]),this.currentNodeParent.children.splice(this.currentNodeIndex,1),this.currentNode=this.currentNodeParent,this.$refs.ruleTree.setCurrentKey(this.currentNode.id))},setParentNode:function(e){var t=this;e.children.length>0&&e.children.forEach(function(n,i){if(n===t.currentNode)return t.currentNodeParent=e,void(t.currentNodeIndex=i);t.setParentNode(n)})},addNode:function(e){var t=this;0===this.ruleTree.length?this.ruleTree.push(e):(this.currentNode.children.push(e),-1===this.expandedKeys.findIndex(function(t){return t===e.id})&&this.expandedKeys.push(e.id));this.currentNode=e,setTimeout(function(){t.$refs.ruleTree.setCurrentKey(e.id)},40)},getTimeString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"min",n=new Date,i=n.getFullYear(),a=n.getMonth()+1,o=n.getDate(),r=n.getHours(),s=n.getMinutes(),l=n.getSeconds();l=l<10?"0"+l:l;n.getDay();if("date"===e)return i+"-"+(a>9?a:"0"+a)+"-"+(o>9?o:"0"+o)+" "+r+":"+(s<10?"0"+s:s)+":"+("second"===t?l:"00");if("benchmark"===e){return i+"年"+a+"月"+o+"日 "+function(e){switch(e){case"0":return"星期日";case"1":return"星期一";case"2":return"星期二";case"3":return"星期三";case"4":return"星期四";case"5":return"星期五";case"6":return"星期六"}}+" "+function(e){return e>12?"上午12":"下午"+(e-1)}+"时"+(s<10?"0"+s:s)+"分00秒 CST"}return"time"===e?r+":"+(s<10?"0"+s:s)+":"+("second"===t?l:"00"):void 0},getNodeLabel:function(e){switch(e.flag){case"And":return"and";case"Or":return"or";case"Rule":var t="",n=e.ruleMap,i=function(e,t){return""!==n[e]&&null!==n[e]?"DayOfWeek"===e?t+"("+n[e]+")":"("+n[e]+")"+t:""};if(t=i("Year","年")+i("Month","月")+i("Day","号")+i("DayOfWeek","星期")+i("Hour","点")+i("Min","分")){var a=(t=Array.prototype.reduce.call(t,function(e,t){return"年"===t||"月"===t||"号"===t||"点"===t?e+t+" ":e+t},"")).indexOf("星期("+n.DayOfWeek+")");if(-1!==a){var o=a+6;t=t.slice(0,o)+" "+t.slice(o)}}return""===t?"不限":t;case"Rule_Time_Point":var r=function(e){switch(e+""){case"1":return">";case"2":return">=";case"3":return"=";case"4":return"<";case"5":return"<=";case"6":return"!="}};return e.ignoreDate?r(e.timeOperator)+e.time:r(e.timeOperator)+e.date;case"Rule_Cycle":return e.ignoreDate?e.time+"(/"+e.intervalMins+"min)":e.date+"(/"+e.intervalMins+"min)";case"Rule_Second_Cycle":return e.ignoreDate?e.time+"(/"+e.intervalSecs+"s)":e.date+"(/"+e.intervalSecs+"s)";case"Rule_User_Define":return"用户自定义规则"}},getTimeList:function(){var e=this,t=JSON.parse(ge()(this.ruleTree[0]));!function e(t){delete t.id,delete t.icon,t.children&&t.children.length>0&&t.children.forEach(function(t){e(t)})}(t),this.$reqGet(DCURL.job.getTimeAxis,t).then(function(t){t&&(e.timeList=t.CONTENT.timeList)})}},watch:{ruleTree:{deep:!0,handler:function(e){(this.$emit("getTimeRule",e[0]),e&&e[0]&&e[0].flag)&&(-1!=ge()(e[0]).indexOf("Rule")&&this.getTimeList())}}}},rn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time-rule"},[n("el-row",[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"text-body",class:{"time-rules-show":"Rule"===e.currentNode.flag,"bottom-time-show":"Rule_Time_Point"===e.currentNode.flag||"Rule_Cycle"===e.currentNode.flag||"Rule_Second_Cycle"===e.currentNode.flag,"bottom-define-show":"Rule_User_Define"===e.currentNode.flag}},[n("el-tree",{ref:"ruleTree",attrs:{data:e.ruleTree,accordion:"","default-expanded-keys":e.expandedKeys,"expand-on-click-node":!1,"node-key":"id","empty-text":"","highlight-current":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return n("span",{},[n("i",{class:i.icon}),e._v(" "),n("span",{domProps:{textContent:e._s(e.getNodeLabel(i))}})])}}])})],1),e._v(" "),"Rule"===e.currentNode.flag?n("div",{staticClass:"bottom-content-filter"},[n("el-row",[n("el-col",{attrs:{span:2}},[n("span",[e._v("年：")])]),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{disabled:!0,size:"mini",placeholder:"不限"},model:{value:e.currentNode.ruleMap.Year,callback:function(t){e.$set(e.currentNode.ruleMap,"Year",t)},expression:"currentNode.ruleMap.Year"}})],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("span",[e._v("月：")])]),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{disabled:!0,size:"mini",placeholder:"不限"},model:{value:e.currentNode.ruleMap.Month,callback:function(t){e.$set(e.currentNode.ruleMap,"Month",t)},expression:"currentNode.ruleMap.Month"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:2}},[n("span",[e._v("日：")])]),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{disabled:!0,size:"mini",placeholder:"不限"},model:{value:e.currentNode.ruleMap.Day,callback:function(t){e.$set(e.currentNode.ruleMap,"Day",t)},expression:"currentNode.ruleMap.Day"}})],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("span",[e._v("星期：")])]),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{disabled:!0,size:"mini",placeholder:"不限"},model:{value:e.currentNode.ruleMap.DayOfWeek,callback:function(t){e.$set(e.currentNode.ruleMap,"DayOfWeek",t)},expression:"currentNode.ruleMap.DayOfWeek"}})],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:2}},[n("span",[e._v("时：")])]),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{disabled:!0,size:"mini",placeholder:"不限"},model:{value:e.currentNode.ruleMap.Hour,callback:function(t){e.$set(e.currentNode.ruleMap,"Hour",t)},expression:"currentNode.ruleMap.Hour"}})],1),e._v(" "),n("el-col",{attrs:{span:2}},[n("span",[e._v("分：")])]),e._v(" "),n("el-col",{attrs:{span:10}},[n("el-input",{attrs:{disabled:!0,size:"mini",placeholder:"不限"},model:{value:e.currentNode.ruleMap.Min,callback:function(t){e.$set(e.currentNode.ruleMap,"Min",t)},expression:"currentNode.ruleMap.Min"}})],1)],1),e._v(" "),n("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[n("article",[n("p",[e._v("1、穷举，直接写出具体的值，以逗号分隔，例如：2016，2017，2018")]),e._v(" "),n("p",[e._v("2、指定范围，以减号“-”连接，例如：2016-2018，1-5，0-9")]),e._v(" "),n("p",[e._v("3、指定整除数，以“/”开头，表示能被此数整除即满足条件，比如希望每隔15分钟可以写成/15，表示0，15，30，45，60均符合条件")]),e._v(" "),n("p",[e._v("4、支持倒数第几，以减号“-”开头的负数，比如：-1可表示每月最后一天（注：倒数不支持范围，即不能完成20-1或者-2-1这样，也不支持年）")]),e._v(" "),n("p",[e._v("5、支持!=（不等于），>（大于），>=（大于等于），<（小于），<=（小于等于）（注：“不等于”通常不能在单一表达式中混用，否则等于无效）")]),e._v(" "),n("p",[e._v("6、以上这些均可自由组合，以逗号分隔")]),e._v(" "),n("p",[e._v("举例")]),e._v(" "),n("p",[e._v("以年为例：“2012-2014，2016，2018”表示2012年到2014年以及2016年、2018年都符合条件")]),e._v(" "),n("p",[e._v("以月为例：“1，/4，11”表示1月，所有能被4整除的月份以及11月")]),e._v(" "),n("p",[e._v("以天为例：“1-5，15，-1”表示1到5号，15号以及最后一天")]),e._v(" "),n("p",[e._v("以分钟为例：“0-10，/15，59”表示0到10分钟以及所有能整除15的分钟以及59分钟都满足条件")])]),e._v(" "),n("p",{staticClass:"time-rule-title",attrs:{slot:"reference"},slot:"reference"},[e._v("时间规则填写规范"),n("i",{staticClass:"el-icon-question"})])])],1):e._e(),e._v(" "),"Rule_Time_Point"===e.currentNode.flag||"Rule_Cycle"===e.currentNode.flag||"Rule_Second_Cycle"===e.currentNode.flag?n("div",{staticClass:"bottom-content-time"},[n("p",[n("span",[e._v("忽略日期：")]),e._v(" "),n("el-switch",{model:{value:e.currentNode.ignoreDate,callback:function(t){e.$set(e.currentNode,"ignoreDate",t)},expression:"currentNode.ignoreDate"}})],1),e._v(" "),n("p",[n("span",[e._v("基准时间")]),e._v(" "),e.currentNode.ignoreDate?n("el-time-picker",{key:"time",attrs:{value:e.currentNode.time,"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"任意时间点"}}):n("el-date-picker",{key:"date",attrs:{disabled:!0,type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.currentNode.date,callback:function(t){e.$set(e.currentNode,"date",t)},expression:"currentNode.date"}})],1),e._v(" "),"Rule_Time_Point"===e.currentNode.flag?n("p",[n("span",[e._v("时间间隔（操作符）")]),e._v(" "),n("el-select",{attrs:{disabled:!0},model:{value:e.currentNode.timeOperator,callback:function(t){e.$set(e.currentNode,"timeOperator",t)},expression:"currentNode.timeOperator"}},[n("el-option",{attrs:{label:">=",value:2}}),e._v(" "),n("el-option",{attrs:{label:">",value:1}}),e._v(" "),n("el-option",{attrs:{label:"=",value:3}}),e._v(" "),n("el-option",{attrs:{label:"!=",value:6}}),e._v(" "),n("el-option",{attrs:{label:"<",value:4}}),e._v(" "),n("el-option",{attrs:{label:"<=",value:5}})],1)],1):e._e(),e._v(" "),"Rule_Cycle"===e.currentNode.flag?n("p",[n("span",[e._v("时间间隔（分）")]),e._v(" "),n("el-input",{staticStyle:{width:"120px"},attrs:{disabled:!0},model:{value:e.currentNode.intervalMins,callback:function(t){e.$set(e.currentNode,"intervalMins",t)},expression:"currentNode.intervalMins"}})],1):e._e(),e._v(" "),"Rule_Second_Cycle"===e.currentNode.flag?n("p",[n("span",[e._v("时间间隔（秒）")]),e._v(" "),n("el-input",{staticStyle:{width:"120px"},attrs:{disabled:!0},model:{value:e.currentNode.intervalSecs,callback:function(t){e.$set(e.currentNode,"intervalSecs",t)},expression:"currentNode.intervalSecs"}})],1):e._e()]):e._e(),e._v(" "),"Rule_User_Define"===e.currentNode.flag?n("div",{staticClass:"bottom-content-define"},[n("p",[e._v("注：使用该规则需配合相关插件一同工作")]),e._v(" "),n("p",[n("el-input",{attrs:{disabled:!0,type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容"},model:{value:e.currentNode.defineText,callback:function(t){e.$set(e.currentNode,"defineText",t)},expression:"currentNode.defineText"}})],1)]):e._e()]),e._v(" "),n("el-col",{staticClass:"right-side",attrs:{span:6}},[n("div",[n("h3",{staticClass:"time-title"},[e._v("预览时间轴")]),e._v(" "),n("p",{staticClass:"time-body"},e._l(e.timeList,function(t,i){return e.timeList.length>0?n("span",{key:i,staticClass:"time-item"},[e._v(e._s(t))]):e._e()}))])])],1)],1)},staticRenderFns:[]};var sn={name:"contextParams",data:function(){return{tableData:[{key:"",value:""}],tableHeight:"252px",currentRow:null,context:{}}},created:function(){var e=this;this.propData?this.$reqGet(DCURL.job.getContext,{jobId:this.propData.jobId}).then(function(t){if(t){var n=[],i={};t.CONTENT.tableHead.forEach(function(e,t){n.push(e.name),i[e.name]=e.label}),e.context={tableData:t.CONTENT.tableData,tableHead:n,tableTitle:i}}}):this.context=this.contextData,this.$nextTick(function(){})},props:["propData","contextData"],methods:{rowClick:function(e){this.currentRow=e},add:function(){this.context.tableData.push({k:"",v:""})},remove:function(){var e=this,t=this.context.tableData,n=t.findIndex(function(t){return e.currentRow===t});t.splice(n,1),this.currentRow=null,this.$refs.contextTable.setCurrentRow()},submit:function(){var e=this,t={jobId:this.propData.jobId,flowContext:{tableData:this.context.tableData,tableHead:this.context.tableHead}};this.$reqPost(DCURL.job.setContext,t).then(function(t){1==t.STATE&&(e.$message({message:"修改成功",type:"success"}),e.$closeDialog())})}}},ln={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"context-params"},[n("h3",[e._v("上下文参数")]),e._v(" "),n("el-table",{ref:"contextTable",staticStyle:{width:"100%"},attrs:{data:e.context.tableData,border:"",height:e.tableHeight,"highlight-current-row":!0},on:{"row-click":e.rowClick}},e._l(e.context.tableHead,function(t,i){return n("el-table-column",{key:i,attrs:{"header-align":"center",prop:t,label:e.context.tableTitle[t]},scopedSlots:e._u([{key:"default",fn:function(i){return[n("span",[e._v(e._s(i.row[t]))])]}}])})})),e._v(" "),e.propData?n("p",{staticClass:"btn-group"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:e.$closeDialog}},[e._v("取消")])],1):e._e()],1)},staticRenderFns:[]};var cn={name:"jobForm",data:function(){return{timeRule:{},activeName:"timeRule",loading:!1,form:{}}},props:["propData"],components:{"time-rule":n("VU/8")(on,rn,!1,function(e){n("Bvl3")},"data-v-37737af8",null).exports,"context-params":n("VU/8")(sn,ln,!1,function(e){n("Gl+R")},"data-v-29c062e6",null).exports},created:function(){this.form=this.propData.data,this.$nextTick(function(){})},methods:{close:function(){this.$closeDialog()},handleClick:function(){},getTimeRule:function(e){this.form.timeRule=e},changeOn:function(){this.$emit("closeDialog")}}},un={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"job-form"},[n("el-form",{attrs:{model:e.form,"label-width":"180px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"名称:"}},[n("el-input",{attrs:{size:"mini",disabled:!0},model:{value:e.form.jobName,callback:function(t){e.$set(e.form,"jobName",t)},expression:"form.jobName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"保留历史数据（小时）:"}},[n("el-input",{attrs:{size:"mini",disabled:!0},model:{value:e.form.keepHistoryHours,callback:function(t){e.$set(e.form,"keepHistoryHours",t)},expression:"form.keepHistoryHours"}})],1)],1)],1)],1),e._v(" "),n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"定时规则",name:"timeRule"}},[n("time-rule",{ref:"timeRule",attrs:{data:{},timeRule:e.form.timeRule},on:{getTimeRule:e.getTimeRule}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"上下文参数",name:"contextParams"}},[n("context-params",{attrs:{contextData:e.form.context}})],1)],1)],1)},staticRenderFns:[]};var dn={components:{},props:["propData"],data:function(){return{jobName:"",jobs:[],table:new dc.Table({hasPage:!1,hasBtn:!0,editable:!0,height:"220px",btnGroup:[{icon:"fa fa-plus",title:"新增",color:"green",click:function(e,t){e.push({jobName:"",hisOpTime:""})}},{icon:"fa fa-times",title:"删除",color:"red",needRow:!0,click:function(e,t,n,i){e.splice(e.indexOf(t),1),i.currentRow=null}}],tableHead:[{type:"singleEnum",label:"Job",name:"jobName"},{type:"string",label:"历史数据时间",name:"hisOpTime"}],tableData:[{jobName:"",hisOpTime:""}],cellAppend:[{prop:"hisOpTime",condition:!0,component:"selecthisOpTime"}]})}},created:function(){this.table.tableHead[0].option=this.propData.jobs},watch:{},computed:{},methods:{}},hn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dc-table",{attrs:{object:this.table}})],1)},staticRenderFns:[]};var fn={components:{},props:["data"],data:function(){return{hisTimes:[],page:1,total:0}},created:function(){},watch:{jobName:function(e){this.data.row.hisOpTime="",this.getHisTimes()}},computed:{jobName:function(){return this.data.row.jobName},showText:function(){return this.data.row.hisOpTime?formatTime(this.data.row.hisOpTime):"点击选择"}},methods:{getHisTimes:function(){var e=this,t=this.data.tableHead[0].option,n=t[t.findIndex(function(t){return t.value===e.jobName})].id;this.$reqGet({url:"action=DCView.callJavaFunc2&Class=com.leavay.dc.runtime.JobMgr&FUNC=queryHistoryOptimes",params:{jobId:n,startPos:15*(this.page-1),count:15}}).then(function(t){t&&(e.hisTimes=t.CONTENT.datas.map(function(e){return{value:e,label:formatTime(e)}}),e.total=t.CONTENT.totalCount)})},pageChange:function(e){this.page=e,this.getHisTimes()}}},pn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"right",width:"260",trigger:"click"}},[n("el-radio-group",{model:{value:e.data.row.hisOpTime,callback:function(t){e.$set(e.data.row,"hisOpTime",t)},expression:"data.row.hisOpTime"}},e._l(e.hisTimes,function(t){return n("span",{key:t.value},[n("el-radio",{attrs:{label:t.value}},[e._v(e._s(t.label))]),n("br")],1)})),e._v(" "),e.data.row.jobName?n("el-pagination",{attrs:{layout:"prev, pager, next","page-size":15,small:!0,total:e.total},on:{"current-change":e.pageChange}}):e._e(),e._v(" "),n("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(e._s(e.showText))])],1)},staticRenderFns:[]};var mn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select-job"},[n("span",[e._v("选择Job: ")]),e._v(" "),e._l(e.propData.jobList,function(t){return n("el-select",{key:t.jobId,attrs:{size:"mini"},on:{change:e.valueChange},model:{value:e.jobId,callback:function(t){e.jobId=t},expression:"jobId"}},[n("el-option",{attrs:{value:t.jobId,label:t.jobName}})],1)})],2)},staticRenderFns:[]};var gn={components:{},props:["propData"],data:function(){var e=this;return{load:!1,keyword:"",lastword:"",table:new dc.Table({height:"260px",tableHead:{"Job和PDF":[{name:"name",label:"名字",type:"string"},{name:"type",label:"类型",type:"string"}],PDC:[{name:"name",label:"名字",type:"string"},{name:"Status",label:"状态",type:"string"},{name:"Msg",label:"信息",type:"string"},{name:"Start Time",label:"开始时间",type:"string"},{name:"End Time",label:"结束时间",type:"string"}]}[this.propData.flag],rowDbClick:function(t,n,i,a){n.name&&("PDC"!==n.type?e.propData.tree.setCurrentKey(n.ids[0],!0):e.propData.tree.setCurrentKey(n.jobId,!0),e.$closeDialog())},pageChange:function(){e.searchData()},sizeChange:function(){e.searchData()},cellStyle:function(e,t,n){if("status"===t.toLowerCase()){var i={cursor:"pointer"};for(var a in ht.a.statusColor)if(e===ht.a.statusColor[a].split("-")[1])return i.background=ht.a.statusColor[a].split("-")[0],i;return i}},cellAppend:[{prop:"Msg",condition:!0,component:"log-cell"}],filterSetting:[{prop:"End Time",show:function(e){return-1==e?"":formatTime(e)}},{prop:"Start Time",show:function(e){return-1==e?"":formatTime(e)}}]})}},created:function(){this.keyword=this.propData.keyword,this.lastword=this.propData.keyword,this.table.total=this.propData.data.total,this.table.tableData=this.propData.data.data},watch:{},computed:{},methods:{searchData:function(){var e=this;this.keyword!==this.lastword&&(this.table.currentPage=1),this.lastword=this.keyword,this.load=!0,this.$reqGet(DCURL.url,{flag:"搜索"+this.propData.flag,keyword:this.keyword,pageNo:this.table.currentPage,pageSize:this.table.currentSize}).then(function(t){try{e.load=!1,e.table.tableData=t.CONTENT.data,e.table.total=t.CONTENT.total}catch(e){}})}}},vn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},nativeOn:{keypress:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchData(t):null}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchData},slot:"append"})],1),e._v(" "),n("dc-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],attrs:{object:e.table}})],1)},staticRenderFns:[]};var bn={"status-table":gt,"handle-btn":wt,"log-cell":Dt,"log-content":Et,"change-password":ct,"status-flow":It,Login:function(){return new Promise(function(e){e()}).then(n.bind(null,"Luci"))},changeRadio:Lt,"pdc-info":Rt,featureType:Mt,TableEntity:Gt,FileEntity:zt,timepickerselect:Yt,historyTable:tn,jobForm:n("VU/8")(cn,un,!1,function(e){n("ECkp")},"data-v-9deb1d66",null).exports,resetNode:n("VU/8")(dn,hn,!1,function(e){n("IDZW")},"data-v-b7e3c0da",null).exports,selecthisOpTime:n("VU/8")(fn,pn,!1,function(e){n("vr/A")},"data-v-6aba0fab",null).exports,selectJob:n("VU/8")({components:{},props:["propData"],data:function(){return{jobId:""}},created:function(){},watch:{},computed:{},methods:{valueChange:function(e){this.propData.vue.jobId=e}}},mn,!1,function(e){n("A7XR")},"data-v-6344a705",null).exports,searchDialog:n("VU/8")(gn,vn,!1,function(e){n("sEoj")},"data-v-1a4c31f8",null).exports},wn=n("mtWM"),yn=n.n(wn),Nn=yn.a.CancelToken,Dn=[],Tn=void 0,xn=void 0,En=0;yn.a.interceptors.request.use(function(e){if(e.TIMEOUT=Cn,"get"===e.method){var t=e.params.params;Tn=e.params.info,e.params.loading&&(xn=N.Loading.service(Un)),t.action||_()(t,{action:Fn}),e.params=t,t.Class||(e.params.FILTER.user=localStorage.getItem("user"));var n=Dn.findIndex(function(t){return ge()(t.params)===ge()(e.params)&&t.url===e.url});-1!==n?Dn[n].cancel():e.cancelToken=new Nn(function(t){var n={cancel:t,params:e.params,url:e.url};Dn.push(n)})}if("post"===e.method){var i=e.data;Tn=i.info,i.loading&&(xn=N.Loading.service(Un)),i instanceof FormData||(e.url.includes("Class")||(i.data.user=localStorage.getItem("user")),e.data=(Sn?Sn+"=":"")+ge()(i.data).replace(/\%/g,"%25").replace(/\=/g,"%3D").replace(/\//g,"%2F").replace(/\&/g,"%26").replace(/\+/g,"%2B").replace(/\#/g,"%23").replace(/\?/g,"%3F"));var a=Dn.findIndex(function(t){return t.params===e.data&&t.url===e.url});-1!==a?Dn[a].cancel():e.cancelToken=new Nn(function(t){var n={cancel:t,params:e.data,url:e.url};Dn.push(n)})}return e},function(e){return Object(N.Message)({message:"加载超时",showClose:!0,type:"error"}),F.a.reject(e)}),yn.a.interceptors.response.use(function(e){xn&&xn.close();var t=e.config,n=void 0;if("get"===t.method?n=Dn.findIndex(function(e){return ge()(e.params)===ge()(t.params)&&e.url===t.url}):"post"===t.method&&(n=Dn.findIndex(function(e){return e.params===t.data&&e.url===t.url})),-1!==n&&Dn.splice(n,1),1==e.data.STATE)return Tn&&Tn.success&&Object(N.Message)({message:Tn.success,type:"success",showClose:!0}),e.data?F.a.resolve(e.data):F.a.resolve(e);if(e.data.ERR_MSG){var i=(new Date).getTime();if(i-En>3e3){En=i;var a=o&&o.error?o.error:e.data.ERR_MSG,o=a;a.length>80&&(a=a.slice(0,80)+"...");"get"===e.config.method?ge()(e.config.params):e.config.url,VUE.$notify.error({title:"请求出错",message:a})}return(2==e.data.STATE||e.data.ERR_MSG.includes("权限"))&&(x.commit("closeLoading"),x.commit("loginToggle",!1,t.method)),F.a.reject(e.data.ERR_MSG)}},function(e){return xn&&xn.close(),console.log(e),(e+"").includes("timeout")&&Object(N.Message)({message:"请求超时",showClose:!0,type:"error"}),F.a.reject(e)});var kn=yn.a,Cn=2e4,Fn="DCView.callJavaFunc",Sn="FILTER",_n="/ebook/dataProcess",Un={lock:!0},On=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];if("string"==typeof e){return new F.a(function(a,o){var r={};e.split("&").forEach(function(e){var t=e.split("=");r[t[0]]=t[1]}),r[Sn]=t,kn.get(_n,{params:{params:r,info:n,loading:i}}).then(function(e){a(e)}).catch(function(e){o(e)})})}if("object"===(void 0===e?"undefined":d()(e))){var a={info:{},loading:!1,hasErrorMessage:!0,params:{},url:""};if(!(a=_()(a,e)).url)return;var o={url:a.url,params:a.params};return new F.a(function(e,n){var i={};a.url.split("&").forEach(function(e){var t=e.split("=");i[t[0]]=t[1]}),i[Sn]="{}"!==ge()(t)?t:o.params,kn.get(_n,{params:{params:i,info:a.info,loading:a.loading}}).then(function(t){e(t)}).catch(function(e){n(e)})})}},In=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};arguments[3];if("string"==typeof e){return new F.a(function(i,a){e.includes("action")||(e="action="+Fn+"&"+e),kn.post(_n+"?"+e,{data:t,info:n}).then(function(e){i(e)}).catch(function(e){a(e)})})}if("object"===(void 0===e?"undefined":d()(e))){var i={info:{},loading:!1,hasErrorMessage:!0,data:{},url:""};(i=_()(i,e)).url,i.data,i.loading;return new F.a(function(e,t){kn.post(_n+"?action="+Fn+"&"+i.url,{data:i.data,info:i.info}).then(function(t){e(t)}).catch(function(e){t(e)})})}},$n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return F.a.all(t)},Ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"下载附件",i="";t&&"object"===(void 0===t?"undefined":d()(t))&&(i="&FILTER="+ge()(t)),D.a.Message({message:n});var a=location.origin+_n+(e.includes("action")?"?":"?action="+Fn+"&")+e+i,o=document.createElement("a");o.href=a,o.download="",o.click()},jn=function(e){return new F.a(function(t,n){kn.post(""+_n,e).then(function(e){t(e)}).catch(function(e){n(e)})})},Rn={url:"UDF=WebJobMonitorMgrUDF&FUNC=getData",flag:{runStatus:"总体运行情况",jobStatus:"作业运行情况",chart:"近7天报表数据",pie:"饼状图数据",allJobs:"所有Job状态列表",allPDF:"所有PDF状态列表",singlePDF:"单个PDF状态列表",singleJob:"单个Job状态列表",getTree1:"目录1",getTree2:"目录2",intiItem:"初始化目录",createFolder:"创建文件夹",deleteFolder:"删除文件夹",moveNode:"移动节点",getJobFlow:"Job流图",getPDFFlow:"PDF流图",getRelation:"调度点依赖",jobResetError:"重置错误节点",jobResetAll:"重置所有节点",jobStop:"调度中断",jobStart:"调度启用",jobActive:"调度激活",jobSuspend:"调度挂起",pdfDelect:"删除调度点",pdfActive:"激活挂起调度点",pdfReset:"重置调度点",pdfExchange:"切换调度点队列",pdfPriority:"切换调度点优先级",pdfLog:"调度点日志",allPDC:"所有PDC状态列表",getNode:"获取同类型节点",resetPDFError:"重置PDF错误节点",resetPDFAll:"重置PDF所有节点"}},Pn=function(){return n.e(8).then(n.bind(null,"0JeQ"))},Vn=function(){return n.e(6).then(n.bind(null,"S0Yx"))},Mn=function(){return n.e(5).then(n.bind(null,"uS2G"))},qn=function(){return n.e(10).then(n.bind(null,"Kv18"))},An=function(){return n.e(3).then(n.bind(null,"fHrz"))},Gn=function(){return n.e(7).then(n.bind(null,"maqa"))},Bn=function(){return n.e(12).then(n.bind(null,"TM1l"))},Hn=function(){return n.e(2).then(n.bind(null,"2J4a"))},zn=function(){return n.e(4).then(n.bind(null,"Ciwm"))},Wn=function(){return n.e(11).then(n.bind(null,"WMtU"))},Jn=function(){return n.e(17).then(n.bind(null,"OQmD"))},Yn=function(){return n.e(1).then(n.bind(null,"xlZp"))},Kn=function(){return n.e(15).then(n.bind(null,"DS7q"))},Xn=function(){return n.e(16).then(n.bind(null,"8Gap"))},Qn=function(){return n.e(14).then(n.bind(null,"AV8o"))},Zn={install:function(e){e.component("dc-quick-multiSelect",Qn),e.component("dc-attach",rt),e.component("dc-dataSet",nt.a),e.component("dc-advFilter",Xn),e.component("dc-contextmenu",Pn),e.component("dc-dialog",Vn),e.component("dc-dialogset",Mn),e.component("dc-form",Jn),e.component("dc-flow",Yn),e.component("dc-tabs",qn),e.component("dc-table",An),e.component("dc-tree",Gn),e.component("dc-importFile",Bn),e.component("dc-nav",Hn),e.component("dc-frame",zn),e.component("dc-frameset",Wn),e.component("dc-popover",Kn),e.component("dc-module",{render:function(e){var t=this;return e("div",[e("dc-dialogset"),e("dc-frameset"),function(e){if(t.importFile.show)return e("dc-importFile")}(e)])},data:function(){return{importFile:{}}},created:function(){this.importFile=this.$importFile}}),e.prototype.$dialogset=new R,e.prototype.$importFile=new G,e.prototype.$frameset=new te,e.prototype.$openDialog=function(t){var n=new dc.Dialog(t);n.show=!0,e.prototype.$dialogset.addDialog(n)},e.prototype.$closeDialog=function(t){if(t){var n=e.prototype.$dialogset.list.indexOf(t);e.prototype.$dialogset.list.splice(n,1)}else e.prototype.$dialogset.list.pop()},e.prototype.$addTab=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tabs",i=e.prototype.$dcTabs.findIndex(function(e){return e.name===n});e.prototype.$dcTabs[i].addTab(t)},e.prototype.$closeTab=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tabs",i=e.prototype.$dcTabs.findIndex(function(e){return e.name===n});e.prototype.$dcTabs[i].closeTab(t)},e.prototype.$focusTab=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tabs",i=e.prototype.$dcTabs.findIndex(function(e){return e.name===n});e.prototype.$dcTabs[i].focusTab(t)},e.prototype.$updateTabTitle=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tabs",a=e.prototype.$dcTabs.findIndex(function(e){return e.name===i});e.prototype.$dcTabs[a].updateTitle(t,n)},e.prototype.$updateTabData=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tabs",a=e.prototype.$dcTabs.findIndex(function(e){return e.name===i});e.prototype.$dcTabs[a].updateTabData(t,n)},e.prototype.$closeFrame=function(t){e.prototype.$frameset.closeFrame(t)},e.prototype.$openFrame=function(t){t.show=!0,e.prototype.$frameset.openFrame(t)},e.prototype.$affirm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"已取消操作";return new F.a(function(i,a){D.a.MessageBox.confirm(e,t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i()}).catch(function(){D.a.Message({type:"info",message:n,showClose:!0})})})},e.prototype.$reqGet=On,e.prototype.$reqPost=In,e.prototype.$reqSyn=$n,e.prototype.$exportFile=Ln,e.prototype.$submitFile=jn,e.prototype.$successMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"操作成功",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;D.a.Message({type:"success",message:e,showClose:!0,duration:t})},Array.prototype.swap=function(e,t){var n=this.indexOf(e);if(-1!==this.indexOf(e)){var i=n+t;if(i<0||i>this.length-1)return this;var a=this[i];return this.map(function(t){return t===a?e:t===e?a:t})}throw new Error("index===-1")};e.prototype.$cloneObject=function e(t){var n=void 0;if(t&&"object"===(void 0===t?"undefined":d()(t)))if(t instanceof Array){n=[];for(var i=0;i<t.length;i++)t[i]&&"object"===d()(t[i])?n.push(e(t[i])):n.push(t[i])}else for(var a in n={},t.constructor!==Object&&(n.__proto__=t.__proto__),t){var o=t[a];"object"===(void 0===o?"undefined":d()(o))?n[a]=e(o):n[a]=o}return n};for(var t in e.prototype.$handleData=function e(t,n,i){if(t&&"object"===(void 0===t?"undefined":d()(t))){if(!n||"object"!==(void 0===t?"undefined":d()(t)))throw new Error("condition is not a object");var a=function(){var a=void 0;if(t instanceof Array){for(var o=[],r=0;r<t.length;r++)"object"===d()(t[r])?o.push(e(t[r],n,i)):o.push(t[r]);a=o}else{a={};var s=n.key,l=n.value,c=function(o){var r=t[o];if(!r||"object"!==(void 0===r?"undefined":d()(r))||s===o&&void 0===l){var c=void 0,u=function(){if(void 0!==(c=i(t,o,r)))if(!c||"object"!==(void 0===c?"undefined":d()(c))||c instanceof Array)a[o]=c;else for(var e in c)a[e]=c[e]};s===o&&l===r?u():void 0===s&&l===r?u():void 0===l&&s===o?u():a[o]=r}else a[o]=e(r,n,i)};for(var u in t)c(u)}return{v:a}}();if("object"===(void 0===a?"undefined":d()(a)))return a.v}},bn)e.component(t,bn[t]);var n=new e;e.prototype.$addListenerOnce=function(e,t){n.$once(e,t)},e.prototype.$addListener=function(e,t){n.$on(e,t)},e.prototype.$emitEvent=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];n.$emit.apply(n,[e].concat(i))},e.prototype.$cancelEvent=function(e){n.$off(e)},window.DCURL=Rn}};window.dc={},window.dc.Table=j,window.dc.Dialogset=Mn,window.dc.Dialog=P,window.dc.Tabs=V,window.dc.Contextmenu=q,window.dc.ImportFile=G,window.dc.Tree=X,window.dc.Nav=Q,window.dc.Frame=ee,window.dc.Popover=ne,window.dc.Form=re,window.dc.NodeFlow=Ye,window.dc.ReportFlow=Qe,window.dc.AdvFilter=tt,window.objClone=ie.a,window.formatTime=function(e){var t=void 0;if("string"==typeof e){var n=e.split(" ");return n=k()(n[0].split("-"),n[1].split(":")),(t=new Date).setFullYear(parseInt(n[0])),t.setMonth(parseInt(n[1])-1),t.setDate(parseInt(n[2])),t.setHours(parseInt(n[3])),t.setMinutes(parseInt(n[4])),t.setSeconds(parseInt(n[5])),1e3*parseInt(t.getTime()/1e3)}var i=function(e){return 1===e.toString().length?"0"+e:e};return(t=new Date(e)).getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+" "+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds())};var ei=Zn,ti=(n("hsNJ"),n("5W1q"),n("XLwt")),ni=n.n(ti);i.default.config.productionTip=!1,i.default.use(D.a,{size:"small"}),i.default.use(ei),window.Echarts=ni.a,window.VUE=new i.default({el:"#app",router:y,store:x,components:{App:r},template:"<App/>"})},RYcG:function(e,t){e.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},RpMH:function(e,t){},SpI0:function(e,t){},WzY7:function(e,t){},XZad:function(e,t){},YVNP:function(e,t,n){"use strict";var i=n("pFYg"),a=n.n(i);t.a=function e(t,n,i,o){var r=n?e(n):t instanceof Array?[]:{};for(var s in t)i&&!!o==(-1==i.indexOf(s))||(r[s]="object"===a()(t[s])&&null!=t[s]?e(t[s]):t[s]);return r}},YnN1:function(e,t){},aix4:function(e,t){},"dj/5":function(e,t,n){"use strict";var i=n("Hpyp");var a=function(e,t,n,a){for(var o=n.length-1;o>=0;o--)n[o]&&-1!=n[o].indexOf(e)&&t[n[o][0]].visible&&t[n[o][1]].visible&&Object(i.a)(o,t,n,a)},o=n("1sUA");var r=function(e,t){e.splice(t,1)},s=n("C4MV"),l=n.n(s);var c=function(e,t){e[t]&&(e[t].visible=!1),l()(e,t,{enumerable:!1}),delete e[t]};var u=function(e,t,n,i){if(t[e].viewNodeFlag){var s=Object(o.a)(e,i).index;r(i,s),t[e].viewNodeFlag=!1,a(e,t,n,i),t[e].viewNodeFlag=!0,c(t,e)}},d=n("Emh/"),h=n("gmQG");var f=function(e,t){e.splice(t,1)};t.a=function(e,t){var n=Object(o.a)(t.id,e.groups).index;t.viewNodeFlag?function(e,t,n){var i={};i[e.flow.req.removeView.data.viewName]=t.label,i[e.flow.req.removeView.data.flowName]=e.flow.flowName,e.flowLoading=!0,e.$reqGet(e.flow.req.removeView.url,i).then(function(i){i&&(function(e,t,n){for(var i=n.length-1;i>=0;i--)n[i]&&-1!=n[i].indexOf(e)&&Object(h.a)(n,i)}(t.id,e.nodes,e.lines),function(e,t,n,i,a,o){Object(d.a)(n,a[o].slice(1)),u(e,n,i,a)}(t.id,t.label,e.nodes,e.lines,e.groups,n),e.flow.saveFlow(e))}).catch(function(t){e.flowLoading=!1})}(e,t,n):function(e,t,n){-1!=n?(a(t.id,e.nodes,e.lines,e.groups),c(e.nodes,t.id),function(e,t,n){var i=t[n].indexOf(e);f(t[n],i),1==t[n].length&&r(t,n)}(t.id,e.groups,n)):(a(t.id,e.nodes,e.lines,e.groups),e.lines.push(null),e.lines.pop(),c(e.nodes,t.id))}(e,t,n)}},fG4C:function(e,t){},gmQG:function(e,t,n){"use strict";t.a=function(e,t){e.splice(t,1)}},hI2U:function(e,t,n){"use strict";var i=n("mvHQ"),a=n.n(i),o=n("Gu7T"),r=n.n(o),s="guid",l="attrName",c={udf:"WebPDCMgrUDF",func:"importDataSetContent"},u={url:"UDF=WebPDCMgrUDF&FUNC=exportDataSetContent"},d={name:"dataSet",props:["propData"],data:function(){return{form:{},item:[],object:{},dataSetContent:"",dialog:{}}},watch:{propData:function(){this.initData()}},created:function(){var e=this;this.$nextTick(function(){e.initData()})},methods:{initData:function(){var e=this;this.form=this.propData.form,this.item=this.propData.item,this.object=this.propData.object,this.object.set("editable",!0).set("hasPage",!1).set("hasBottomBtn",!1).set("btnGroup",[{icon:"fa fa-plus",color:"green",title:"新增",click:function(t,n){for(var i={},a=0;a<e.item.tableHead.length;a++)i[e.item.tableHead[a].name]="";t.push(i)}},{icon:"fa fa-remove",color:"red",title:"删除",needRow:!0,click:function(e,t){var n=e.findIndex(function(e){return e==t});e.splice(n,1)}},{icon:"fa fa-level-up",color:"green",title:"上移",needRow:!0,click:function(e,t){e.splice.apply(e,[0,e.length].concat(r()(e.swap(t,-1))))}},{icon:"fa fa-level-down",color:"green",title:"下移",needRow:!0,click:function(e,t,n){e.splice.apply(e,[0,e.length].concat(r()(e.swap(t,1))))}},{icon:"fa fa-upload",color:"blue",title:"导入",click:function(t,n,i){var o={};o[s]=e.$route.query[s],o[l]=e.item.name,o.tableData=t;e.$importFile.open({multiple:!1,title:"上传附件",width:"400px",params:{UDF:c.udf,FUNC:c.func,FILTER:a()(o)},handleSuccess:function(e){t.splice.apply(t,[0,t.length].concat(r()(e[0].res.CONTENT.tableData))),this.close()}})}},{icon:"fa fa-download",color:"blue",title:"导出",click:function(t,n,i){var a={};a[s]=e.$route.query[s],a[l]=e.item.name,a.tableData=t,e.$exportFile(u.url,a)}}]),this.initDataSetContent(),this.dialog=new dc.Dialog({data:this.propData,component:"dc-table",width:"500px",title:"数据集",hasBtn:!0,btnGroup:[{text:"确定",type:"primary",click:function(t,n){var i;(i=e.form.data[e.item.name]).splice.apply(i,[0,e.form.data[e.item.name].length].concat(r()(t.data.object.tableData))),e.initDataSetContent(),t.show=!1}}]})},initDataSetContent:function(){this.dataSetContent=this.form.data[this.item.name].length?a()(this.form.data[this.item.name][0])+"...":""},openDateSet:function(){this.object.set("tableData",objClone(this.form.data[this.item.name])).set("tableHead",this.item.tableHead).set("align","center").set("height","200px"),this.$openDialog(this.dialog)}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",{staticClass:"pointer",style:e.item.style||e.form.inputStyle,attrs:{value:e.dataSetContent,readonly:!0,type:"text",title:"",placeholder:e.item.placeholder},nativeOn:{click:function(t){e.openDateSet()}}},[n("el-button",{attrs:{slot:"append",icon:e.item.extBtnIcon||e.form.extBtnIcon,title:""},on:{click:function(t){e.openDateSet()}},slot:"append"})],1)},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(e){n("iHiP")},null,null);t.a=f.exports},hsNJ:function(e,t){},i7FL:function(e,t){},iHiP:function(e,t){},jnUH:function(e,t){},oqti:function(e,t,n){"use strict";var i=n("Gu7T"),a=n.n(i),o=n("LDvL"),r=(n("dj/5"),n("mvHQ")),s=n.n(r);var l=function(e){return"{}"==s()(e)},c=n("YVNP");var u=function(e,t,n,i,a,o){var r={};r[e.flow.req.createView.data.intoGroup]=t.slice(0),r[e.flow.req.createView.data.viewLabel]=n,r[e.flow.req.createView.data.flowName]=e.flow.flowName,r[e.flow.req.createView.data.layer]=JSON.parse(window.sessionStorage.getItem(e.layers)).slice(-1).pop(),e.flowLoading=!0,e.$reqGet(e.flow.req.createView.url,r).then(function(t){if(t){var r=function(e){var t={};for(var n in e=e.CONTENT)if("allowed"!=n){t=Object(c.a)(e[n],t);break}return t}(t);i.createViewOperate(e,r,e.nodes,e.lines,e.groups,a,o,n),e.flow.saveFlow(e)}}).catch(function(t){e.flowLoading=!1})},d=n("9eRc");var h=function(e,t,n){var i=[e.id];for(var a in t)i.push(t[a].id),t[a].visible=!e.visible,t[a].viewNodeFlag=!e.viewNodeFlag;n.push(i)};var f=function(e,t,n){t.attr.viewNodeFlag=!0,t.attr.width=e.flow.size.view.width,t.attr.height=e.flow.size.view.height,t.attr.x=n.x-t.attr.width/2,t.attr.y=n.y-t.attr.height/2};var p=function(e,t,n,i){var a=Object(c.a)(e.nodeObj);a.attr=Object(c.a)(t,a.attr);var r=Object(o.a)(n,i,e);return f(e,a,r),a},m=n("D9Ar"),g=n("tzUH");var v=function(e,t,n){for(var i=!0,a=0;a<n.length;a++)if(t[n[a]][e.flow.nodeType]==e.flow.viewFlag){i=!1;break}return i},b=n("+j5p"),w=n("+vo4"),y=-1,N=1,D=0,T={attr:{x0:0,y0:0,x1:0,y1:0,x:0,y:0,width:0,height:0,selectFlag:{value:!1},moveFlag:{value:!1},nodes:{},nodesId:[]},selectBoxFlag:function(e,t){return void 0!==t&&(e.value=t),e.value},recordXY:function(e){e.x0=e.x,e.y0=e.y},recordNodesXY:function(e){for(var t in e)e[t].x>this.attr.x&&e[t].x+e[t].width<this.attr.x+this.attr.width&&e[t].y>this.attr.y&&e[t].y+e[t].height<this.attr.y+this.attr.height&&e[t].visible&&this.recordXY(e[t])},recordNodes:function(e,t){var n;for(var i in this.attr.nodes={},this.attr.nodesId=[],e)e[i].x>this.attr.x&&e[i].x+e[i].width<this.attr.x+this.attr.width&&e[i].y>this.attr.y&&e[i].y+e[i].height<this.attr.y+this.attr.height&&e[i].visible&&(this.attr.nodes[e[i].id]=e[i],this.attr.nodesId.push(e[i].id));(n=t.focusNodes).splice.apply(n,[0,t.focusNodes.length].concat(a()(this.attr.nodesId)))},selectBoxXY:function(e,t,n,i){var a=Object(o.a)(t,n,e);i?(this.attr.x1=a.x,this.attr.y1=a.y):(this.attr.x0=a.x,this.attr.y0=a.y)},selectBoxSizeChange:function(e,t){if(e){var n=Object(o.a)(e,t.panelObj,t);n.x>=this.attr.x0?(this.attr.x=this.attr.x0,this.attr.width=n.x-this.attr.x0):(this.attr.x=n.x,this.attr.width=this.attr.x0-n.x),n.y>=this.attr.y0?(this.attr.y=this.attr.y0,this.attr.height=n.y-this.attr.y0):(this.attr.y=n.y,this.attr.height=this.attr.y0-n.y),Object(g.a)(n,t)}else this.attr.width=0,this.attr.height=0},objMove:function(e,t){t.x=e.x-this.attr.x1+t.x0,t.y=e.y-this.attr.y1+t.y0},multiObjMove:function(e,t){for(var n in t)this.objMove(e,t[n])},selectStar:function(e,t,n,i,a){this.selectBoxFlag(this.attr.selectFlag,!0),Object(b.a)(i,a),this.attr.nodesId=[],this.selectBoxXY(e,t,n)},selecting:function(e,t){this.selectBoxFlag(this.attr.selectFlag)&&this.selectBoxSizeChange(e,t)},selectOver:function(e,t){this.selectBoxFlag(this.attr.selectFlag)&&(this.selectBoxFlag(this.attr.selectFlag,!1),this.recordNodes(e,t),l(this.attr.nodes)&&this.selectBoxHidden())},selectBoxMoveStart:function(e,t){this.selectBoxFlag(this.attr.moveFlag,!0),this.recordXY(this.attr),this.recordNodesXY(this.attr.nodes),this.selectBoxXY(t,e,t.panelObj,!0)},selectBoxMove:function(e,t){if(this.selectBoxFlag(this.attr.moveFlag)){var n=Object(o.a)(e,t.panelObj,t);Object(g.a)(n,t),this.objMove(n,this.attr),this.multiObjMove(n,this.attr.nodes)}},isContact:function(e){var t=y;for(var n in e)if(e[n]&&e[n].visible&&-1==this.attr.nodesId.indexOf(e[n].id)&&this.attr.y+this.attr.height>=e[n].y&&this.attr.y<=e[n].y+e[n].height){if(this.attr.x+this.attr.width>=e[n].x&&this.attr.x+this.attr.width/2<=e[n].x+e[n].width/2){t=D;break}if(this.attr.x<=e[n].x+e[n].width&&this.attr.x+this.attr.width/2>=e[n].x+e[n].width/2){t=N;break}}return{flag:t,node:e[n]}},contactNode:function(e,t){for(var n in this.attr.nodes)w.a.moveX(this.attr.nodes[n],e.flag,t),this.attr.nodes[n].viewNodeFlag||t.flow.isContactAttach&&w.a.contactNode(this.attr.nodes[n],e,t.lines,t.groups)},selectBoxMoveOver:function(e){if(this.selectBoxFlag(this.attr.moveFlag)){this.selectBoxFlag(this.attr.moveFlag,!1);var t=this.isContact(e.nodes);t.flag>y&&(t.node.viewNodeFlag?this.contactView(e,t):this.contactNode(t,e),this.selectBoxHidden())}},contactView:function(e,t){for(var n in this.attr.nodes)w.a.moveX(this.attr.nodes[n],t.flag,e),this.attr.nodes[n].viewNodeFlag||Object(m.a)(e,this.attr.nodes[n].id,t.node.id,t.node.label,e.nodes,e.lines,e.groups)},selectBoxHidden:function(){this.selectBoxSizeChange(),this.selectBoxFlag(this.attr.moveFlag,!1)},removeSelectedNodes:function(e){},createView:function(e,t,n,i,a,o,r){!l(this.attr.nodes)&&v(e,t,this.attr.nodesId)&&(this.selectBoxHidden(),u(e,this.attr.nodesId,r,this,a,o))},createViewOperate:function(e,t,n,i,a,o,r,s){if(!l(t)){var c=p(e,t,o,r);n[c.attr.id]=c.attr,h(c.attr,this.attr.nodes,a),Object(d.a)(i,a,a.length-1)}}};t.a=T},pQWX:function(e,t,n){"use strict";var i=n("Zrlr"),a=n.n(i),o=n("wxAW"),r=n.n(o);var s=function(e,t,n,i){var a=0,o="digraph G { rankdir="+e.flow.layout.rankdir+"; node[shape=box];";for(var r in t)t[r].visible&&(o+='"'+r+'"[height='+t[r].height/e.flow.layout.ratioHeight+",width="+(t[r].width>e.flow.layout.widthBorder?e.flow.layout.wide:e.flow.layout.narrow)+"]",t[r].height>a&&(a=t[r].height));for(var s=0;s<n.length;s++)t[n[s][0]].visible&&t[n[s][1]].visible&&(o+='"'+n[s][0]+'"->"'+n[s][1]+'";');o+="}",e.flowLoading=!0,e.svg_div=Viz(o,"svg"),setTimeout(function(){var n=0;e.panelLayoutBorder={x:0,y:0};for(var o=document.querySelectorAll("#svg_div"+e.index+" .node"),r=0;r<o.length;r++){var s=o[r].querySelector("text"),l=s.innerHTML.replace(/&lt;/,"<").replace(/&gt;/,">");t[l].x=Number(s.getAttribute("x"))+e.flow.layout.fixed.x,n=Number(s.getAttribute("y"))<n?Number(s.getAttribute("y")):n,t[l].x>e.panelLayoutBorder.x&&(e.panelLayoutBorder.x=t[l].x)}for(var c=0;c<o.length;c++){var u=o[c].querySelector("text"),d=u.innerHTML.replace(/&lt;/,"<").replace(/&gt;/,">");t[d].y=Number(u.getAttribute("y"))-n+e.flow.layout.fixed.y-t[d].height/2+a/2,t[d].y+a>e.panelLayoutBorder.y&&(e.panelLayoutBorder.y=t[d].y+a)}e.svg_div="",i.reSizePanel(e.panelLayoutBorder),e.flowLoading=!1},0)},l={windowHeight:1,windowWidth:1,panelWidthFixed:1,panelHeightFixed:1,panelWidth:1,panelHeight:1,deltaX:0,deltaY:0,viewBoxX:0,viewBoxY:0,viewBoxWidth:1,viewBoxHeight:1},c=function(){function e(t){for(var n in a()(this,e),l)this[n]=l[n];if(t)for(var i in t)this[i]=t[i]}return r()(e,[{key:"ratioX",value:function(){return this.viewBoxWidth/this.panelWidth}},{key:"ratioY",value:function(){return this.viewBoxHeight/this.panelHeight}},{key:"isPanelSizeChange",value:function(){return this.panelWidth>this.panelWidthFixed||this.panelHeight>this.panelHeightFixed}},{key:"isViewBoxXYChange",value:function(){return this.viewBoxX<0||this.viewBoxY<0}},{key:"viewBoxRightDownMove",value:function(){this.viewBoxX-=this.windowWidth/2/this.layout.delta,this.viewBoxY-=this.windowHeight/2/this.layout.delta}},{key:"viewBoxLeftUpMove",value:function(){this.viewBoxX+=this.windowWidth/2/this.layout.delta,this.viewBoxY+=this.windowHeight/2/this.layout.delta}},{key:"panelRightDownMove",value:function(e){e.scrollLeft+=this.windowWidth/2/this.layout.delta,e.scrollTop+=this.windowHeight/2/this.layout.delta}},{key:"panelLeftUpMove",value:function(e){e.scrollLeft-=this.windowWidth/2/this.layout.delta,e.scrollTop-=this.windowHeight/2/this.layout.delta}},{key:"viewBoxSizeSmaller",value:function(){this.viewBoxWidth+=this.deltaX,this.viewBoxHeight+=this.deltaY}},{key:"viewBoxSizeCenterSmaller",value:function(){this.viewBoxRightDownMove(),this.viewBoxSizeSmaller()}},{key:"viewBoxSizeBigger",value:function(){this.viewBoxWidth-=this.deltaX,this.viewBoxHeight-=this.deltaY}},{key:"viewBoxSizeCenterBigger",value:function(){this.viewBoxLeftUpMove(),this.viewBoxSizeBigger()}},{key:"panelSizeSmaller",value:function(){this.panelWidth-=this.deltaX,this.panelHeight-=this.deltaY}},{key:"panelSizeCenterSmaller",value:function(e){this.panelSizeSmaller(),this.panelLeftUpMove(e)}},{key:"panelSizeBigger",value:function(){this.panelWidth+=this.deltaX,this.panelHeight+=this.deltaY}},{key:"panelSizeCenterBigger",value:function(e){this.panelSizeBigger(),this.panelRightDownMove(e)}},{key:"initGraphSize",value:function(){this.windowHeight=document.documentElement.clientHeight,this.windowWidth=document.documentElement.clientWidth}},{key:"initPanelFixedSize",value:function(e){this.panelWidthFixed=e.x+this.layout.fixed.marginRight>document.body.clientWidth?e.x+this.layout.fixed.marginRight:document.body.clientWidth,this.panelHeightFixed=e.y+this.layout.fixed.marginBottom>document.documentElement.clientHeight?e.y+this.layout.fixed.marginBottom:document.documentElement.clientHeight}},{key:"initPanelSize",value:function(){this.panelWidth=this.panelWidthFixed,this.panelHeight=this.panelHeightFixed}},{key:"initViewBoxSize",value:function(){this.viewBoxX=0,this.viewBoxY=0,this.viewBoxWidth=this.panelWidth,this.viewBoxHeight=this.panelHeight}},{key:"initDeltaSize",value:function(){this.deltaX=this.panelWidthFixed/this.layout.delta,this.deltaY=this.panelHeightFixed/this.layout.delta}},{key:"zoomOut",value:function(e){this.isPanelSizeChange()?this.panelSizeCenterSmaller(e.$refs.graph):this.viewBoxSizeCenterSmaller()}},{key:"zoomIn",value:function(e){this.isViewBoxXYChange()?this.viewBoxSizeCenterBigger():this.panelSizeCenterBigger(e.$refs.graph)}},{key:"initSize",value:function(e){this.initGraphSize(),this.autoLayout(e,e.nodes,e.lines)}},{key:"reSizePanel",value:function(e){this.initPanelFixedSize(e),this.initPanelSize(),this.initViewBoxSize(),this.initDeltaSize()}},{key:"autoLayout",value:function(e,t,n){s(e,t,n,this)}}]),e}();t.a=c},sEoj:function(e,t){},svcw:function(e,t){},tD9v:function(e,t){},tvR6:function(e,t){},tzUH:function(e,t,n){"use strict";t.a=function(e,t){e.x<=t.panelObj.viewBoxX+t.$refs.graph.scrollLeft*t.panelObj.ratioX()+t.flow.panelBorder.left?t.$refs.graph.scrollLeft-=t.flow.scrollMove.x:e.x>=(t.$refs.graph.clientWidth+t.$refs.graph.scrollLeft)*t.panelObj.ratioX()-t.flow.panelBorder.right&&(t.$refs.graph.scrollLeft+=t.flow.scrollMove.x),e.y<=t.panelObj.viewBoxY+t.$refs.graph.scrollTop*t.panelObj.ratioY()+t.flow.panelBorder.top?t.$refs.graph.scrollTop-=t.flow.scrollMove.y:e.y>=(t.$refs.graph.clientHeight+t.$refs.graph.scrollTop)*t.panelObj.ratioY()-t.flow.panelBorder.bottom&&(t.$refs.graph.scrollTop+=t.flow.scrollMove.y)}},"vr/A":function(e,t){},"x/KU":function(e,t){}},[0]);